<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>cbh_core_api.resources API documentation</title>
    <meta name="description" content="Main interface for requesting the project JSON data from ChemBio Hub Platform
Also schema and config..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.ALL">ALL</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ALL_WITH_RELATIONS">ALL_WITH_RELATIONS</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.FLOWJS_EXPIRATION_DAYS">FLOWJS_EXPIRATION_DAYS</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.FLOWJS_PATH">FLOWJS_PATH</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.WS_DEBUG">WS_DEBUG</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.handler400">handler400</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.handler403">handler403</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.handler404">handler404</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.handler500">handler500</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.logger">logger</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.build_content_type">build_content_type</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.chunk_upload_to">chunk_upload_to</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.get_field_list">get_field_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.get_field_name_from_key">get_field_name_from_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.get_key_from_field_name">get_key_from_field_name</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.remove_expired_files">remove_expired_files</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.CBHNoSerializedDictField">CBHNoSerializedDictField</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.CBHNoSerializedDictField.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.CBHNoSerializedDictField.contribute_to_class">contribute_to_class</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.CBHNoSerializedDictField.convert">convert</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.CBHNoSerializedDictField.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.CBHNoSerializedDictField.has_default">has_default</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.CBHNoSerializedDictField.hydrate">hydrate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.CSRFExemptMixin">CSRFExemptMixin</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.CSRFExemptMixin.dispatch">dispatch</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource">ChemRegCustomFieldConfigResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_created_by">hydrate_created_by</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_project_data_fields">hydrate_project_data_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource">ChemRegDataPointProjectFieldResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_form">dehydrate_edit_form</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_schema">dehydrate_edit_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_handsontable">dehydrate_handsontable</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_view_form">dehydrate_view_form</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace">get_namespace</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace_for_action_key">get_namespace_for_action_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.dehydrate_flowjs_upload_url">dehydrate_flowjs_upload_url</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.hydrate_created_by">hydrate_created_by</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ChemregProjectResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.Index">Index</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.Index.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.as_view">as_view</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.get">get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.get_context_data">get_context_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.get_template_names">get_template_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.http_method_not_allowed">http_method_not_allowed</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.options">options</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Index.render_to_response">render_to_response</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.InvitationResource">InvitationResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_form">get_form</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.hydrate_created_by">hydrate_created_by</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.InvitationResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.Login">Login</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.Login.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.as_view">as_view</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.form_invalid">form_invalid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.form_valid">form_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get">get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_context_data">get_context_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_form">get_form</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_form_class">get_form_class</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_form_kwargs">get_form_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_initial">get_initial</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_prefix">get_prefix</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_success_url">get_success_url</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.get_template_names">get_template_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.http_method_not_allowed">http_method_not_allowed</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.options">options</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.post">post</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.put">put</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Login.render_to_response">render_to_response</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.Logout">Logout</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.Logout.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Logout.as_view">as_view</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Logout.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Logout.get">get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Logout.http_method_not_allowed">http_method_not_allowed</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.Logout.options">options</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.MyPasswordResetForm">MyPasswordResetForm</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.add_error">add_error</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.add_initial_prefix">add_initial_prefix</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.add_prefix">add_prefix</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.as_p">as_p</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.as_table">as_table</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.as_ul">as_ul</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.get_users">get_users</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.has_changed">has_changed</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.has_error">has_error</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.hidden_fields">hidden_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.is_multipart">is_multipart</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.non_field_errors">non_field_errors</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.order_fields">order_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.send_mail">send_mail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.MyPasswordResetForm.visible_fields">visible_fields</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource">NoCustomFieldsChemregProjectResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_flowjs_upload_url">dehydrate_flowjs_upload_url</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_created_by">hydrate_created_by</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.ProjectPermissionResource">ProjectPermissionResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectPermissionResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.ProjectTypeResource">ProjectTypeResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.dehydrate_copy_action_name">dehydrate_copy_action_name</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.ProjectTypeResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.SimpleResourceURIField">SimpleResourceURIField</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.SimpleResourceURIField.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SimpleResourceURIField.contribute_to_class">contribute_to_class</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SimpleResourceURIField.convert">convert</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SimpleResourceURIField.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SimpleResourceURIField.has_default">has_default</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SimpleResourceURIField.hydrate">hydrate</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.SkinningResource">SkinningResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate_chem_query_schemaform">dehydrate_chem_query_schemaform</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate_field_type_choices">dehydrate_field_type_choices</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate_hide_schemaform">dehydrate_hide_schemaform</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate_query_schemaform">dehydrate_query_schemaform</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate_savedsearch_schemaform">dehydrate_savedsearch_schemaform</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dehydrate_sort_schemaform">dehydrate_sort_schemaform</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.SkinningResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.TemplateProjectFieldResource">TemplateProjectFieldResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_id">dehydrate_id</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.TemplateProjectFieldResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.UserHydrate.hydrate_created_by">hydrate_created_by</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_api.resources.UserResource">UserResource</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.alter_deserialized_list_data">alter_deserialized_list_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.api_field_from_django_field">api_field_from_django_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.apply_authorization_limits">apply_authorization_limits</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.apply_filters">apply_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.apply_sorting">apply_sorting</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_create_detail">authorized_create_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_create_list">authorized_create_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_delete_detail">authorized_delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_delete_list">authorized_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_read_detail">authorized_read_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_read_list">authorized_read_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_update_detail">authorized_update_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.authorized_update_list">authorized_update_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.base_urls">base_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.build_bundle">build_bundle</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.build_filters">build_filters</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.build_schema">build_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.cached_obj_get">cached_obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.cached_obj_get_list">cached_obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.can_create">can_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.can_delete">can_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.can_update">can_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.check_filtering">check_filtering</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.create_identifier">create_identifier</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.create_response">create_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dehydrate">dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dehydrate_can_create_and_own_projects">dehydrate_can_create_and_own_projects</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dehydrate_can_view_assayreg">dehydrate_can_view_assayreg</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dehydrate_can_view_chemreg">dehydrate_can_view_chemreg</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dehydrate_display_name">dehydrate_display_name</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dehydrate_is_logged_in">dehydrate_is_logged_in</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dehydrate_resource_uri">dehydrate_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.delete_detail">delete_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.delete_list">delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.deserialize">deserialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.detail_uri_kwargs">detail_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.determine_format">determine_format</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dispatch">dispatch</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dispatch_detail">dispatch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.dispatch_list">dispatch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.error_response">error_response</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.filter_value_to_python">filter_value_to_python</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.full_dehydrate">full_dehydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.full_hydrate">full_hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.generate_cache_key">generate_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_bundle_detail_data">get_bundle_detail_data</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_detail">get_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_fields">get_fields</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_list">get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_multiple">get_multiple</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_object_list">get_object_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_resource_uri">get_resource_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_schema">get_schema</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.get_via_uri">get_via_uri</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.hydrate">hydrate</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.hydrate_m2m">hydrate_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.is_authenticated">is_authenticated</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.is_valid">is_valid</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.log_throttled_access">log_throttled_access</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.method_check">method_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.obj_create">obj_create</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.obj_delete">obj_delete</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.obj_delete_list">obj_delete_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.obj_delete_list_for_update">obj_delete_list_for_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.obj_get">obj_get</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.obj_get_list">obj_get_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.obj_update">obj_update</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.override_urls">override_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.patch_detail">patch_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.patch_list">patch_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.post_detail">post_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.post_list">post_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.prepend_urls">prepend_urls</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.put_detail">put_detail</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.put_list">put_list</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.remove_api_resource_names">remove_api_resource_names</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.resource_uri_kwargs">resource_uri_kwargs</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.rollback">rollback</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.save">save</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.save_m2m">save_m2m</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.save_related">save_related</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.serialize">serialize</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.should_skip_field">should_skip_field</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.throttle_check">throttle_check</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.unauthorized_result">unauthorized_result</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.update_in_place">update_in_place</a></li>
    <li class="mono"><a href="#cbh_core_api.resources.UserResource.wrap_view">wrap_view</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">cbh_core_api.resources</span> module</h1>
  <p>Main interface for requesting the project JSON data from ChemBio Hub Platform
Also schema and configuration APIs</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources" class="source">
    <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Main interface for requesting the project JSON data from ChemBio Hub Platform</span>
<span class="sd">Also schema and configuration APIs</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1">#FlowFile relocation</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">cbh_core_api.flowjs_settings</span> <span class="kn">import</span> <span class="n">FLOWJS_PATH</span><span class="p">,</span> <span class="n">FLOWJS_EXPIRATION_DAYS</span>


<span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># Get an instance of a logger</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">RequestFactory</span>
<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span> <span class="n">ALL</span>
<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span>
<span class="kn">from</span> <span class="nn">tastypie.exceptions</span> <span class="kn">import</span> <span class="n">BadRequest</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span><span class="p">,</span> <span class="n">QueryDict</span>
<span class="kn">import</span> <span class="nn">shortuuid</span>
<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span>
<span class="kn">from</span> <span class="nn">tastypie</span> <span class="kn">import</span> <span class="n">fields</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.tokens</span> <span class="kn">import</span> <span class="n">default_token_generator</span>
<span class="kn">from</span> <span class="nn">tastypie.exceptions</span> <span class="kn">import</span> <span class="n">ImmediateHttpResponse</span>

<span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">PasswordResetForm</span>
<span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">CustomFieldConfig</span>
<span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">Project</span>
<span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">ProjectType</span>
<span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">SkinningConfig</span>
<span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">Invitation</span>
<span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">PinnedCustomField</span>


<span class="kn">from</span> <span class="nn">cbh_core_api.authorization</span> <span class="kn">import</span> <span class="n">ProjectListAuthorization</span><span class="p">,</span> <span class="n">InviteAuthorization</span><span class="p">,</span> <span class="n">viewer_projects</span><span class="p">,</span> <span class="n">ProjectPermissionAuthorization</span>
<span class="kn">from</span> <span class="nn">tastypie.authentication</span> <span class="kn">import</span> <span class="n">SessionAuthentication</span>
<span class="kn">from</span> <span class="nn">tastypie.paginator</span> <span class="kn">import</span> <span class="n">Paginator</span>

<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Prefetch</span>

<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ALL_WITH_RELATIONS</span>
<span class="kn">from</span> <span class="nn">tastypie.utils.mime</span> <span class="kn">import</span> <span class="n">build_content_type</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseRedirect</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">cbh_core_api.authorization</span> <span class="kn">import</span> <span class="n">get_all_project_ids_for_user</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">FormView</span><span class="p">,</span> <span class="n">View</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">AuthenticationForm</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">login</span> <span class="k">as</span> <span class="n">auth_login</span><span class="p">,</span> <span class="n">logout</span> <span class="k">as</span> <span class="n">auth_logout</span>
<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span>
<span class="kn">from</span> <span class="nn">tastypie.authorization</span> <span class="kn">import</span> <span class="n">Authorization</span>
<span class="kn">from</span> <span class="nn">tastypie</span> <span class="kn">import</span> <span class="n">http</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.views</span> <span class="kn">import</span> <span class="n">password_reset</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># django &gt;= 1.7</span>
    <span class="kn">from</span> <span class="nn">django.apps</span> <span class="kn">import</span> <span class="n">apps</span>
    <span class="n">get_model</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="c1"># django &lt; 1.7</span>
    <span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">get_model</span>

<span class="c1"># If ``csrf_exempt`` isn&#39;t present, stub it.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">django.views.decorators.csrf</span> <span class="kn">import</span> <span class="n">csrf_exempt</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">csrf_exempt</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">func</span>
<span class="kn">from</span>  <span class="nn">BeautifulSoup</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">defusedxml.lxml</span> <span class="kn">as</span> <span class="nn">lxml</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">lxml</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">WS_DEBUG</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">WS_DEBUG</span>
<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
    <span class="n">WS_DEBUG</span> <span class="o">=</span> <span class="bp">False</span>


<span class="kn">from</span> <span class="nn">tastypie.authentication</span> <span class="kn">import</span> <span class="n">SessionAuthentication</span>

<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">import</span> <span class="nn">inflection</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">import</span> <span class="nn">importlib</span>

<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">TemplateView</span>
<span class="kn">from</span> <span class="nn">django.views.decorators.csrf</span> <span class="kn">import</span> <span class="n">csrf_exempt</span>
<span class="kn">from</span> <span class="nn">django.utils.decorators</span> <span class="kn">import</span> <span class="n">method_decorator</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.forms</span> <span class="kn">import</span> <span class="n">PasswordResetForm</span><span class="p">,</span> <span class="n">loader</span><span class="p">,</span> <span class="n">get_current_site</span><span class="p">,</span> <span class="n">urlsafe_base64_encode</span><span class="p">,</span> <span class="n">force_bytes</span>

<span class="kn">from</span> <span class="nn">urllib</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">EmailMessage</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">Permission</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">django_hstore</span> <span class="kn">import</span> <span class="n">hstore</span>
<span class="c1">#!/usr/bin/python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span> <span class="n">ALL</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="n">url</span>
<span class="kn">from</span> <span class="nn">django.middleware</span> <span class="kn">import</span> <span class="n">csrf</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">tastypie.http</span> <span class="kn">import</span>  <span class="n">HttpConflict</span>
<span class="kn">from</span> <span class="nn">tastypie</span> <span class="kn">import</span> <span class="n">fields</span>
<span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">PinnedCustomField</span><span class="p">,</span> <span class="n">CustomFieldConfig</span>
<span class="kn">from</span> <span class="nn">cbh_core_api.serializers</span> <span class="kn">import</span> <span class="n">CustomFieldXLSSerializer</span>
<span class="kn">from</span> <span class="nn">tastypie.authorization</span>  <span class="kn">import</span> <span class="n">Authorization</span>
<span class="kn">from</span> <span class="nn">cbh_core_api.authorization</span> <span class="kn">import</span> <span class="n">ProjectListAuthorization</span><span class="p">,</span> <span class="n">ProjectAuthorization</span>
<span class="kn">from</span> <span class="nn">tastypie.authentication</span> <span class="kn">import</span> <span class="n">SessionAuthentication</span>
<span class="kn">from</span> <span class="nn">tastypie.paginator</span> <span class="kn">import</span> <span class="n">Paginator</span>
<span class="kn">from</span> <span class="nn">tastypie.exceptions</span> <span class="kn">import</span> <span class="n">ImmediateHttpResponse</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Prefetch</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">import</span> <span class="nn">six</span>
<span class="kn">from</span> <span class="nn">tastypie.serializers</span> <span class="kn">import</span> <span class="n">Serializer</span>
<span class="kn">from</span> <span class="nn">cbh_core_api.tasks</span> <span class="kn">import</span> <span class="n">remove_session_cached_projectlists</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>



<span class="k">def</span> <span class="nf">build_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends character encoding to the provided format if not already present.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s1">&#39;charset&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">format</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">; charset=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">UserHydrate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract class to make sure each </span>
<span class="sd">    resource object can hydrate the user object against it&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">hydrate_created_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="n">user</span>
        <span class="k">return</span> <span class="n">bundle</span>



<span class="k">class</span> <span class="nc">ChemRegDataPointProjectFieldResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Provides the schema information about a field that is required by front end apps&quot;&quot;&quot;</span>

    <span class="n">edit_form</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;an angular schema form element that can be used to edit this field &quot;</span><span class="p">)</span>
    <span class="n">edit_schema</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;an angular schema form schema that can be used to edit this field &quot;</span><span class="p">)</span>
    <span class="n">view_form</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;possibly deprecated or never used&quot;</span>
        <span class="p">)</span>
    <span class="n">handsontable</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A JSON object which is combined with the other fields on the system to make a handsontable columns object&quot;</span>
        <span class="p">)</span>
    

 
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">PinnedCustomField</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_chemreg_datapoint_fields&#39;</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>
        <span class="n">level</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;api_dispatch_detail&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Provides information about the data types present in the flexible schema of the datapoint table</span>
<span class="s1">For each field a set of attributes are returned:</span>

<span class="s1">edit_form /schema - an angular schema form element that can be used to edit this field </span>



<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span>

                       <span class="s1">&#39;api_dispatch_list&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Provides information about the data types present in the flexible schema of the datapoint table</span>
<span class="s1">For each field a set of attributes are returned:</span>

<span class="s1">edit_form /schema - an angular schema form element that can be used to edit this field </span>


<span class="s1">        &#39;&#39;&#39;</span>
         <span class="p">}</span>

    <span class="k">def</span> <span class="nf">dehydrate_handsontable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate the JSON object required by the handontable API&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="s2">&quot;custom_fields.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;knownBy&quot;</span> <span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;customFieldRenderer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;className&quot;</span> <span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
            <span class="s2">&quot;editable&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="c1"># flags the field as editable so edit links appear in it</span>
            <span class="s2">&quot;editor&quot;</span> <span class="p">:</span> <span class="bp">False</span>    <span class="c1"># ensures that the handsontable in cell editor is disabled</span>

        <span class="p">}</span>



    <span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles checking if the user is authenticated and dealing with</span>
<span class="sd">        unauthenticated users.</span>

<span class="sd">        Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">        ``Resource._meta``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Authenticate the request as needed.</span>
        <span class="k">return</span> <span class="bp">True</span>


    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cannot remember why the save function is &quot;re implemented&quot; here</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bundle</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>


        <span class="c1"># Save FKs just in case.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="c1"># Save the main object.</span>
        <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
       
        <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>

        <span class="c1"># Now pick up the M2M bits.</span>
        <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span>

    <span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a serialized form of the schema of the resource.</span>
<span class="sd">        Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">        to HTTP GET.</span>
<span class="sd">        Should return a HttpResponse (200 OK).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        deprecated</span>
<span class="sd">            Hook to return the dotted path to this field based on the level and the name of the field</span>
<span class="sd">            The level name is formatted in the dehydrate method of the DataFormConfigResource</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="s2">&quot;{level}.project_data.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_space_replaced_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_namespace_for_action_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">action_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;deprecated&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">action_type</span>


    <span class="k">def</span> <span class="nf">dehydrate_edit_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Return the part of the edit form related to this field -</span>
<span class="sd">        The edit forms will be combined on the front end see </span>
<span class="sd">        https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;form&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">data</span><span class="p">]}</span>

    <span class="k">def</span> <span class="nf">dehydrate_edit_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Return the part of the edit schema related to this field -</span>
<span class="sd">        The edit schemas will be combined on the front end see </span>
<span class="sd">        https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]}}</span>

    <span class="k">def</span> <span class="nf">dehydrate_view_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;possibly deprecated  &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;form&quot;</span> <span class="p">:</span> <span class="n">data</span><span class="p">}</span>





    <span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles checking of permissions to see if the user has authorization</span>
<span class="sd">        to PUT this resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles checking of permissions to see if the user has authorization</span>
<span class="sd">        to PUT this resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">ChemRegCustomFieldConfigResource</span><span class="p">(</span><span class="n">UserHydrate</span><span class="p">,</span> <span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;Return only the project type and custom field config name as returning the full field list would be &#39;&#39;&#39;</span>
    <span class="n">project_data_fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToManyField</span><span class="p">(</span><span class="n">ChemRegDataPointProjectFieldResource</span><span class="p">,</span> 
        <span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;pinned_custom_field&quot;</span><span class="p">,</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;List of the fields related to this cusotm field config, to be combined together to produce an edit schema&quot;</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span> <span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The user who added this object&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">object_class</span> <span class="o">=</span> <span class="n">CustomFieldConfig</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">CustomFieldConfig</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span>
            <span class="s2">&quot;created_by&quot;</span><span class="p">,)</span>
        <span class="n">excludes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;schemaform&quot;</span><span class="p">)</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_chemreg_custom_field_config&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">CustomFieldXLSSerializer</span><span class="p">()</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">ALL</span><span class="p">}</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">]</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;api_dispatch_detail&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>

<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span>

                       <span class="s1">&#39;api_dispatch_list&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>

<span class="s1">        &#39;&#39;&#39;</span>
                       <span class="p">}</span>


    <span class="k">def</span> <span class="nf">hydrate_project_data_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the position number to the related bundle&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_data_fields&quot;</span><span class="p">]):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;obj&#39;</span><span class="p">):</span>
                <span class="n">item</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">index</span>
        <span class="k">return</span> <span class="n">bundle</span>

    <span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a serialized form of the schema of the resource.</span>
<span class="sd">        Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">        to HTTP GET.</span>
<span class="sd">        Should return a HttpResponse (200 OK).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">        Mostly a useful shortcut/hook.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span>
            <span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span><span class="n">desired_format</span> <span class="o">==</span> <span class="s1">&#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;</span><span class="p">):</span>
            <span class="n">rc</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;attachment; filename=project_data_explanation.xlsx&#39;</span>
        <span class="k">return</span> <span class="n">rc</span>







<span class="k">class</span> <span class="nc">ChemregProjectResource</span><span class="p">(</span><span class="n">UserHydrate</span><span class="p">,</span> <span class="n">ModelResource</span><span class="p">):</span>

    <span class="n">project_type</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.ProjectTypeResource&quot;</span><span class="p">,</span> <span class="s1">&#39;project_type&#39;</span><span class="p">,</span>  <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A tag for the type of data this project stores&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ChemRegCustomFieldConfigResource</span><span class="p">,</span>
                                            <span class="s1">&#39;custom_field_config&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The single custom field config object attached to this project&quot;</span><span class="p">)</span>
    <span class="n">valid_cache_get_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="s1">&#39;project_key&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;schemaform&#39;</span><span class="p">]</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span> <span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The user who created this Project&quot;</span><span class="p">)</span>
    <span class="n">users_restricted_fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Possibly deprecated, was meant to list the restricted fields&quot;</span><span class="p">)</span>
    <span class="n">flowjs_upload_url</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The URL to be used when uploading data or attachments associated with this project&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>

        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">paginator_class</span> <span class="o">=</span> <span class="n">Paginator</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_projects&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">ProjectListAuthorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">()</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;project_key&#39;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
            <span class="s1">&#39;project_type&#39;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">always_return_data</span><span class="o">=</span><span class="bp">True</span>

    <span class="k">def</span> <span class="nf">dehydrate_flowjs_upload_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;flowv2_upload&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;project_id&#39;</span><span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="p">})</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>



    <span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the custom field config, any integrity errors from repeated names are passed up&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Request the list response and if asked to, use the cache</span>
<span class="sd">        Cache is invalidated each time a project anywhere on the system is updated by a signal in cbh_core_model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
            <span class="n">serialized</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">serialized</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)):</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">print</span> <span class="s2">&quot;from cache&quot;</span>
                <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                                <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        

    <span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>



    <span class="k">def</span> <span class="nf">patch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>




    <span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sort the projects by modified date descending by default&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span>
                     <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="n">Prefetch</span><span class="p">(</span><span class="s1">&#39;project_type&#39;</span>
                                                                              <span class="p">))</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-modified&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Here we append a list of tags to the data of the GET request if the</span>
<span class="sd">        search fields are required&#39;&#39;&#39;</span>

        <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                          <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
        <span class="n">bundle</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
        

        <span class="n">names_list</span> <span class="o">=</span> <span class="p">[]</span> 
        <span class="c1">#The tabular data schema is produced here as we have a list of the fields that the user has access to here</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="p">[</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1">#set up a restricted fields lookup for removing restricted fields from output</span>
        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;user_restricted_fieldnames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="p">:</span> <span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;users_restricted_fields&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]}</span>

        <span class="k">for</span> <span class="n">projbund</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">bund</span> <span class="ow">in</span> <span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_data_fields&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
                    <span class="c1">#The handsontable part is the same for each project</span>
                    <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">names_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
                    <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;projects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                
                    <span class="c1">#We have set up the app so there is one field per project so here we are just</span>
                    <span class="c1"># ensuring we know the field type, everything else can be looked up from </span>
                <span class="n">real_renderer_for_this_project</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;renderer_named&quot;</span><span class="p">]</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">][</span><span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;field_type&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="n">real_renderer_for_this_project</span> <span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">open_or_restricted</span><span class="p">}</span>

                <span class="k">del</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span>
                <span class="c1">#del bund.data[&quot;users_restricted_fields&quot;]</span>

        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;schema&quot;</span><span class="p">:</span>
                <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">names_list</span> <span class="o">+</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]}</span>

        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema</span>

        <span class="k">return</span> <span class="n">bundle</span>


    <span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Currently does not do all the things done by alter list data and perhaps better not to</span>
<span class="sd">        as this function is used to update a project </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                          <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">bundle</span><span class="p">,]}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
                          
        <span class="k">return</span> <span class="n">bundle</span>

   



    <span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">request</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span>
        <span class="o">**</span><span class="n">response_kwargs</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">        Mostly a useful shortcut/hook.</span>
<span class="sd">        Ensures that the cache is invalidated and re saved as appropriate</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>

        <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                            <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span>
                            <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">desired_format</span> \
                <span class="o">==</span> <span class="s1">&#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;</span><span class="p">:</span>
            <span class="n">rc</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> \
                <span class="s1">&#39;attachment; filename=project_data_explanation.xlsx&#39;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">response_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span> <span class="ow">and</span> <span class="n">response_class</span> <span class="o">==</span> <span class="n">HttpResponse</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
                    <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialized</span>
        <span class="k">if</span> <span class="n">response_class</span> <span class="ow">in</span> <span class="p">[</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="s2">&quot;projects_list_cache&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span>
            <span class="n">remove_session_cached_projectlists</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">rc</span>



<span class="k">class</span> <span class="nc">NoCustomFieldsChemregProjectResource</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class for use in related resources in cases where </span>
<span class="sd">    we do not want to save all or retrieve all of the custom fields such as when </span>
<span class="sd">    indexing the CBHCompoundBatch objects&quot;&quot;&quot;</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ChemRegCustomFieldConfigResource</span><span class="p">,</span>
                                            <span class="s1">&#39;custom_field_config&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="o">.</span><span class="n">Meta</span><span class="p">):</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_projects_nocfc&#39;</span>




<span class="k">class</span> <span class="nc">CBHNoSerializedDictField</span><span class="p">(</span><span class="n">fields</span><span class="o">.</span><span class="n">ApiField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A dictionary field.</span>
<span class="sd">    Convert is no longer needed, we cast the data into the elasticsearch format elsewhere</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dehydrated_type</span> <span class="o">=</span> <span class="s1">&#39;dict&#39;</span>
    <span class="n">help_text</span> <span class="o">=</span> <span class="s2">&quot;A dictionary of data. Ex: {&#39;price&#39;: 26.73, &#39;name&#39;: &#39;Daniel&#39;}&quot;</span>




<span class="k">class</span> <span class="nc">CSRFExemptMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;CSRF exception to ensure that the user can press the back button after logging in</span>
<span class="sd">    and get the expected result&quot;&quot;&quot;</span>
    <span class="nd">@method_decorator</span><span class="p">(</span><span class="n">csrf_exempt</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">CSRFExemptMixin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_field_name_from_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated function to get a new field name when indexing data&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot;__space__&quot;</span><span class="p">,</span> <span class="s2">u&quot; &quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_key_from_field_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated function to get a new field name when indexing data&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot; &quot;</span><span class="p">,</span> <span class="s2">u&quot;__space__&quot;</span><span class="p">)</span>




<span class="k">class</span> <span class="nc">SimpleResourceURIField</span><span class="p">(</span><span class="n">fields</span><span class="o">.</span><span class="n">ApiField</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provide just the id field as a resource URI</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dehydrated_type</span> <span class="o">=</span> <span class="s1">&#39;string&#39;</span>
    <span class="n">is_related</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">self_referential</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">help_text</span> <span class="o">=</span> <span class="s1">&#39;A related resource. Can be either a URI or set of nested resource data.&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">NOT_PROVIDED</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">unique</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">use_in</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Init method very similar to a realtedresource in tastypie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SimpleResourceURIField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="n">blank</span><span class="p">,</span>
                                                     <span class="n">readonly</span><span class="o">=</span><span class="n">readonly</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="n">unique</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">use_in</span><span class="o">=</span><span class="n">use_in</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_name</span> <span class="o">=</span> <span class="n">related_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">to</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rel_resources</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">==</span> <span class="s1">&#39;self&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">self_referential</span> <span class="o">=</span> <span class="bp">True</span>



    <span class="k">def</span> <span class="nf">contribute_to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        method very similar to a realtedresource in tastypie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SimpleResourceURIField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">contribute_to_class</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="c1"># Check if we&#39;re self-referential and hook it up.</span>
        <span class="c1"># We can&#39;t do this quite like Django because there&#39;s no ``AppCache``</span>
        <span class="c1"># here (which I think we should avoid as long as possible).</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_referential</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">==</span> <span class="s1">&#39;self&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="n">cls</span>

    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles conversion between the data found and the type of the field.</span>
<span class="sd">        Extending classes should override this method and provide correct</span>
<span class="sd">        data coercion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span>
        <span class="n">resource_uri</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">()</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">resource_uri</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes data stored in the bundle for the field and returns it. Used for</span>
<span class="sd">        taking simple data and building a instance object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_related</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="c1"># We&#39;ve got an FK (or alike field) &amp; a possible parent object.</span>
                <span class="c1"># Check for it.</span>
                <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span> <span class="ow">and</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_name</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">val</span>
                <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">):</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">()</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>

            <span class="k">raise</span> <span class="n">ApiFieldError</span><span class="p">(</span>
                <span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no data and doesn&#39;t allow a default or null value.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
        <span class="c1"># New code to rerturn URI</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
        
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         method very similar to a realtedresource in tastypie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># We need to be lazy here, because when the metaclass constructs the</span>
        <span class="c1"># Resources, other classes may not exist yet.</span>
        <span class="c1"># That said, memoize this so we never have to relookup/reimport.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span>

        <span class="c1"># It&#39;s a string. Let&#39;s figure it out.</span>
        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">:</span>
            <span class="c1"># Try to import.</span>
            <span class="n">module_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="n">module_path</span><span class="p">,</span> <span class="n">class_name</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">module_bits</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">module_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># We&#39;ve got a bare class name here, which won&#39;t work (No AppCache</span>
            <span class="c1"># to rely on). Try to throw a useful error.</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                <span class="s2">&quot;Tastypie requires a Python-style path (&lt;module.module.Class&gt;) to lazy load related resources. Only given &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;Module &#39;</span><span class="si">%s</span><span class="s2">&#39; does not appear to have a class called &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">module_path</span><span class="p">,</span> <span class="n">class_name</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span>




<span class="k">class</span> <span class="nc">Index</span><span class="p">(</span><span class="n">TemplateView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serves the static template from the angularjs folder (the dist folder is the location that grunt build puts the production artifact</span>
<span class="sd">    We then copy this dist folder across with collectstatic by declaring it in the list of static folders</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">template_name</span> <span class="o">=</span> <span class="s1">&#39;dist/index.html&#39;</span>  <span class="c1"># or define get_template_names()</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that the csrf token is always set in the cookie when rendering&quot;&quot;&quot;</span>
        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>



<span class="c1">#-------------------------------------------------------------------------</span>

<span class="k">class</span> <span class="nc">ProjectPermissionResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows updating of user permissions - project owners can change who views, edits and owns their project</span>
<span class="sd">    Data is retrieved using the codename of the </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToManyField</span><span class="p">(</span><span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span><span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;user_set&quot;</span><span class="p">)</span>
    <span class="c1"># groups = fields.ToManyField(GroupResource, attribute=&quot;group_set&quot;)</span>
    <span class="n">codename</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;codename&gt;[\w\d_.-]+)/$&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_permissions&#39;</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="s2">&quot;put&quot;</span><span class="p">]</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">ProjectPermissionAuthorization</span><span class="p">()</span>
        <span class="n">detail_uri_name</span> <span class="o">=</span> <span class="s1">&#39;codename&#39;</span>



    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that the m2m bundle is hydrated before continuing as this is needed for the authorization&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bundle</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
        <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="c1"># Check if they&#39;re authorized.</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">m2m_bundle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">m2m_bundle</span><span class="p">)</span>

        <span class="c1"># Save FKs just in case.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="c1"># Save the main object.</span>
        <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>

        <span class="c1"># Now pick up the M2M bits.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span>


<span class="c1">#-------------------------------------------------------------------------</span>



<span class="k">class</span> <span class="nc">Login</span><span class="p">(</span> <span class="n">CSRFExemptMixin</span><span class="p">,</span> <span class="n">FormView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Login FormView using the standard locations for login templates in django</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">AuthenticationForm</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;cbh_chem_api/login.html&quot;</span>
    <span class="n">logout</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensure that the webauth is setup if required </span>
<span class="sd">        Set the CSRF cookie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span>
            <span class="n">form</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">()))</span>
        <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>

        <span class="k">if</span> <span class="s2">&quot;django_webauth&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;webauth_login&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;REMOTE_USER&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span><span class="p">:</span>
                <span class="c1"># Here we check if this was a redirect after logout in which</span>
                <span class="c1"># case we show the button to log out of webauth entirely</span>
                <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;HTTP_X_WEBAUTH_USER&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">username</span><span class="p">:</span>
                <span class="n">context</span><span class="p">[</span><span class="s2">&quot;logout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;password_login&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles POST requests, instantiating a form instance with the passed</span>
<span class="sd">        POST variables and then checked for validity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>
        <span class="sd">&#39;&#39;&#39;Borrowed from django base detail view&#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="c1">#The user has pressed back in their browser and therefore should be redirected</span>
            <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>
        <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_invalid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove test cookies as required&quot;&quot;&quot;</span>
        <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>

        <span class="n">auth_login</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">form</span><span class="o">.</span><span class="n">get_user</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">test_cookie_worked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete_test_cookie</span><span class="p">()</span>
        <span class="c1"># return self.render_to_response(self.get_context_data())</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">form_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Send the form back again if invalid with errors&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">))</span>



<span class="k">class</span> <span class="nc">Logout</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logout view to just redirect to the login page&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">auth_logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">LOGOUT_REDIRECT_URL</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">build_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends character encoding to the provided format if not already present.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;charset&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">format</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">; charset=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>




<span class="k">class</span> <span class="nc">SkinningResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;URL resourcing for pulling out sitewide skinning config </span>
<span class="sd">    Including the schemat for use on the search page</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">tabular_data_schema</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">{},</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty dictionary, filled on the client side with the tabular data information in order to render handsontable&quot;</span><span class="p">)</span>
    <span class="n">query_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form schema and form used to render the search forms in ChemBio Hub Platform&quot;</span><span class="p">)</span>
    <span class="n">chem_query_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The chemical angular schema form for chemical search&quot;</span><span class="p">)</span>
    <span class="n">sort_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form json schema used for sorting fields&quot;</span><span class="p">)</span>
    <span class="n">hide_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form json schema used for hiding fields&quot;</span><span class="p">)</span>
    <span class="n">savedsearch_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form json schema used for the saved search feature&quot;</span><span class="p">)</span>
    <span class="n">filters_applied</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the filters currently active on the dataset&quot;</span><span class="p">)</span>
    <span class="n">sorts_applied</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the sorts currently active on the dataset&quot;</span><span class="p">)</span>
    <span class="n">hides_applied</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the hidden fields on the dataset&quot;</span><span class="p">)</span>

    <span class="n">filters_objects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the columns which are currently filtered&quot;</span><span class="p">)</span>
    <span class="n">sort_objects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the columns which are currently sorted&quot;</span><span class="p">)</span>
    <span class="n">hide_objects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the columns which are currently hidden&quot;</span><span class="p">)</span>
    <span class="n">field_type_choices</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;List of the fields types which the user must pick from when creating a project&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">SkinningConfig</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_skinning&#39;</span>
        <span class="c1">#authorization = Authorization()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">dehydrate_savedsearch_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema which is used when saving a search from the settings&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">SAVED_SEARCH_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_query_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the search form angular schema form json schema from the settings&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_QUERY_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_hide_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to hide a field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_HIDE_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_sort_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to sort a field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_SORT_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_chem_query_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to run chemical search&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_CHEMICAL_QUERY_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_field_type_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the field type choices from the models file which are used when adding a project</span>
<span class="sd">        todo consider moving project schemaform to the back end&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">PinnedCustomField</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>



<span class="k">class</span> <span class="nc">TemplateProjectFieldResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Provides the schema information about a field that is required by front end apps&quot;&quot;&quot;</span>
 
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;cbh_core_model&quot;</span><span class="p">,</span><span class="s2">&quot;PinnedCustomField&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_template_fields&#39;</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">dehydrate_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>



<span class="k">def</span> <span class="nf">get_field_list</span><span class="p">(</span><span class="n">project_type_bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a project type object bundle return a project template </span>
<span class="sd">    The project template is then used in the project adding form when the user clicks on that project type.</span>
<span class="sd">    The default project template is a single empty text field&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">saved_search_project_type</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">SAVED_SEARCH_TEMPLATE</span>
    <span class="k">elif</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">plate_map_project_type</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">PLATE_MAP_TEMPLATE</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">project_type_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config_template&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span>  <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config_template&quot;</span><span class="p">]:</span>
            <span class="n">field</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config_template&quot;</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">DEFAULT_TEMPLATE</span>

<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;May be a merge error need to lookj into this todo&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">custom_field_config_template_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;cbh_core_model&quot;</span><span class="p">,</span><span class="s2">&quot;PinnedCustomField&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">custom_field_config_id</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">custom_field_config_template_id</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ProjectTypeResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Resource for Project Type, specifies whether this is a chemical/inventory instance etc &#39;&#39;&#39;</span>
    <span class="n">copy_action_name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Clone&quot;</span><span class="p">,</span> 
                                        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The name for how the user clones the object changes dependent on the project type, this name comes from the back end and is used in front end buttons&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config_template</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToManyField</span><span class="p">(</span><span class="s2">&quot;cbh_core_api.resources.TemplateProjectFieldResource&quot;</span><span class="p">,</span> 
        <span class="n">attribute</span><span class="o">=</span><span class="k">lambda</span> <span class="n">bundle</span><span class="p">:</span> <span class="n">get_fields</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span> <span class="p">,</span>  
        <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
        <span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Template set of fields for the projects that use this project type. Acts like a class inheritance&quot;</span><span class="p">)</span>
    <span class="n">project_template</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">{},</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Full project template&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Based on the custom field config template, generate a project template that can be used in the front end&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">bun</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]:</span>
            <span class="n">bun</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_template&quot;</span><span class="p">]</span> <span class="o">=</span>  <span class="p">{</span>
                <span class="s2">&quot;project_type&quot;</span><span class="p">:</span> <span class="n">bun</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;resource_uri&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;custom_field_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;project_data_fields&quot;</span><span class="p">:</span> <span class="n">get_field_list</span><span class="p">(</span><span class="n">bun</span><span class="p">),</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">}</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">dehydrate_copy_action_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the copy action name for the buttons based on the project type&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">show_compounds</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clone /&lt;br/&gt; Add Structure&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clone Item&quot;</span>



    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Setup for the project type resource. Be aware that anyone can currently update project types but we do not enable this feature in the front end&quot;&quot;&quot;</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">ProjectType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_project_types&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;saved_search_project_type&quot;</span><span class="p">:</span> <span class="n">ALL</span><span class="p">,</span>
            <span class="s2">&quot;plate_map_project_type&quot;</span><span class="p">:</span> <span class="n">ALL</span>
        <span class="p">}</span>



<span class="k">class</span> <span class="nc">MyPasswordResetForm</span><span class="p">(</span><span class="n">PasswordResetForm</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Password reset form used both for password resets and for users who have just been invited and need to set a password&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_override</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">subject_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_subject.txt&#39;</span><span class="p">,</span>
             <span class="n">email_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_email.html&#39;</span><span class="p">,</span>
             <span class="n">use_https</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">token_generator</span><span class="o">=</span><span class="n">default_token_generator</span><span class="p">,</span>
             <span class="n">from_email</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">html_email_template_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">extra_email_context</span><span class="o">=</span><span class="p">{},</span> <span class="n">user</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a one-use only link for resetting password and sends to the</span>
<span class="sd">        user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">send_mail</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span>
 
        <span class="k">if</span> <span class="ow">not</span> <span class="n">domain_override</span><span class="p">:</span>
            <span class="c1">#The sites framework does not necessarily give the correct URL of the deployed system so we get it from the request instead</span>
            <span class="n">current_site</span> <span class="o">=</span> <span class="n">get_current_site</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="n">site_name</span> <span class="o">=</span> <span class="n">current_site</span><span class="o">.</span><span class="n">name</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">current_site</span><span class="o">.</span><span class="n">domain</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">site_name</span> <span class="o">=</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">domain_override</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
            <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">domain</span><span class="p">,</span>
            <span class="s1">&#39;site_name&#39;</span><span class="p">:</span> <span class="n">site_name</span><span class="p">,</span>
            <span class="s1">&#39;uid&#39;</span><span class="p">:</span> <span class="n">urlsafe_base64_encode</span><span class="p">(</span><span class="n">force_bytes</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)),</span>
            <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
            <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">token_generator</span><span class="o">.</span><span class="n">make_token</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
            <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;https&#39;</span> <span class="k">if</span> <span class="n">use_https</span> <span class="k">else</span> <span class="s1">&#39;http&#39;</span><span class="p">,</span>
            <span class="s1">&#39;extra&#39;</span> <span class="p">:</span> <span class="n">extra_email_context</span><span class="p">,</span>

        <span class="p">}</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">subject_template_name</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="c1"># Email subject *must not* contain newlines</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">subject</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
        <span class="n">html_email</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">email_template_name</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_email</span><span class="p">)</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>

        
        <span class="n">send_mail</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">from_email</span><span class="p">,</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span> <span class="n">html_message</span><span class="o">=</span><span class="n">html_email</span><span class="p">,</span> <span class="n">fail_silently</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

 

<span class="k">class</span> <span class="nc">InvitationResource</span><span class="p">(</span><span class="n">UserHydrate</span><span class="p">,</span> <span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Resource for Invitation model. This will setup creation of the invite email and new user &#39;&#39;&#39;</span>

    <span class="n">created_by</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span> <span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;creator of the invitation&quot;</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Invitation</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;invitations&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">InviteAuthorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span>
        <span class="p">}</span>





    <span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">new_user</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">email_template_name</span><span class="p">,</span> <span class="n">subject_template_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the data from the invitation form (results in an email being sent)&quot;&quot;&quot;</span>
        <span class="n">server</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">SERVER_EMAIL</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">MyPasswordResetForm</span><span class="p">(</span><span class="n">QueryDict</span><span class="p">(</span><span class="n">urlencode</span><span class="p">({</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">email</span><span class="p">})))</span>
        <span class="n">hostname</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s2">&quot;HTTP_ORIGIN&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">form</span><span class="o">.</span><span class="n">users_cache</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_user</span><span class="p">,]</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;use_https&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">is_secure</span><span class="p">(),</span>
                <span class="s1">&#39;token_generator&#39;</span><span class="p">:</span> <span class="n">default_token_generator</span><span class="p">,</span>
                <span class="s1">&#39;from_email&#39;</span><span class="p">:</span> <span class="n">server</span><span class="p">,</span>
                <span class="s1">&#39;user&#39;</span> <span class="p">:</span> <span class="n">new_user</span><span class="p">,</span>
                <span class="s1">&#39;email_template_name&#39;</span><span class="p">:</span> <span class="n">email_template_name</span><span class="p">,</span>
                <span class="s1">&#39;subject_template_name&#39;</span><span class="p">:</span> <span class="n">subject_template_name</span><span class="p">,</span>
                <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
                <span class="s1">&#39;extra_email_context&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hostname&#39;</span><span class="p">:</span><span class="n">hostname</span><span class="p">,</span> <span class="s1">&#39;invite&#39;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;login_url&#39;</span> <span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_URL</span><span class="p">,</span> <span class="p">},</span>
            <span class="p">}</span>
            <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Email not valid&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">        Mostly a useful shortcut/hook.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
       

        <span class="k">if</span> <span class="n">response_class</span> <span class="o">==</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">:</span>     
            <span class="n">email</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ox.ac.uk&quot;</span><span class="p">):</span>
                <span class="c1">#send via webauth</span>
                <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;We do not yet support inviting users at Oxford to projects. This feature will come soon.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="n">UserObj</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
                <span class="n">new_user</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">UserObj</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">email</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;projects_selected&quot;</span><span class="p">]:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">perm</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
                    <span class="n">p</span><span class="o">.</span><span class="n">make_viewer</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
                    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Invite sent successfully to </span><span class="si">%s</span><span class="s2">, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_new_user.html&#39;</span>
                <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_new_user.html&#39;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span>
                    <span class="n">projects_with_reader_access</span> <span class="o">=</span> <span class="n">viewer_projects</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
                    <span class="n">all_projects_equal</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="n">all_selected_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">new_proj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">new_proj</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;projects_selected&quot;</span><span class="p">]])</span>
                    <span class="n">new_ids</span> <span class="o">=</span> <span class="n">all_selected_ids</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">projects_with_reader_access</span><span class="p">)</span>
                    
                    <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_project_access_changed.html&#39;</span>
                        <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_project_access_changed.html&#39;</span>
                        <span class="n">all_projects_equal</span> <span class="o">=</span> <span class="bp">False</span>
                        <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Existing user </span><span class="si">%s</span><span class="s2"> invited to new projects, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;remind&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s1">&#39;{&quot;error&quot;: &quot;User already exists, do you wish to invite again?&quot;}&#39;</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">new_user</span><span class="o">.</span><span class="n">has_usable_password</span><span class="p">():</span>
                            <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_reminder.html&#39;</span>
                            <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_reminder.html&#39;</span>
                            <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Sign-up reminder sent to </span><span class="si">%s</span><span class="s2">, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_reminder_already_logged_on.html&#39;</span>
                            <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_reminder.html&#39;</span>
                            <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;User </span><span class="si">%s</span><span class="s2"> reminded to look at these projects, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span> <span class="n">email</span><span class="p">,</span> <span class="n">new_user</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">email_template_name</span><span class="p">,</span> <span class="n">subject_template_name</span><span class="p">)</span>         

        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span>
            <span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>       
        <span class="k">return</span> <span class="n">rc</span>



<span class="k">class</span> <span class="nc">UserResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Displays information about the User&#39;s privileges and personal data&#39;&#39;&#39;</span>
    <span class="n">can_view_chemreg</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the user has chemireg enabled deprecated&quot;</span><span class="p">)</span>
    <span class="n">can_view_assayreg</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the user has assayreg enabled deprecated&quot;</span><span class="p">)</span>
    <span class="n">is_logged_in</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this user in the list is the logged in user&quot;</span><span class="p">)</span>
    <span class="n">can_create_and_own_projects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this user is allowed to create or own projects&quot;</span><span class="p">)</span>
    <span class="n">display_name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;How we want the name of this user to be displayed on the front end&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;users&#39;</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">]</span>
        <span class="n">excludes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;is_active&#39;</span><span class="p">]</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;probably deprecated&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">object_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        deprecated override</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">UserResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">dehydrate_display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;How we want the username or first and last name to be displayed on the system&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">username</span>

    <span class="k">def</span> <span class="nf">dehydrate_can_create_and_own_projects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal users (denoted by their email pattern match) are allowed to add and own projects&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;cbh_core_model.add_project&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>


    <span class="k">def</span> <span class="nf">dehydrate_is_logged_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Whether the user is logged in</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">dehydrate_can_view_chemreg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;The cbh_core_model.no_chemreg role in the Django admin is used to</span>
<span class="sd">        deny access to chemreg. As superusers have all permissions  by </span>
<span class="sd">        default they would be denied access therefore we check for superuser status and allow access&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;cbh_core_model.no_chemreg&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">dehydrate_can_view_assayreg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;The cbh_core_model.no_assayreg role in the Django admin is used to</span>
<span class="sd">        deny access to assayreg. As superusers have all permissions  by </span>
<span class="sd">        default they would be denied access therefore we check for superuser status and allow access&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;cbh_core_model.no_assayreg&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>



<span class="k">def</span> <span class="nf">chunk_upload_to</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save chunk to the right path and filename based in is number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FLOWJS_PATH</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">remove_expired_files</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove non completed uploads</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">FlowFile</span>
    <span class="n">FlowFile</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">state__in</span><span class="o">=</span><span class="p">[</span><span class="n">FlowFile</span><span class="o">.</span><span class="n">STATE_UPLOADING</span><span class="p">,</span> <span class="n">FlowFile</span><span class="o">.</span><span class="n">STATE_UPLOAD_ERROR</span><span class="p">],</span>
        <span class="n">updated__lte</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">FLOWJS_EXPIRATION_DAYS</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="cbh_core_api.resources.ALL" class="name">var <span class="ident">ALL</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.ALL_WITH_RELATIONS" class="name">var <span class="ident">ALL_WITH_RELATIONS</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.FLOWJS_EXPIRATION_DAYS" class="name">var <span class="ident">FLOWJS_EXPIRATION_DAYS</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.FLOWJS_PATH" class="name">var <span class="ident">FLOWJS_PATH</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.WS_DEBUG" class="name">var <span class="ident">WS_DEBUG</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.handler400" class="name">var <span class="ident">handler400</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.handler403" class="name">var <span class="ident">handler403</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.handler404" class="name">var <span class="ident">handler404</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.handler500" class="name">var <span class="ident">handler500</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_api.resources.logger" class="name">var <span class="ident">logger</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.build_content_type">
    <p>def <span class="ident">build_content_type</span>(</p><p>format, encoding=&#39;utf-8&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Appends character encoding to the provided format if not already present.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.build_content_type', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.build_content_type" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_content_type</span><span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Appends character encoding to the provided format if not already present.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;charset&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">format</span>

    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">; charset=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">format</span><span class="p">,</span> <span class="n">encoding</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.chunk_upload_to">
    <p>def <span class="ident">chunk_upload_to</span>(</p><p>instance, filename)</p>
    </div>
    

    
  
    <div class="desc"><p>Save chunk to the right path and filename based in is number</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.chunk_upload_to', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.chunk_upload_to" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">chunk_upload_to</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save chunk to the right path and filename based in is number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FLOWJS_PATH</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.get_field_list">
    <p>def <span class="ident">get_field_list</span>(</p><p>project_type_bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a project type object bundle return a project template 
The project template is then used in the project adding form when the user clicks on that project type.
The default project template is a single empty text field</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.get_field_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.get_field_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_field_list</span><span class="p">(</span><span class="n">project_type_bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a project type object bundle return a project template </span>
<span class="sd">    The project template is then used in the project adding form when the user clicks on that project type.</span>
<span class="sd">    The default project template is a single empty text field&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">saved_search_project_type</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">SAVED_SEARCH_TEMPLATE</span>
    <span class="k">elif</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">plate_map_project_type</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">PLATE_MAP_TEMPLATE</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">project_type_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config_template&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span>  <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config_template&quot;</span><span class="p">]:</span>
            <span class="n">field</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">data</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config_template&quot;</span><span class="p">]]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">project_type_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">DEFAULT_TEMPLATE</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.get_field_name_from_key">
    <p>def <span class="ident">get_field_name_from_key</span>(</p><p>key)</p>
    </div>
    

    
  
    <div class="desc"><p>Possibly deprecated function to get a new field name when indexing data</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.get_field_name_from_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.get_field_name_from_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_field_name_from_key</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated function to get a new field name when indexing data&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot;__space__&quot;</span><span class="p">,</span> <span class="s2">u&quot; &quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>May be a merge error need to lookj into this todo</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;May be a merge error need to lookj into this todo&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">custom_field_config_template_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">return</span> <span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;cbh_core_model&quot;</span><span class="p">,</span><span class="s2">&quot;PinnedCustomField&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">custom_field_config_id</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">custom_field_config_template_id</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.get_key_from_field_name">
    <p>def <span class="ident">get_key_from_field_name</span>(</p><p>name)</p>
    </div>
    

    
  
    <div class="desc"><p>Possibly deprecated function to get a new field name when indexing data</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.get_key_from_field_name', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.get_key_from_field_name" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_key_from_field_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated function to get a new field name when indexing data&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot; &quot;</span><span class="p">,</span> <span class="s2">u&quot;__space__&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.remove_expired_files">
    <p>def <span class="ident">remove_expired_files</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove non completed uploads</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.remove_expired_files', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.remove_expired_files" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_expired_files</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove non completed uploads</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">cbh_core_model.models</span> <span class="kn">import</span> <span class="n">FlowFile</span>
    <span class="n">FlowFile</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">state__in</span><span class="o">=</span><span class="p">[</span><span class="n">FlowFile</span><span class="o">.</span><span class="n">STATE_UPLOADING</span><span class="p">,</span> <span class="n">FlowFile</span><span class="o">.</span><span class="n">STATE_UPLOAD_ERROR</span><span class="p">],</span>
        <span class="n">updated__lte</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">FLOWJS_EXPIRATION_DAYS</span><span class="p">)</span>
    <span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="cbh_core_api.resources.CBHNoSerializedDictField" class="name">class <span class="ident">CBHNoSerializedDictField</span></p>
      
  
    <div class="desc"><p>A dictionary field.
Convert is no longer needed, we cast the data into the elasticsearch format elsewhere</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CBHNoSerializedDictField', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CBHNoSerializedDictField" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CBHNoSerializedDictField</span><span class="p">(</span><span class="n">fields</span><span class="o">.</span><span class="n">ApiField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A dictionary field.</span>
<span class="sd">    Convert is no longer needed, we cast the data into the elasticsearch format elsewhere</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dehydrated_type</span> <span class="o">=</span> <span class="s1">&#39;dict&#39;</span>
    <span class="n">help_text</span> <span class="o">=</span> <span class="s2">&quot;A dictionary of data. Ex: {&#39;price&#39;: 26.73, &#39;name&#39;: &#39;Daniel&#39;}&quot;</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.CBHNoSerializedDictField">CBHNoSerializedDictField</a></li>
          <li>tastypie.fields.ApiField</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.CBHNoSerializedDictField.dehydrated_type" class="name">var <span class="ident">dehydrated_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.CBHNoSerializedDictField.help_text" class="name">var <span class="ident">help_text</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.CBHNoSerializedDictField.is_m2m" class="name">var <span class="ident">is_m2m</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.CBHNoSerializedDictField.is_related" class="name">var <span class="ident">is_related</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.CBHNoSerializedDictField.default" class="name">var <span class="ident">default</span></p>
            

            
  
    <div class="desc"><p>Returns the default value for the field.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.CBHNoSerializedDictField.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, attribute=None, default=&lt;class tastypie.fields.NOT_PROVIDED at 0x7f4035f88ae0&gt;, null=False, blank=False, readonly=False, unique=False, help_text=None, use_in=u&#39;all&#39;, verbose_name=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Sets up the field. This is generally called when the containing
<code>Resource</code> is initialized.</p>
<p>Optionally accepts an <code>attribute</code>, which should be a string of
either an instance attribute or callable off the object during the
<code>dehydrate</code> or push data onto an object during the <code>hydrate</code>.
Defaults to <code>None</code>, meaning data will be manually accessed.</p>
<p>Optionally accepts a <code>default</code>, which provides default data when the
object being <code>dehydrated</code>/<code>hydrated</code> has no data on the field.
Defaults to <code>NOT_PROVIDED</code>.</p>
<p>Optionally accepts a <code>null</code>, which indicated whether or not a
<code>None</code> is allowable data on the field. Defaults to <code>False</code>.</p>
<p>Optionally accepts a <code>blank</code>, which indicated whether or not
data may be omitted on the field. Defaults to <code>False</code>.</p>
<p>Optionally accepts a <code>readonly</code>, which indicates whether the field
is used during the <code>hydrate</code> or not. Defaults to <code>False</code>.</p>
<p>Optionally accepts a <code>unique</code>, which indicates if the field is a
unique identifier for the object.</p>
<p>Optionally accepts <code>help_text</code>, which lets you provide a
human-readable description of the field exposed at the schema level.
Defaults to the per-Field definition.</p>
<p>Optionally accepts <code>use_in</code>. This may be one of <code>list</code>, <code>detail</code>
<code>all</code> or a callable which accepts a <code>bundle</code> and returns
<code>True</code> or <code>False</code>. Indicates wheather this field will be included
during dehydration of a list of objects or a single object. If <code>use_in</code>
is a callable, and returns <code>True</code>, the field will be included during
dehydration.
Defaults to <code>all</code>.</p>
<p>Optionally accepts <code>verbose_name</code>, which lets you provide a
more verbose name of the field exposed at the schema level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CBHNoSerializedDictField.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CBHNoSerializedDictField.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attribute</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">NOT_PROVIDED</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">use_in</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">verbose_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets up the field. This is generally called when the containing</span>
<span class="sd">    ``Resource`` is initialized.</span>
<span class="sd">    Optionally accepts an ``attribute``, which should be a string of</span>
<span class="sd">    either an instance attribute or callable off the object during the</span>
<span class="sd">    ``dehydrate`` or push data onto an object during the ``hydrate``.</span>
<span class="sd">    Defaults to ``None``, meaning data will be manually accessed.</span>
<span class="sd">    Optionally accepts a ``default``, which provides default data when the</span>
<span class="sd">    object being ``dehydrated``/``hydrated`` has no data on the field.</span>
<span class="sd">    Defaults to ``NOT_PROVIDED``.</span>
<span class="sd">    Optionally accepts a ``null``, which indicated whether or not a</span>
<span class="sd">    ``None`` is allowable data on the field. Defaults to ``False``.</span>
<span class="sd">    Optionally accepts a ``blank``, which indicated whether or not</span>
<span class="sd">    data may be omitted on the field. Defaults to ``False``.</span>
<span class="sd">    Optionally accepts a ``readonly``, which indicates whether the field</span>
<span class="sd">    is used during the ``hydrate`` or not. Defaults to ``False``.</span>
<span class="sd">    Optionally accepts a ``unique``, which indicates if the field is a</span>
<span class="sd">    unique identifier for the object.</span>
<span class="sd">    Optionally accepts ``help_text``, which lets you provide a</span>
<span class="sd">    human-readable description of the field exposed at the schema level.</span>
<span class="sd">    Defaults to the per-Field definition.</span>
<span class="sd">    Optionally accepts ``use_in``. This may be one of ``list``, ``detail``</span>
<span class="sd">    ``all`` or a callable which accepts a ``bundle`` and returns</span>
<span class="sd">    ``True`` or ``False``. Indicates wheather this field will be included</span>
<span class="sd">    during dehydration of a list of objects or a single object. If ``use_in``</span>
<span class="sd">    is a callable, and returns ``True``, the field will be included during</span>
<span class="sd">    dehydration.</span>
<span class="sd">    Defaults to ``all``.</span>
<span class="sd">    Optionally accepts ``verbose_name``, which lets you provide a</span>
<span class="sd">    more verbose name of the field exposed at the schema level.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Track what the index thinks this field is called.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_resource</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span> <span class="o">=</span> <span class="n">attribute</span>
    <span class="c1"># Check for `__` in the field for looking through the relation.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">attribute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">)</span> <span class="k">else</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_default</span> <span class="o">=</span> <span class="n">default</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">null</span> <span class="o">=</span> <span class="n">null</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">blank</span> <span class="o">=</span> <span class="n">blank</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">readonly</span> <span class="o">=</span> <span class="n">readonly</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unique</span> <span class="o">=</span> <span class="n">unique</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">use_in</span> <span class="o">=</span> <span class="s1">&#39;all&#39;</span>
    <span class="k">if</span> <span class="n">use_in</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="nb">callable</span><span class="p">(</span><span class="n">use_in</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">use_in</span> <span class="o">=</span> <span class="n">use_in</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">verbose_name</span> <span class="o">=</span> <span class="n">verbose_name</span>
    <span class="k">if</span> <span class="n">help_text</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">help_text</span> <span class="o">=</span> <span class="n">help_text</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.CBHNoSerializedDictField.contribute_to_class">
    <p>def <span class="ident">contribute_to_class</span>(</p><p>self, cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CBHNoSerializedDictField.contribute_to_class', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CBHNoSerializedDictField.contribute_to_class" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">contribute_to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="c1"># Do the least we can here so that we don&#39;t hate ourselves in the</span>
    <span class="c1"># morning.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_resource</span> <span class="o">=</span> <span class="n">cls</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.CBHNoSerializedDictField.convert">
    <p>def <span class="ident">convert</span>(</p><p>self, value)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles conversion between the data found and the type of the field.</p>
<p>Extending classes should override this method and provide correct
data coercion.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CBHNoSerializedDictField.convert', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CBHNoSerializedDictField.convert" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles conversion between the data found and the type of the field.</span>
<span class="sd">    Extending classes should override this method and provide correct</span>
<span class="sd">    data coercion.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.CBHNoSerializedDictField.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle, for_list=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Takes data from the provided object and prepares it for the
resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CBHNoSerializedDictField.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CBHNoSerializedDictField.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes data from the provided object and prepares it for the</span>
<span class="sd">    resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">current_object</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">:</span>
            <span class="n">previous_object</span> <span class="o">=</span> <span class="n">current_object</span>
            <span class="n">current_object</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">current_object</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
                    <span class="n">current_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
                    <span class="c1"># Fall out of the loop, given any further attempts at</span>
                    <span class="c1"># accesses will fail miserably.</span>
                    <span class="k">break</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                    <span class="n">current_object</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="c1"># Fall out of the loop, given any further attempts at</span>
                    <span class="c1"># accesses will fail miserably.</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ApiFieldError</span><span class="p">(</span><span class="s2">&quot;The object &#39;</span><span class="si">%r</span><span class="s2">&#39; has an empty attribute &#39;</span><span class="si">%s</span><span class="s2">&#39; and doesn&#39;t allow a default or null value.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">previous_object</span><span class="p">,</span> <span class="n">attr</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">current_object</span><span class="p">):</span>
            <span class="n">current_object</span> <span class="o">=</span> <span class="n">current_object</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">current_object</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.CBHNoSerializedDictField.has_default">
    <p>def <span class="ident">has_default</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a boolean of whether this field has a default value.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CBHNoSerializedDictField.has_default', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CBHNoSerializedDictField.has_default" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a boolean of whether this field has a default value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOT_PROVIDED</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.CBHNoSerializedDictField.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Takes data stored in the bundle for the field and returns it. Used for
taking simple data and building a instance object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CBHNoSerializedDictField.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CBHNoSerializedDictField.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes data stored in the bundle for the field and returns it. Used for</span>
<span class="sd">    taking simple data and building a instance object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_related</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="c1"># We&#39;ve got an FK (or alike field) &amp; a possible parent object.</span>
            <span class="c1"># Check for it.</span>
            <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span> <span class="ow">and</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_name</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">val</span>
            <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">raise</span> <span class="n">ApiFieldError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no data and doesn&#39;t allow a default or null value.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.CSRFExemptMixin" class="name">class <span class="ident">CSRFExemptMixin</span></p>
      
  
    <div class="desc"><p>CSRF exception to ensure that the user can press the back button after logging in
and get the expected result</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CSRFExemptMixin', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CSRFExemptMixin" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CSRFExemptMixin</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;CSRF exception to ensure that the user can press the back button after logging in</span>
<span class="sd">    and get the expected result&quot;&quot;&quot;</span>
    <span class="nd">@method_decorator</span><span class="p">(</span><span class="n">csrf_exempt</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">CSRFExemptMixin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.CSRFExemptMixin">CSRFExemptMixin</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.CSRFExemptMixin.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.CSRFExemptMixin.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.CSRFExemptMixin.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nd">@decorate</span>
    <span class="k">def</span> <span class="nf">bound_func</span><span class="p">(</span><span class="o">*</span><span class="n">args2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">func</span><span class="o">.</span><span class="n">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))(</span><span class="o">*</span><span class="n">args2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs2</span><span class="p">)</span>
    <span class="c1"># bound_func has the signature that &#39;decorator&#39; expects i.e.  no</span>
    <span class="c1"># &#39;self&#39; argument, but it is a closure over self so it can call</span>
    <span class="c1"># &#39;func&#39; correctly.</span>
    <span class="k">return</span> <span class="n">bound_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.ChemRegCustomFieldConfigResource" class="name">class <span class="ident">ChemRegCustomFieldConfigResource</span></p>
      
  
    <div class="desc"><p>Return only the project type and custom field config name as returning the full field list would be</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ChemRegCustomFieldConfigResource</span><span class="p">(</span><span class="n">UserHydrate</span><span class="p">,</span> <span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;Return only the project type and custom field config name as returning the full field list would be &#39;&#39;&#39;</span>
    <span class="n">project_data_fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToManyField</span><span class="p">(</span><span class="n">ChemRegDataPointProjectFieldResource</span><span class="p">,</span> 
        <span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;pinned_custom_field&quot;</span><span class="p">,</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;List of the fields related to this cusotm field config, to be combined together to produce an edit schema&quot;</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span> <span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The user who added this object&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">object_class</span> <span class="o">=</span> <span class="n">CustomFieldConfig</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">CustomFieldConfig</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">select_related</span><span class="p">(</span>
            <span class="s2">&quot;created_by&quot;</span><span class="p">,)</span>
        <span class="n">excludes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;schemaform&quot;</span><span class="p">)</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_chemreg_custom_field_config&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">CustomFieldXLSSerializer</span><span class="p">()</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">ALL</span><span class="p">}</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">]</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;api_dispatch_detail&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>

<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span>

                       <span class="s1">&#39;api_dispatch_list&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>

<span class="s1">        &#39;&#39;&#39;</span>
                       <span class="p">}</span>


    <span class="k">def</span> <span class="nf">hydrate_project_data_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the position number to the related bundle&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_data_fields&quot;</span><span class="p">]):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;obj&#39;</span><span class="p">):</span>
                <span class="n">item</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">index</span>
        <span class="k">return</span> <span class="n">bundle</span>

    <span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a serialized form of the schema of the resource.</span>
<span class="sd">        Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">        to HTTP GET.</span>
<span class="sd">        Should return a HttpResponse (200 OK).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">        Mostly a useful shortcut/hook.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span>
            <span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>

        <span class="k">if</span><span class="p">(</span><span class="n">desired_format</span> <span class="o">==</span> <span class="s1">&#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;</span><span class="p">):</span>
            <span class="n">rc</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;attachment; filename=project_data_explanation.xlsx&#39;</span>
        <span class="k">return</span> <span class="n">rc</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.ChemRegCustomFieldConfigResource">ChemRegCustomFieldConfigResource</a></li>
          <li><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.project_data_fields" class="name">var <span class="ident">project_data_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for a list of objects, generally also including
meta data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for a list of objects, generally also including</span>
<span class="sd">    meta data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.
Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span>
        <span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="n">desired_format</span> <span class="o">==</span> <span class="s1">&#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;</span><span class="p">):</span>
        <span class="n">rc</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;attachment; filename=project_data_explanation.xlsx&#39;</span>
    <span class="k">return</span> <span class="n">rc</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>get_object_list</code>.</p>
<p>Returns a queryset that may have been limited by other overrides.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``get_object_list``.</span>
<span class="sd">    Returns a queryset that may have been limited by other overrides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">_clone</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.
Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.
Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_created_by">
    <p>def <span class="ident">hydrate_created_by</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></code>.<code><a href="#cbh_core_api.resources.UserHydrate.hydrate_created_by">hydrate_created_by</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_created_by', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_created_by" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_created_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="n">user</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_project_data_fields">
    <p>def <span class="ident">hydrate_project_data_fields</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Add the position number to the related bundle</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_project_data_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.hydrate_project_data_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_project_data_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add the position number to the related bundle&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_data_fields&quot;</span><span class="p">]):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s1">&#39;obj&#39;</span><span class="p">):</span>
            <span class="n">item</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">index</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegCustomFieldConfigResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegCustomFieldConfigResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource" class="name">class <span class="ident">ChemRegDataPointProjectFieldResource</span></p>
      
  
    <div class="desc"><p>Provides the schema information about a field that is required by front end apps</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ChemRegDataPointProjectFieldResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Provides the schema information about a field that is required by front end apps&quot;&quot;&quot;</span>

    <span class="n">edit_form</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;an angular schema form element that can be used to edit this field &quot;</span><span class="p">)</span>
    <span class="n">edit_schema</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>   <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;an angular schema form schema that can be used to edit this field &quot;</span><span class="p">)</span>
    <span class="n">view_form</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;possibly deprecated or never used&quot;</span>
        <span class="p">)</span>
    <span class="n">handsontable</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span>
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A JSON object which is combined with the other fields on the system to make a handsontable columns object&quot;</span>
        <span class="p">)</span>
    

 
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">PinnedCustomField</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_chemreg_datapoint_fields&#39;</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>
        <span class="n">level</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">description</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;api_dispatch_detail&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Provides information about the data types present in the flexible schema of the datapoint table</span>
<span class="s1">For each field a set of attributes are returned:</span>

<span class="s1">edit_form /schema - an angular schema form element that can be used to edit this field </span>



<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span>

                       <span class="s1">&#39;api_dispatch_list&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">Provides information about the data types present in the flexible schema of the datapoint table</span>
<span class="s1">For each field a set of attributes are returned:</span>

<span class="s1">edit_form /schema - an angular schema form element that can be used to edit this field </span>


<span class="s1">        &#39;&#39;&#39;</span>
         <span class="p">}</span>

    <span class="k">def</span> <span class="nf">dehydrate_handsontable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Generate the JSON object required by the handontable API&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="s2">&quot;custom_fields.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;knownBy&quot;</span> <span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;customFieldRenderer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;className&quot;</span> <span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
            <span class="s2">&quot;editable&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="c1"># flags the field as editable so edit links appear in it</span>
            <span class="s2">&quot;editor&quot;</span> <span class="p">:</span> <span class="bp">False</span>    <span class="c1"># ensures that the handsontable in cell editor is disabled</span>

        <span class="p">}</span>



    <span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles checking if the user is authenticated and dealing with</span>
<span class="sd">        unauthenticated users.</span>

<span class="sd">        Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">        ``Resource._meta``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Authenticate the request as needed.</span>
        <span class="k">return</span> <span class="bp">True</span>


    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cannot remember why the save function is &quot;re implemented&quot; here</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bundle</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>


        <span class="c1"># Save FKs just in case.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="c1"># Save the main object.</span>
        <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
       
        <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>

        <span class="c1"># Now pick up the M2M bits.</span>
        <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span>

    <span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a serialized form of the schema of the resource.</span>
<span class="sd">        Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">        to HTTP GET.</span>
<span class="sd">        Should return a HttpResponse (200 OK).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">get_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        deprecated</span>
<span class="sd">            Hook to return the dotted path to this field based on the level and the name of the field</span>
<span class="sd">            The level name is formatted in the dehydrate method of the DataFormConfigResource</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="s2">&quot;{level}.project_data.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_space_replaced_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_namespace_for_action_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">action_type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;deprecated&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">action_type</span>


    <span class="k">def</span> <span class="nf">dehydrate_edit_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Return the part of the edit form related to this field -</span>
<span class="sd">        The edit forms will be combined on the front end see </span>
<span class="sd">        https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        
        
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;form&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">data</span><span class="p">]}</span>

    <span class="k">def</span> <span class="nf">dehydrate_edit_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39; Return the part of the edit schema related to this field -</span>
<span class="sd">        The edit schemas will be combined on the front end see </span>
<span class="sd">        https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]}}</span>

    <span class="k">def</span> <span class="nf">dehydrate_view_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;possibly deprecated  &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;form&quot;</span> <span class="p">:</span> <span class="n">data</span><span class="p">}</span>





    <span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles checking of permissions to see if the user has authorization</span>
<span class="sd">        to PUT this resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles checking of permissions to see if the user has authorization</span>
<span class="sd">        to PUT this resource.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.ChemRegDataPointProjectFieldResource">ChemRegDataPointProjectFieldResource</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.edit_form" class="name">var <span class="ident">edit_form</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.edit_schema" class="name">var <span class="ident">edit_schema</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.handsontable" class="name">var <span class="ident">handsontable</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.view_form" class="name">var <span class="ident">view_form</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for a list of objects, generally also including
meta data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for a list of objects, generally also including</span>
<span class="sd">    meta data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.</p>
<p>Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_form">
    <p>def <span class="ident">dehydrate_edit_form</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the part of the edit form related to this field -
The edit forms will be combined on the front end see 
https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_form', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_form" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_edit_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Return the part of the edit form related to this field -</span>
<span class="sd">    The edit forms will be combined on the front end see </span>
<span class="sd">    https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    
    
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;form&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">data</span><span class="p">]}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_schema">
    <p>def <span class="ident">dehydrate_edit_schema</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the part of the edit schema related to this field -
The edit schemas will be combined on the front end see 
https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_edit_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_edit_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Return the part of the edit schema related to this field -</span>
<span class="sd">    The edit schemas will be combined on the front end see </span>
<span class="sd">    https://github.com/thesgc/ng-chem/blob/master/app/scripts/config.js&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;properties&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]}}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_handsontable">
    <p>def <span class="ident">dehydrate_handsontable</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Generate the JSON object required by the handontable API</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_handsontable', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_handsontable" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_handsontable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate the JSON object required by the handontable API&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;data&quot;</span> <span class="p">:</span> <span class="s2">&quot;custom_fields.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;knownBy&quot;</span> <span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;customFieldRenderer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;className&quot;</span> <span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
        <span class="s2">&quot;editable&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span> <span class="c1"># flags the field as editable so edit links appear in it</span>
        <span class="s2">&quot;editor&quot;</span> <span class="p">:</span> <span class="bp">False</span>    <span class="c1"># ensures that the handsontable in cell editor is disabled</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_view_form">
    <p>def <span class="ident">dehydrate_view_form</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_view_form', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dehydrate_view_form" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_view_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;possibly deprecated  &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;empty&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;form&quot;</span> <span class="p">:</span> <span class="n">data</span><span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace">
    <p>def <span class="ident">get_namespace</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>deprecated
Hook to return the dotted path to this field based on the level and the name of the field
The level name is formatted in the dehydrate method of the DataFormConfigResource</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_namespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    deprecated</span>
<span class="sd">        Hook to return the dotted path to this field based on the level and the name of the field</span>
<span class="sd">        The level name is formatted in the dehydrate method of the DataFormConfigResource</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="s2">&quot;{level}.project_data.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_space_replaced_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace_for_action_key">
    <p>def <span class="ident">get_namespace_for_action_key</span>(</p><p>self, bundle, action_type)</p>
    </div>
    

    
  
    <div class="desc"><p>deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace_for_action_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_namespace_for_action_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_namespace_for_action_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">action_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">action_type</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>get_object_list</code>.</p>
<p>Returns a queryset that may have been limited by other overrides.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``get_object_list``.</span>
<span class="sd">    Returns a queryset that may have been limited by other overrides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">_clone</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.
Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.
Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Cannot remember why the save function is "re implemented" here</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cannot remember why the save function is &quot;re implemented&quot; here</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
   
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemRegDataPointProjectFieldResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemRegDataPointProjectFieldResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.ChemregProjectResource" class="name">class <span class="ident">ChemregProjectResource</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ChemregProjectResource</span><span class="p">(</span><span class="n">UserHydrate</span><span class="p">,</span> <span class="n">ModelResource</span><span class="p">):</span>

    <span class="n">project_type</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.ProjectTypeResource&quot;</span><span class="p">,</span> <span class="s1">&#39;project_type&#39;</span><span class="p">,</span>  <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A tag for the type of data this project stores&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ChemRegCustomFieldConfigResource</span><span class="p">,</span>
                                            <span class="s1">&#39;custom_field_config&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The single custom field config object attached to this project&quot;</span><span class="p">)</span>
    <span class="n">valid_cache_get_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">,</span> <span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="s1">&#39;project_key&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;schemaform&#39;</span><span class="p">]</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span> <span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The user who created this Project&quot;</span><span class="p">)</span>
    <span class="n">users_restricted_fields</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Possibly deprecated, was meant to list the restricted fields&quot;</span><span class="p">)</span>
    <span class="n">flowjs_upload_url</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The URL to be used when uploading data or attachments associated with this project&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>

        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">paginator_class</span> <span class="o">=</span> <span class="n">Paginator</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_projects&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">ProjectListAuthorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">Serializer</span><span class="p">()</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;project_key&#39;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
            <span class="s1">&#39;project_type&#39;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">always_return_data</span><span class="o">=</span><span class="bp">True</span>

    <span class="k">def</span> <span class="nf">dehydrate_flowjs_upload_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;flowv2_upload&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;project_id&#39;</span><span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="p">})</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>



    <span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the custom field config, any integrity errors from repeated names are passed up&quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Request the list response and if asked to, use the cache</span>
<span class="sd">        Cache is invalidated each time a project anywhere on the system is updated by a signal in cbh_core_model</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
            <span class="n">serialized</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">serialized</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)):</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
                <span class="k">print</span> <span class="s2">&quot;from cache&quot;</span>
                <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                                <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        

    <span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>



    <span class="k">def</span> <span class="nf">patch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>




    <span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sort the projects by modified date descending by default&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span>
                     <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="n">Prefetch</span><span class="p">(</span><span class="s1">&#39;project_type&#39;</span>
                                                                              <span class="p">))</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-modified&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Here we append a list of tags to the data of the GET request if the</span>
<span class="sd">        search fields are required&#39;&#39;&#39;</span>

        <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                          <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
        <span class="n">bundle</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
        

        <span class="n">names_list</span> <span class="o">=</span> <span class="p">[]</span> 
        <span class="c1">#The tabular data schema is produced here as we have a list of the fields that the user has access to here</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="p">[</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1">#set up a restricted fields lookup for removing restricted fields from output</span>
        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;user_restricted_fieldnames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="p">:</span> <span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;users_restricted_fields&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]}</span>

        <span class="k">for</span> <span class="n">projbund</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">bund</span> <span class="ow">in</span> <span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_data_fields&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
                    <span class="c1">#The handsontable part is the same for each project</span>
                    <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">names_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
                    <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;projects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

                
                    <span class="c1">#We have set up the app so there is one field per project so here we are just</span>
                    <span class="c1"># ensuring we know the field type, everything else can be looked up from </span>
                <span class="n">real_renderer_for_this_project</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;renderer_named&quot;</span><span class="p">]</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">][</span><span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;field_type&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="n">real_renderer_for_this_project</span> <span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">open_or_restricted</span><span class="p">}</span>

                <span class="k">del</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span>
                <span class="c1">#del bund.data[&quot;users_restricted_fields&quot;]</span>

        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;schema&quot;</span><span class="p">:</span>
                <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">names_list</span> <span class="o">+</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]}</span>

        <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema</span>

        <span class="k">return</span> <span class="n">bundle</span>


    <span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Currently does not do all the things done by alter list data and perhaps better not to</span>
<span class="sd">        as this function is used to update a project </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                          <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">bundle</span><span class="p">,]}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
                          
        <span class="k">return</span> <span class="n">bundle</span>

   



    <span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">request</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span>
        <span class="o">**</span><span class="n">response_kwargs</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">        Mostly a useful shortcut/hook.</span>
<span class="sd">        Ensures that the cache is invalidated and re saved as appropriate</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>

        <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                            <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span>
                            <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">desired_format</span> \
                <span class="o">==</span> <span class="s1">&#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;</span><span class="p">:</span>
            <span class="n">rc</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> \
                <span class="s1">&#39;attachment; filename=project_data_explanation.xlsx&#39;</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">response_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span> <span class="ow">and</span> <span class="n">response_class</span> <span class="o">==</span> <span class="n">HttpResponse</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
                    <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialized</span>
        <span class="k">if</span> <span class="n">response_class</span> <span class="ow">in</span> <span class="p">[</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="s2">&quot;projects_list_cache&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">:</span>
                    <span class="k">del</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span>
            <span class="n">remove_session_cached_projectlists</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">rc</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></li>
          <li><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.custom_field_config" class="name">var <span class="ident">custom_field_config</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.flowjs_upload_url" class="name">var <span class="ident">flowjs_upload_url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.project_type" class="name">var <span class="ident">project_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.users_restricted_fields" class="name">var <span class="ident">users_restricted_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.valid_cache_get_keys" class="name">var <span class="ident">valid_cache_get_keys</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ChemregProjectResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Currently does not do all the things done by alter list data and perhaps better not to
as this function is used to update a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Currently does not do all the things done by alter list data and perhaps better not to</span>
<span class="sd">    as this function is used to update a project </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                      <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">bundle</span><span class="p">,]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
                      
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Here we append a list of tags to the data of the GET request if the
search fields are required</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Here we append a list of tags to the data of the GET request if the</span>
<span class="sd">    search fields are required&#39;&#39;&#39;</span>
    <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                      <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
    
    <span class="n">names_list</span> <span class="o">=</span> <span class="p">[]</span> 
    <span class="c1">#The tabular data schema is produced here as we have a list of the fields that the user has access to here</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="p">[</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#set up a restricted fields lookup for removing restricted fields from output</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;user_restricted_fieldnames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="p">:</span> <span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;users_restricted_fields&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]}</span>
    <span class="k">for</span> <span class="n">projbund</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">bund</span> <span class="ow">in</span> <span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_data_fields&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
                <span class="c1">#The handsontable part is the same for each project</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">names_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;projects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            
                <span class="c1">#We have set up the app so there is one field per project so here we are just</span>
                <span class="c1"># ensuring we know the field type, everything else can be looked up from </span>
            <span class="n">real_renderer_for_this_project</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;renderer_named&quot;</span><span class="p">]</span>
            <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">][</span><span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;field_type&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="n">real_renderer_for_this_project</span> <span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">open_or_restricted</span><span class="p">}</span>
            <span class="k">del</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span>
            <span class="c1">#del bund.data[&quot;users_restricted_fields&quot;]</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;schema&quot;</span><span class="p">:</span>
            <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">names_list</span> <span class="o">+</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]}</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.
Mostly a useful shortcut/hook.
Ensures that the cache is invalidated and re saved as appropriate</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">request</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span>
    <span class="o">**</span><span class="n">response_kwargs</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    Ensures that the cache is invalidated and re saved as appropriate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                        <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span>
                        <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">desired_format</span> \
            <span class="o">==</span> <span class="s1">&#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;</span><span class="p">:</span>
        <span class="n">rc</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> \
            <span class="s1">&#39;attachment; filename=project_data_explanation.xlsx&#39;</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">response_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span> <span class="ow">and</span> <span class="n">response_class</span> <span class="o">==</span> <span class="n">HttpResponse</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
                <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialized</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">in</span> <span class="p">[</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;projects_list_cache&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span>
        <span class="n">remove_session_cached_projectlists</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">rc</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.dehydrate_flowjs_upload_url">
    <p>def <span class="ident">dehydrate_flowjs_upload_url</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.dehydrate_flowjs_upload_url', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.dehydrate_flowjs_upload_url" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_flowjs_upload_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;flowv2_upload&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;project_id&#39;</span><span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="p">})</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Request the list response and if asked to, use the cache
Cache is invalidated each time a project anywhere on the system is updated by a signal in cbh_core_model</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Request the list response and if asked to, use the cache</span>
<span class="sd">    Cache is invalidated each time a project anywhere on the system is updated by a signal in cbh_core_model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serialized</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)):</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">print</span> <span class="s2">&quot;from cache&quot;</span>
            <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                            <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Sort the projects by modified date descending by default</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sort the projects by modified date descending by default&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span>
                 <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="n">Prefetch</span><span class="p">(</span><span class="s1">&#39;project_type&#39;</span>
                                                                          <span class="p">))</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-modified&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.hydrate_created_by">
    <p>def <span class="ident">hydrate_created_by</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></code>.<code><a href="#cbh_core_api.resources.UserHydrate.hydrate_created_by">hydrate_created_by</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.hydrate_created_by', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.hydrate_created_by" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_created_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="n">user</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that when saving the custom field config, any integrity errors from repeated names are passed up</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the custom field config, any integrity errors from repeated names are passed up&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ChemregProjectResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ChemregProjectResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ChemregProjectResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.Index" class="name">class <span class="ident">Index</span></p>
      
  
    <div class="desc"><p>Serves the static template from the angularjs folder (the dist folder is the location that grunt build puts the production artifact
We then copy this dist folder across with collectstatic by declaring it in the list of static folders</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Index</span><span class="p">(</span><span class="n">TemplateView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serves the static template from the angularjs folder (the dist folder is the location that grunt build puts the production artifact</span>
<span class="sd">    We then copy this dist folder across with collectstatic by declaring it in the list of static folders</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">template_name</span> <span class="o">=</span> <span class="s1">&#39;dist/index.html&#39;</span>  <span class="c1"># or define get_template_names()</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that the csrf token is always set in the cookie when rendering&quot;&quot;&quot;</span>
        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.Index">Index</a></li>
          <li>django.views.generic.base.TemplateView</li>
          <li>django.views.generic.base.TemplateResponseMixin</li>
          <li>django.views.generic.base.ContextMixin</li>
          <li>django.views.generic.base.View</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.Index.content_type" class="name">var <span class="ident">content_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Index.http_method_names" class="name">var <span class="ident">http_method_names</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Index.response_class" class="name">var <span class="ident">response_class</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Index.template_engine" class="name">var <span class="ident">template_engine</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Index.template_name" class="name">var <span class="ident">template_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Constructor. Called in the URLconf; can contain helpful extra
keyword arguments, and other things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor. Called in the URLconf; can contain helpful extra</span>
<span class="sd">    keyword arguments, and other things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Go through keyword arguments, and either save their values to our</span>
    <span class="c1"># instance, or raise an error.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.as_view">
    <p>def <span class="ident">as_view</span>(</p><p>cls, **initkwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Main entry point for a request-response process.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.as_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.as_view" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classonlymethod</span>
<span class="k">def</span> <span class="nf">as_view</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">initkwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main entry point for a request-response process.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">initkwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">http_method_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;You tried to pass in the </span><span class="si">%s</span><span class="s2"> method name as a &quot;</span>
                            <span class="s2">&quot;keyword argument to </span><span class="si">%s</span><span class="s2">(). Don&#39;t do that.&quot;</span>
                            <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">() received an invalid keyword </span><span class="si">%r</span><span class="s2">. as_view &quot;</span>
                            <span class="s2">&quot;only accepts arguments that are already &quot;</span>
                            <span class="s2">&quot;attributes of the class.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="n">initkwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;head&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">view_class</span> <span class="o">=</span> <span class="n">cls</span>
    <span class="n">view</span><span class="o">.</span><span class="n">view_initkwargs</span> <span class="o">=</span> <span class="n">initkwargs</span>
    <span class="c1"># take name and docstring from class</span>
    <span class="n">update_wrapper</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">updated</span><span class="o">=</span><span class="p">())</span>
    <span class="c1"># and possible attributes set by decorators</span>
    <span class="c1"># like csrf_exempt from dispatch</span>
    <span class="n">update_wrapper</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">dispatch</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">view</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># Try to dispatch to the right method; if a method doesn&#39;t exist,</span>
    <span class="c1"># defer to the error handler. Also defer to the error handler if the</span>
    <span class="c1"># request method isn&#39;t on the approved list.</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_names</span><span class="p">:</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_not_allowed</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_not_allowed</span>
    <span class="k">return</span> <span class="n">handler</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.get">
    <p>def <span class="ident">get</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that the csrf token is always set in the cookie when rendering</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that the csrf token is always set in the cookie when rendering&quot;&quot;&quot;</span>
    <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
    <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.get_context_data">
    <p>def <span class="ident">get_context_data</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.get_context_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.get_context_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="s1">&#39;view&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;view&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.get_template_names">
    <p>def <span class="ident">get_template_names</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of template names to be used for the request. Must return
a list. May not be called if render_to_response is overridden.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.get_template_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.get_template_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_template_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of template names to be used for the request. Must return</span>
<span class="sd">    a list. May not be called if render_to_response is overridden.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImproperlyConfigured</span><span class="p">(</span>
            <span class="s2">&quot;TemplateResponseMixin requires either a definition of &quot;</span>
            <span class="s2">&quot;&#39;template_name&#39; or an implementation of &#39;get_template_names()&#39;&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">template_name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.http_method_not_allowed">
    <p>def <span class="ident">http_method_not_allowed</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.http_method_not_allowed', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.http_method_not_allowed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">http_method_not_allowed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Method Not Allowed (</span><span class="si">%s</span><span class="s1">): </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">405</span><span class="p">,</span>
            <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpResponseNotAllowed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_methods</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.options">
    <p>def <span class="ident">options</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles responding to requests for the OPTIONS HTTP verb.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.options', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.options" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles responding to requests for the OPTIONS HTTP verb.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">()</span>
    <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_methods</span><span class="p">())</span>
    <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Index.render_to_response">
    <p>def <span class="ident">render_to_response</span>(</p><p>self, context, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a response, using the <code>response_class</code> for this
view, with a template rendered with the given context.</p>
<p>If any keyword arguments are provided, they will be
passed to the constructor of the response class.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Index.render_to_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Index.render_to_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a response, using the `response_class` for this</span>
<span class="sd">    view, with a template rendered with the given context.</span>
<span class="sd">    If any keyword arguments are provided, they will be</span>
<span class="sd">    passed to the constructor of the response class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response_kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;content_type&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_class</span><span class="p">(</span>
        <span class="n">request</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_template_names</span><span class="p">(),</span>
        <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
        <span class="n">using</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template_engine</span><span class="p">,</span>
        <span class="o">**</span><span class="n">response_kwargs</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.InvitationResource" class="name">class <span class="ident">InvitationResource</span></p>
      
  
    <div class="desc"><p>Resource for Invitation model. This will setup creation of the invite email and new user</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">InvitationResource</span><span class="p">(</span><span class="n">UserHydrate</span><span class="p">,</span> <span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Resource for Invitation model. This will setup creation of the invite email and new user &#39;&#39;&#39;</span>

    <span class="n">created_by</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span> <span class="s1">&#39;created_by&#39;</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;creator of the invitation&quot;</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Invitation</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;invitations&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">InviteAuthorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span>
        <span class="p">}</span>





    <span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">new_user</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">email_template_name</span><span class="p">,</span> <span class="n">subject_template_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the data from the invitation form (results in an email being sent)&quot;&quot;&quot;</span>
        <span class="n">server</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">SERVER_EMAIL</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">MyPasswordResetForm</span><span class="p">(</span><span class="n">QueryDict</span><span class="p">(</span><span class="n">urlencode</span><span class="p">({</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">email</span><span class="p">})))</span>
        <span class="n">hostname</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s2">&quot;HTTP_ORIGIN&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="n">form</span><span class="o">.</span><span class="n">users_cache</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_user</span><span class="p">,]</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;use_https&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">is_secure</span><span class="p">(),</span>
                <span class="s1">&#39;token_generator&#39;</span><span class="p">:</span> <span class="n">default_token_generator</span><span class="p">,</span>
                <span class="s1">&#39;from_email&#39;</span><span class="p">:</span> <span class="n">server</span><span class="p">,</span>
                <span class="s1">&#39;user&#39;</span> <span class="p">:</span> <span class="n">new_user</span><span class="p">,</span>
                <span class="s1">&#39;email_template_name&#39;</span><span class="p">:</span> <span class="n">email_template_name</span><span class="p">,</span>
                <span class="s1">&#39;subject_template_name&#39;</span><span class="p">:</span> <span class="n">subject_template_name</span><span class="p">,</span>
                <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
                <span class="s1">&#39;extra_email_context&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hostname&#39;</span><span class="p">:</span><span class="n">hostname</span><span class="p">,</span> <span class="s1">&#39;invite&#39;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;login_url&#39;</span> <span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_URL</span><span class="p">,</span> <span class="p">},</span>
            <span class="p">}</span>
            <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Email not valid&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">        Mostly a useful shortcut/hook.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
       

        <span class="k">if</span> <span class="n">response_class</span> <span class="o">==</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">:</span>     
            <span class="n">email</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ox.ac.uk&quot;</span><span class="p">):</span>
                <span class="c1">#send via webauth</span>
                <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;We do not yet support inviting users at Oxford to projects. This feature will come soon.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="n">UserObj</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
                <span class="n">new_user</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">UserObj</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">email</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;projects_selected&quot;</span><span class="p">]:</span>
                    <span class="n">p</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">perm</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
                    <span class="n">p</span><span class="o">.</span><span class="n">make_viewer</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
                    <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Invite sent successfully to </span><span class="si">%s</span><span class="s2">, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_new_user.html&#39;</span>
                <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_new_user.html&#39;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span>
                    <span class="n">projects_with_reader_access</span> <span class="o">=</span> <span class="n">viewer_projects</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
                    <span class="n">all_projects_equal</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="n">all_selected_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">new_proj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">new_proj</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;projects_selected&quot;</span><span class="p">]])</span>
                    <span class="n">new_ids</span> <span class="o">=</span> <span class="n">all_selected_ids</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">projects_with_reader_access</span><span class="p">)</span>
                    
                    <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
                        <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_project_access_changed.html&#39;</span>
                        <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_project_access_changed.html&#39;</span>
                        <span class="n">all_projects_equal</span> <span class="o">=</span> <span class="bp">False</span>
                        <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Existing user </span><span class="si">%s</span><span class="s2"> invited to new projects, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;remind&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s1">&#39;{&quot;error&quot;: &quot;User already exists, do you wish to invite again?&quot;}&#39;</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">new_user</span><span class="o">.</span><span class="n">has_usable_password</span><span class="p">():</span>
                            <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_reminder.html&#39;</span>
                            <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_reminder.html&#39;</span>
                            <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Sign-up reminder sent to </span><span class="si">%s</span><span class="s2">, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_reminder_already_logged_on.html&#39;</span>
                            <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_reminder.html&#39;</span>
                            <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;User </span><span class="si">%s</span><span class="s2"> reminded to look at these projects, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span> <span class="n">email</span><span class="p">,</span> <span class="n">new_user</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">email_template_name</span><span class="p">,</span> <span class="n">subject_template_name</span><span class="p">)</span>         

        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span>
            <span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>       
        <span class="k">return</span> <span class="n">rc</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.InvitationResource">InvitationResource</a></li>
          <li><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.InvitationResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.InvitationResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.InvitationResource.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.InvitationResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.InvitationResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for a list of objects, generally also including
meta data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for a list of objects, generally also including</span>
<span class="sd">    meta data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.
Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
   
    <span class="k">if</span> <span class="n">response_class</span> <span class="o">==</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">:</span>     
        <span class="n">email</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">email</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ox.ac.uk&quot;</span><span class="p">):</span>
            <span class="c1">#send via webauth</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;We do not yet support inviting users at Oxford to projects. This feature will come soon.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">UserObj</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
            <span class="n">new_user</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">UserObj</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">email</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;projects_selected&quot;</span><span class="p">]:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">perm</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>
                <span class="n">p</span><span class="o">.</span><span class="n">make_viewer</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
                <span class="n">p</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Invite sent successfully to </span><span class="si">%s</span><span class="s2">, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
            <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_new_user.html&#39;</span>
            <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_new_user.html&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">created</span><span class="p">:</span>
                <span class="n">projects_with_reader_access</span> <span class="o">=</span> <span class="n">viewer_projects</span><span class="p">(</span><span class="n">new_user</span><span class="p">)</span>
                <span class="n">all_projects_equal</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">all_selected_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">new_proj</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">new_proj</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;projects_selected&quot;</span><span class="p">]])</span>
                <span class="n">new_ids</span> <span class="o">=</span> <span class="n">all_selected_ids</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">projects_with_reader_access</span><span class="p">)</span>
                
                <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_project_access_changed.html&#39;</span>
                    <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_project_access_changed.html&#39;</span>
                    <span class="n">all_projects_equal</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Existing user </span><span class="si">%s</span><span class="s2"> invited to new projects, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;remind&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">http</span><span class="o">.</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s1">&#39;{&quot;error&quot;: &quot;User already exists, do you wish to invite again?&quot;}&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">new_user</span><span class="o">.</span><span class="n">has_usable_password</span><span class="p">():</span>
                        <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_reminder.html&#39;</span>
                        <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_reminder.html&#39;</span>
                        <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Sign-up reminder sent to </span><span class="si">%s</span><span class="s2">, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">email_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/email_reminder_already_logged_on.html&#39;</span>
                        <span class="n">subject_template_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_core_api/subject_reminder.html&#39;</span>
                        <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;User </span><span class="si">%s</span><span class="s2"> reminded to look at these projects, would you like to invite anyone else?&quot;</span> <span class="o">%</span> <span class="n">email</span>
            <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span> <span class="n">email</span><span class="p">,</span> <span class="n">new_user</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">email_template_name</span><span class="p">,</span> <span class="n">subject_template_name</span><span class="p">)</span>         
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span>
        <span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>       
    <span class="k">return</span> <span class="n">rc</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_form">
    <p>def <span class="ident">get_form</span>(</p><p>self, email, new_user, data, created, request, email_template_name, subject_template_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Save the data from the invitation form (results in an email being sent)</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_form', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_form" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">new_user</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">email_template_name</span><span class="p">,</span> <span class="n">subject_template_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save the data from the invitation form (results in an email being sent)&quot;&quot;&quot;</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">SERVER_EMAIL</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">MyPasswordResetForm</span><span class="p">(</span><span class="n">QueryDict</span><span class="p">(</span><span class="n">urlencode</span><span class="p">({</span><span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="n">email</span><span class="p">})))</span>
    <span class="n">hostname</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s2">&quot;HTTP_ORIGIN&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="n">form</span><span class="o">.</span><span class="n">users_cache</span> <span class="o">=</span> <span class="p">[</span><span class="n">new_user</span><span class="p">,]</span>
        <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;use_https&#39;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">is_secure</span><span class="p">(),</span>
            <span class="s1">&#39;token_generator&#39;</span><span class="p">:</span> <span class="n">default_token_generator</span><span class="p">,</span>
            <span class="s1">&#39;from_email&#39;</span><span class="p">:</span> <span class="n">server</span><span class="p">,</span>
            <span class="s1">&#39;user&#39;</span> <span class="p">:</span> <span class="n">new_user</span><span class="p">,</span>
            <span class="s1">&#39;email_template_name&#39;</span><span class="p">:</span> <span class="n">email_template_name</span><span class="p">,</span>
            <span class="s1">&#39;subject_template_name&#39;</span><span class="p">:</span> <span class="n">subject_template_name</span><span class="p">,</span>
            <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
            <span class="s1">&#39;extra_email_context&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hostname&#39;</span><span class="p">:</span><span class="n">hostname</span><span class="p">,</span> <span class="s1">&#39;invite&#39;</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;login_url&#39;</span> <span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_URL</span><span class="p">,</span> <span class="p">},</span>
        <span class="p">}</span>
        <span class="n">form</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">**</span><span class="n">opts</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Email not valid&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>get_object_list</code>.</p>
<p>Returns a queryset that may have been limited by other overrides.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``get_object_list``.</span>
<span class="sd">    Returns a queryset that may have been limited by other overrides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">_clone</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.hydrate_created_by">
    <p>def <span class="ident">hydrate_created_by</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></code>.<code><a href="#cbh_core_api.resources.UserHydrate.hydrate_created_by">hydrate_created_by</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.hydrate_created_by', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.hydrate_created_by" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_created_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="n">user</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.InvitationResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.InvitationResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.InvitationResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.Login" class="name">class <span class="ident">Login</span></p>
      
  
    <div class="desc"><p>Login FormView using the standard locations for login templates in django</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Login</span><span class="p">(</span> <span class="n">CSRFExemptMixin</span><span class="p">,</span> <span class="n">FormView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Login FormView using the standard locations for login templates in django</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">form_class</span> <span class="o">=</span> <span class="n">AuthenticationForm</span>
    <span class="n">template_name</span> <span class="o">=</span> <span class="s2">&quot;cbh_chem_api/login.html&quot;</span>
    <span class="n">logout</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensure that the webauth is setup if required </span>
<span class="sd">        Set the CSRF cookie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span>
            <span class="n">form</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">()))</span>
        <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>

        <span class="k">if</span> <span class="s2">&quot;django_webauth&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;webauth_login&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;REMOTE_USER&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span><span class="p">:</span>
                <span class="c1"># Here we check if this was a redirect after logout in which</span>
                <span class="c1"># case we show the button to log out of webauth entirely</span>
                <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;HTTP_X_WEBAUTH_USER&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">username</span><span class="p">:</span>
                <span class="n">context</span><span class="p">[</span><span class="s2">&quot;logout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;password_login&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles POST requests, instantiating a form instance with the passed</span>
<span class="sd">        POST variables and then checked for validity.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>
        <span class="sd">&#39;&#39;&#39;Borrowed from django base detail view&#39;&#39;&#39;</span>
        <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
        <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
            <span class="c1">#The user has pressed back in their browser and therefore should be redirected</span>
            <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>
        <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_invalid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove test cookies as required&quot;&quot;&quot;</span>
        <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>

        <span class="n">auth_login</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">form</span><span class="o">.</span><span class="n">get_user</span><span class="p">())</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">test_cookie_worked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete_test_cookie</span><span class="p">()</span>
        <span class="c1"># return self.render_to_response(self.get_context_data())</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">form_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Send the form back again if invalid with errors&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">))</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.Login">Login</a></li>
          <li><a href="#cbh_core_api.resources.CSRFExemptMixin">CSRFExemptMixin</a></li>
          <li>django.views.generic.edit.FormView</li>
          <li>django.views.generic.base.TemplateResponseMixin</li>
          <li>django.views.generic.edit.BaseFormView</li>
          <li>django.views.generic.edit.FormMixin</li>
          <li>django.views.generic.base.ContextMixin</li>
          <li>django.views.generic.edit.ProcessFormView</li>
          <li>django.views.generic.base.View</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.Login.content_type" class="name">var <span class="ident">content_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.form_class" class="name">var <span class="ident">form_class</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.http_method_names" class="name">var <span class="ident">http_method_names</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.initial" class="name">var <span class="ident">initial</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.logout" class="name">var <span class="ident">logout</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.prefix" class="name">var <span class="ident">prefix</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.response_class" class="name">var <span class="ident">response_class</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.success_url" class="name">var <span class="ident">success_url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.template_engine" class="name">var <span class="ident">template_engine</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.Login.template_name" class="name">var <span class="ident">template_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Constructor. Called in the URLconf; can contain helpful extra
keyword arguments, and other things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor. Called in the URLconf; can contain helpful extra</span>
<span class="sd">    keyword arguments, and other things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Go through keyword arguments, and either save their values to our</span>
    <span class="c1"># instance, or raise an error.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.as_view">
    <p>def <span class="ident">as_view</span>(</p><p>cls, **initkwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Main entry point for a request-response process.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.as_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.as_view" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classonlymethod</span>
<span class="k">def</span> <span class="nf">as_view</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">initkwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main entry point for a request-response process.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">initkwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">http_method_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;You tried to pass in the </span><span class="si">%s</span><span class="s2"> method name as a &quot;</span>
                            <span class="s2">&quot;keyword argument to </span><span class="si">%s</span><span class="s2">(). Don&#39;t do that.&quot;</span>
                            <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">() received an invalid keyword </span><span class="si">%r</span><span class="s2">. as_view &quot;</span>
                            <span class="s2">&quot;only accepts arguments that are already &quot;</span>
                            <span class="s2">&quot;attributes of the class.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="n">initkwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;head&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">view_class</span> <span class="o">=</span> <span class="n">cls</span>
    <span class="n">view</span><span class="o">.</span><span class="n">view_initkwargs</span> <span class="o">=</span> <span class="n">initkwargs</span>
    <span class="c1"># take name and docstring from class</span>
    <span class="n">update_wrapper</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">updated</span><span class="o">=</span><span class="p">())</span>
    <span class="c1"># and possible attributes set by decorators</span>
    <span class="c1"># like csrf_exempt from dispatch</span>
    <span class="n">update_wrapper</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">dispatch</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">view</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.CSRFExemptMixin">CSRFExemptMixin</a></code>.<code><a href="#cbh_core_api.resources.CSRFExemptMixin.dispatch">dispatch</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nd">@decorate</span>
    <span class="k">def</span> <span class="nf">bound_func</span><span class="p">(</span><span class="o">*</span><span class="n">args2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs2</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">func</span><span class="o">.</span><span class="n">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">))(</span><span class="o">*</span><span class="n">args2</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs2</span><span class="p">)</span>
    <span class="c1"># bound_func has the signature that &#39;decorator&#39; expects i.e.  no</span>
    <span class="c1"># &#39;self&#39; argument, but it is a closure over self so it can call</span>
    <span class="c1"># &#39;func&#39; correctly.</span>
    <span class="k">return</span> <span class="n">bound_func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.form_invalid">
    <p>def <span class="ident">form_invalid</span>(</p><p>self, form)</p>
    </div>
    

    
  
    <div class="desc"><p>Send the form back again if invalid with errors</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.form_invalid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.form_invalid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">form_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Send the form back again if invalid with errors&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.form_valid">
    <p>def <span class="ident">form_valid</span>(</p><p>self, form)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove test cookies as required</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.form_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.form_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove test cookies as required&quot;&quot;&quot;</span>
    <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>
    <span class="n">auth_login</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">form</span><span class="o">.</span><span class="n">get_user</span><span class="p">())</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">test_cookie_worked</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete_test_cookie</span><span class="p">()</span>
    <span class="c1"># return self.render_to_response(self.get_context_data())</span>
    <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get">
    <p>def <span class="ident">get</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that the webauth is setup if required 
Set the CSRF cookie</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensure that the webauth is setup if required </span>
<span class="sd">    Set the CSRF cookie</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
    <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span>
        <span class="n">form</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">()))</span>
    <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>
    <span class="k">if</span> <span class="s2">&quot;django_webauth&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span><span class="p">:</span>
        <span class="n">context</span><span class="p">[</span><span class="s2">&quot;webauth_login&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;REMOTE_USER&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span><span class="p">:</span>
            <span class="c1"># Here we check if this was a redirect after logout in which</span>
            <span class="c1"># case we show the button to log out of webauth entirely</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;HTTP_X_WEBAUTH_USER&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">username</span><span class="p">:</span>
            <span class="n">context</span><span class="p">[</span><span class="s2">&quot;logout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">context</span><span class="p">[</span><span class="s2">&quot;password_login&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_to_response</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_context_data">
    <p>def <span class="ident">get_context_data</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Insert the form into the context dict.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_context_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_context_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Insert the form into the context dict.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">())</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">FormMixin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_form">
    <p>def <span class="ident">get_form</span>(</p><p>self, form_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns an instance of the form to be used in this view.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_form', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_form" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an instance of the form to be used in this view.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">form_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">form_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">form_class</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_kwargs</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_form_class">
    <p>def <span class="ident">get_form_class</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the form class to use in this view</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_form_class', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_form_class" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_form_class</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the form class to use in this view</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_class</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_form_kwargs">
    <p>def <span class="ident">get_form_kwargs</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the keyword arguments for instantiating the form.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_form_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_form_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_form_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the keyword arguments for instantiating the form.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;initial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_initial</span><span class="p">(),</span>
        <span class="s1">&#39;prefix&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_prefix</span><span class="p">(),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;PUT&#39;</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
            <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span>
            <span class="s1">&#39;files&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">FILES</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_initial">
    <p>def <span class="ident">get_initial</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the initial data to use for forms on this view.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_initial', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_initial" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_initial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the initial data to use for forms on this view.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_prefix">
    <p>def <span class="ident">get_prefix</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the prefix to use for forms on this view</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_prefix', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_prefix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the prefix to use for forms on this view</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_success_url">
    <p>def <span class="ident">get_success_url</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the supplied success URL.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_success_url', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_success_url" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_success_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the supplied success URL.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">success_url</span><span class="p">:</span>
        <span class="c1"># Forcing possible reverse_lazy evaluation</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">force_text</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">success_url</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImproperlyConfigured</span><span class="p">(</span>
            <span class="s2">&quot;No URL to redirect to. Provide a success_url.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">url</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.get_template_names">
    <p>def <span class="ident">get_template_names</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of template names to be used for the request. Must return
a list. May not be called if render_to_response is overridden.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.get_template_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.get_template_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_template_names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of template names to be used for the request. Must return</span>
<span class="sd">    a list. May not be called if render_to_response is overridden.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">template_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImproperlyConfigured</span><span class="p">(</span>
            <span class="s2">&quot;TemplateResponseMixin requires either a definition of &quot;</span>
            <span class="s2">&quot;&#39;template_name&#39; or an implementation of &#39;get_template_names()&#39;&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">template_name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.http_method_not_allowed">
    <p>def <span class="ident">http_method_not_allowed</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.http_method_not_allowed', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.http_method_not_allowed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">http_method_not_allowed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Method Not Allowed (</span><span class="si">%s</span><span class="s1">): </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">405</span><span class="p">,</span>
            <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpResponseNotAllowed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_methods</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.options">
    <p>def <span class="ident">options</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles responding to requests for the OPTIONS HTTP verb.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.options', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.options" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles responding to requests for the OPTIONS HTTP verb.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">()</span>
    <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_methods</span><span class="p">())</span>
    <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.post">
    <p>def <span class="ident">post</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles POST requests, instantiating a form instance with the passed
POST variables and then checked for validity.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.post', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.post" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles POST requests, instantiating a form instance with the passed</span>
<span class="sd">    POST variables and then checked for validity.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">redirect_to</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">LOGIN_REDIRECT_URL</span>
    <span class="sd">&#39;&#39;&#39;Borrowed from django base detail view&#39;&#39;&#39;</span>
    <span class="kn">from</span> <span class="nn">django.middleware.csrf</span> <span class="kn">import</span> <span class="n">get_token</span>
    <span class="n">csrf_token</span> <span class="o">=</span> <span class="n">get_token</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">():</span>
        <span class="c1">#The user has pressed back in their browser and therefore should be redirected</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">redirect_to</span><span class="p">)</span>
    <span class="n">form</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_form</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_class</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_valid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form_invalid</span><span class="p">(</span><span class="n">form</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.put">
    <p>def <span class="ident">put</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.put', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.put" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Login.render_to_response">
    <p>def <span class="ident">render_to_response</span>(</p><p>self, context, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a response, using the <code>response_class</code> for this
view, with a template rendered with the given context.</p>
<p>If any keyword arguments are provided, they will be
passed to the constructor of the response class.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Login.render_to_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Login.render_to_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">render_to_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a response, using the `response_class` for this</span>
<span class="sd">    view, with a template rendered with the given context.</span>
<span class="sd">    If any keyword arguments are provided, they will be</span>
<span class="sd">    passed to the constructor of the response class.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response_kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s1">&#39;content_type&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_type</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">response_class</span><span class="p">(</span>
        <span class="n">request</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_template_names</span><span class="p">(),</span>
        <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
        <span class="n">using</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">template_engine</span><span class="p">,</span>
        <span class="o">**</span><span class="n">response_kwargs</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.Logout" class="name">class <span class="ident">Logout</span></p>
      
  
    <div class="desc"><p>Standard logout view to just redirect to the login page</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Logout', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Logout" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Logout</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Standard logout view to just redirect to the login page&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">auth_logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">LOGOUT_REDIRECT_URL</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.Logout">Logout</a></li>
          <li>django.views.generic.base.View</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.Logout.http_method_names" class="name">var <span class="ident">http_method_names</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Logout.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Constructor. Called in the URLconf; can contain helpful extra
keyword arguments, and other things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Logout.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Logout.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor. Called in the URLconf; can contain helpful extra</span>
<span class="sd">    keyword arguments, and other things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Go through keyword arguments, and either save their values to our</span>
    <span class="c1"># instance, or raise an error.</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Logout.as_view">
    <p>def <span class="ident">as_view</span>(</p><p>cls, **initkwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Main entry point for a request-response process.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Logout.as_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Logout.as_view" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classonlymethod</span>
<span class="k">def</span> <span class="nf">as_view</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">initkwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main entry point for a request-response process.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">initkwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">http_method_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;You tried to pass in the </span><span class="si">%s</span><span class="s2"> method name as a &quot;</span>
                            <span class="s2">&quot;keyword argument to </span><span class="si">%s</span><span class="s2">(). Don&#39;t do that.&quot;</span>
                            <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">() received an invalid keyword </span><span class="si">%r</span><span class="s2">. as_view &quot;</span>
                            <span class="s2">&quot;only accepts arguments that are already &quot;</span>
                            <span class="s2">&quot;attributes of the class.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="n">initkwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;head&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">head</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request</span> <span class="o">=</span> <span class="n">request</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">view</span><span class="o">.</span><span class="n">view_class</span> <span class="o">=</span> <span class="n">cls</span>
    <span class="n">view</span><span class="o">.</span><span class="n">view_initkwargs</span> <span class="o">=</span> <span class="n">initkwargs</span>
    <span class="c1"># take name and docstring from class</span>
    <span class="n">update_wrapper</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">updated</span><span class="o">=</span><span class="p">())</span>
    <span class="c1"># and possible attributes set by decorators</span>
    <span class="c1"># like csrf_exempt from dispatch</span>
    <span class="n">update_wrapper</span><span class="p">(</span><span class="n">view</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">dispatch</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">view</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Logout.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Logout.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Logout.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># Try to dispatch to the right method; if a method doesn&#39;t exist,</span>
    <span class="c1"># defer to the error handler. Also defer to the error handler if the</span>
    <span class="c1"># request method isn&#39;t on the approved list.</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_names</span><span class="p">:</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_not_allowed</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">http_method_not_allowed</span>
    <span class="k">return</span> <span class="n">handler</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Logout.get">
    <p>def <span class="ident">get</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Logout.get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Logout.get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">auth_logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">LOGOUT_REDIRECT_URL</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Logout.http_method_not_allowed">
    <p>def <span class="ident">http_method_not_allowed</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Logout.http_method_not_allowed', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Logout.http_method_not_allowed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">http_method_not_allowed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Method Not Allowed (</span><span class="si">%s</span><span class="s1">): </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
        <span class="n">extra</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;status_code&#39;</span><span class="p">:</span> <span class="mi">405</span><span class="p">,</span>
            <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpResponseNotAllowed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_methods</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.Logout.options">
    <p>def <span class="ident">options</span>(</p><p>self, request, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles responding to requests for the OPTIONS HTTP verb.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.Logout.options', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.Logout.options" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles responding to requests for the OPTIONS HTTP verb.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpResponse</span><span class="p">()</span>
    <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_allowed_methods</span><span class="p">())</span>
    <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Content-Length&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.MyPasswordResetForm" class="name">class <span class="ident">MyPasswordResetForm</span></p>
      
  
    <div class="desc"><p>Password reset form used both for password resets and for users who have just been invited and need to set a password</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">MyPasswordResetForm</span><span class="p">(</span><span class="n">PasswordResetForm</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Password reset form used both for password resets and for users who have just been invited and need to set a password&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_override</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">subject_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_subject.txt&#39;</span><span class="p">,</span>
             <span class="n">email_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_email.html&#39;</span><span class="p">,</span>
             <span class="n">use_https</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">token_generator</span><span class="o">=</span><span class="n">default_token_generator</span><span class="p">,</span>
             <span class="n">from_email</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">html_email_template_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">extra_email_context</span><span class="o">=</span><span class="p">{},</span> <span class="n">user</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a one-use only link for resetting password and sends to the</span>
<span class="sd">        user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">send_mail</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span>
 
        <span class="k">if</span> <span class="ow">not</span> <span class="n">domain_override</span><span class="p">:</span>
            <span class="c1">#The sites framework does not necessarily give the correct URL of the deployed system so we get it from the request instead</span>
            <span class="n">current_site</span> <span class="o">=</span> <span class="n">get_current_site</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="n">site_name</span> <span class="o">=</span> <span class="n">current_site</span><span class="o">.</span><span class="n">name</span>
            <span class="n">domain</span> <span class="o">=</span> <span class="n">current_site</span><span class="o">.</span><span class="n">domain</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">site_name</span> <span class="o">=</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">domain_override</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
            <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">domain</span><span class="p">,</span>
            <span class="s1">&#39;site_name&#39;</span><span class="p">:</span> <span class="n">site_name</span><span class="p">,</span>
            <span class="s1">&#39;uid&#39;</span><span class="p">:</span> <span class="n">urlsafe_base64_encode</span><span class="p">(</span><span class="n">force_bytes</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)),</span>
            <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
            <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">token_generator</span><span class="o">.</span><span class="n">make_token</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
            <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;https&#39;</span> <span class="k">if</span> <span class="n">use_https</span> <span class="k">else</span> <span class="s1">&#39;http&#39;</span><span class="p">,</span>
            <span class="s1">&#39;extra&#39;</span> <span class="p">:</span> <span class="n">extra_email_context</span><span class="p">,</span>

        <span class="p">}</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">subject_template_name</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="c1"># Email subject *must not* contain newlines</span>
        <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">subject</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
        <span class="n">html_email</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">email_template_name</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_email</span><span class="p">)</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>

        
        <span class="n">send_mail</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">from_email</span><span class="p">,</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span> <span class="n">html_message</span><span class="o">=</span><span class="n">html_email</span><span class="p">,</span> <span class="n">fail_silently</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.MyPasswordResetForm">MyPasswordResetForm</a></li>
          <li>django.contrib.auth.forms.PasswordResetForm</li>
          <li>django.forms.forms.Form</li>
          <li>django.forms.forms.BaseForm</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.MyPasswordResetForm.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.MyPasswordResetForm.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.MyPasswordResetForm.field_order" class="name">var <span class="ident">field_order</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.MyPasswordResetForm.prefix" class="name">var <span class="ident">prefix</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.MyPasswordResetForm.errors" class="name">var <span class="ident">errors</span></p>
            

            
  
    <div class="desc"><p>Returns an ErrorDict for the data provided for the form</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.MyPasswordResetForm.media" class="name">var <span class="ident">media</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, data=None, files=None, auto_id=u&#39;id_%s&#39;, prefix=None, initial=None, error_class=&lt;class &#39;django.forms.utils.ErrorList&#39;&gt;, label_suffix=None, empty_permitted=False, field_order=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">auto_id</span><span class="o">=</span><span class="s1">&#39;id_</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">initial</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">error_class</span><span class="o">=</span><span class="n">ErrorList</span><span class="p">,</span> <span class="n">label_suffix</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">empty_permitted</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">field_order</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_bound</span> <span class="o">=</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">files</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="n">files</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">auto_id</span> <span class="o">=</span> <span class="n">auto_id</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initial</span> <span class="o">=</span> <span class="n">initial</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">error_class</span> <span class="o">=</span> <span class="n">error_class</span>
    <span class="c1"># Translators: This is the default suffix added to form field labels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_suffix</span> <span class="o">=</span> <span class="n">label_suffix</span> <span class="k">if</span> <span class="n">label_suffix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">empty_permitted</span> <span class="o">=</span> <span class="n">empty_permitted</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="bp">None</span>  <span class="c1"># Stores the errors after clean() has been called.</span>
    <span class="c1"># The base_fields class attribute is the *class-wide* definition of</span>
    <span class="c1"># fields. Because a particular *instance* of the class might want to</span>
    <span class="c1"># alter self.fields, we create self.fields here by copying base_fields.</span>
    <span class="c1"># Instances should always modify self.fields; they should not modify</span>
    <span class="c1"># self.base_fields.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_bound_fields_cache</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">order_fields</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">field_order</span> <span class="k">if</span> <span class="n">field_order</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">field_order</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.add_error">
    <p>def <span class="ident">add_error</span>(</p><p>self, field, error)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the content of <code>self._errors</code>.</p>
<p>The <code>field</code> argument is the name of the field to which the errors
should be added. If its value is None the errors will be treated as
NON_FIELD_ERRORS.</p>
<p>The <code>error</code> argument can be a single error, a list of errors, or a
dictionary that maps field names to lists of errors. What we define as
an "error" can be either a simple string or an instance of
ValidationError with its message attribute set and what we define as
list or dictionary can be an actual <code>list</code> or <code>dict</code> or an instance
of ValidationError with its <code>error_list</code> or <code>error_dict</code> attribute set.</p>
<p>If <code>error</code> is a dictionary, the <code>field</code> argument <em>must</em> be None and
errors will be added to the fields that correspond to the keys of the
dictionary.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.add_error', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.add_error" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">error</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the content of `self._errors`.</span>
<span class="sd">    The `field` argument is the name of the field to which the errors</span>
<span class="sd">    should be added. If its value is None the errors will be treated as</span>
<span class="sd">    NON_FIELD_ERRORS.</span>
<span class="sd">    The `error` argument can be a single error, a list of errors, or a</span>
<span class="sd">    dictionary that maps field names to lists of errors. What we define as</span>
<span class="sd">    an &quot;error&quot; can be either a simple string or an instance of</span>
<span class="sd">    ValidationError with its message attribute set and what we define as</span>
<span class="sd">    list or dictionary can be an actual `list` or `dict` or an instance</span>
<span class="sd">    of ValidationError with its `error_list` or `error_dict` attribute set.</span>
<span class="sd">    If `error` is a dictionary, the `field` argument *must* be None and</span>
<span class="sd">    errors will be added to the fields that correspond to the keys of the</span>
<span class="sd">    dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">):</span>
        <span class="c1"># Normalize to ValidationError and let its constructor</span>
        <span class="c1"># do the hard work of making sense of the input.</span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="s1">&#39;error_dict&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;The argument `field` must be `None` when the `error` &quot;</span>
                <span class="s2">&quot;argument contains errors for multiple fields.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">error_dict</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="p">{</span><span class="n">field</span> <span class="ow">or</span> <span class="n">NON_FIELD_ERRORS</span><span class="p">:</span> <span class="n">error</span><span class="o">.</span><span class="n">error_list</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">error_list</span> <span class="ow">in</span> <span class="n">error</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; has no field named &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">field</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">field</span> <span class="o">==</span> <span class="n">NON_FIELD_ERRORS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_class</span><span class="p">(</span><span class="n">error_class</span><span class="o">=</span><span class="s1">&#39;nonfield&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_class</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span><span class="p">[</span><span class="n">field</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">error_list</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="n">field</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.add_initial_prefix">
    <p>def <span class="ident">add_initial_prefix</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a 'initial' prefix for checking dynamic initial values</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.add_initial_prefix', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.add_initial_prefix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_initial_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add a &#39;initial&#39; prefix for checking dynamic initial values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;initial-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_prefix</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.add_prefix">
    <p>def <span class="ident">add_prefix</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field name with a prefix appended, if this Form has a
prefix set.</p>
<p>Subclasses may wish to override.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.add_prefix', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.add_prefix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field name with a prefix appended, if this Form has a</span>
<span class="sd">    prefix set.</span>
<span class="sd">    Subclasses may wish to override.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="k">else</span> <span class="n">field_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.as_p">
    <p>def <span class="ident">as_p</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns this form rendered as HTML <p>s.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.as_p', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.as_p" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">as_p</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s2">&quot;Returns this form rendered as HTML &lt;p&gt;s.&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_html_output</span><span class="p">(</span>
        <span class="n">normal_row</span><span class="o">=</span><span class="s1">&#39;&lt;p</span><span class="si">%(html_class_attr)s</span><span class="s1">&gt;</span><span class="si">%(label)s</span><span class="s1"> </span><span class="si">%(field)s%(help_text)s</span><span class="s1">&lt;/p&gt;&#39;</span><span class="p">,</span>
        <span class="n">error_row</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="n">row_ender</span><span class="o">=</span><span class="s1">&#39;&lt;/p&gt;&#39;</span><span class="p">,</span>
        <span class="n">help_text_html</span><span class="o">=</span><span class="s1">&#39; &lt;span class=&quot;helptext&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/span&gt;&#39;</span><span class="p">,</span>
        <span class="n">errors_on_separate_row</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.as_table">
    <p>def <span class="ident">as_table</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns this form rendered as HTML <tr>s -- excluding the <table></table>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.as_table', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.as_table" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">as_table</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s2">&quot;Returns this form rendered as HTML &lt;tr&gt;s -- excluding the &lt;table&gt;&lt;/table&gt;.&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_html_output</span><span class="p">(</span>
        <span class="n">normal_row</span><span class="o">=</span><span class="s1">&#39;&lt;tr</span><span class="si">%(html_class_attr)s</span><span class="s1">&gt;&lt;th&gt;</span><span class="si">%(label)s</span><span class="s1">&lt;/th&gt;&lt;td&gt;</span><span class="si">%(errors)s%(field)s%(help_text)s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">,</span>
        <span class="n">error_row</span><span class="o">=</span><span class="s1">&#39;&lt;tr&gt;&lt;td colspan=&quot;2&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">,</span>
        <span class="n">row_ender</span><span class="o">=</span><span class="s1">&#39;&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">,</span>
        <span class="n">help_text_html</span><span class="o">=</span><span class="s1">&#39;&lt;br /&gt;&lt;span class=&quot;helptext&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/span&gt;&#39;</span><span class="p">,</span>
        <span class="n">errors_on_separate_row</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.as_ul">
    <p>def <span class="ident">as_ul</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns this form rendered as HTML <li>s -- excluding the <ul></ul>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.as_ul', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.as_ul" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">as_ul</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s2">&quot;Returns this form rendered as HTML &lt;li&gt;s -- excluding the &lt;ul&gt;&lt;/ul&gt;.&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_html_output</span><span class="p">(</span>
        <span class="n">normal_row</span><span class="o">=</span><span class="s1">&#39;&lt;li</span><span class="si">%(html_class_attr)s</span><span class="s1">&gt;</span><span class="si">%(errors)s%(label)s</span><span class="s1"> </span><span class="si">%(field)s%(help_text)s</span><span class="s1">&lt;/li&gt;&#39;</span><span class="p">,</span>
        <span class="n">error_row</span><span class="o">=</span><span class="s1">&#39;&lt;li&gt;</span><span class="si">%s</span><span class="s1">&lt;/li&gt;&#39;</span><span class="p">,</span>
        <span class="n">row_ender</span><span class="o">=</span><span class="s1">&#39;&lt;/li&gt;&#39;</span><span class="p">,</span>
        <span class="n">help_text_html</span><span class="o">=</span><span class="s1">&#39; &lt;span class=&quot;helptext&quot;&gt;</span><span class="si">%s</span><span class="s1">&lt;/span&gt;&#39;</span><span class="p">,</span>
        <span class="n">errors_on_separate_row</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra form-wide cleaning after Field.clean() has been
called on every field. Any ValidationError raised by this method will
not be associated with a particular field; it will have a special-case
association with the field named '<strong>all</strong>'.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra form-wide cleaning after Field.clean() has been</span>
<span class="sd">    called on every field. Any ValidationError raised by this method will</span>
<span class="sd">    not be associated with a particular field; it will have a special-case</span>
<span class="sd">    association with the field named &#39;__all__&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all of self.data and populates self._errors and
self.cleaned_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all of self.data and populates self._errors and</span>
<span class="sd">    self.cleaned_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_errors</span> <span class="o">=</span> <span class="n">ErrorDict</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bound</span><span class="p">:</span>  <span class="c1"># Stop further processing.</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># If the form is permitted to be empty, and none of the form data has</span>
    <span class="c1"># changed from the initial data, short circuit any validation.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">empty_permitted</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_changed</span><span class="p">():</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clean_fields</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clean_form</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_post_clean</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.get_users">
    <p>def <span class="ident">get_users</span>(</p><p>self, email)</p>
    </div>
    

    
  
    <div class="desc"><p>Given an email, return matching user(s) who should receive a reset.</p>
<p>This allows subclasses to more easily customize the default policies
that prevent inactive users and users with unusable passwords from
resetting their password.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.get_users', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.get_users" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">email</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given an email, return matching user(s) who should receive a reset.</span>
<span class="sd">    This allows subclasses to more easily customize the default policies</span>
<span class="sd">    that prevent inactive users and users with unusable passwords from</span>
<span class="sd">    resetting their password.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">active_users</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
        <span class="n">email__iexact</span><span class="o">=</span><span class="n">email</span><span class="p">,</span> <span class="n">is_active</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">active_users</span> <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">has_usable_password</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.has_changed">
    <p>def <span class="ident">has_changed</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns True if data differs from initial.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.has_changed', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.has_changed" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">has_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True if data differs from initial.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changed_data</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.has_error">
    <p>def <span class="ident">has_error</span>(</p><p>self, field, code=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.has_error', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.has_error" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">has_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">code</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span>
    <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">as_data</span><span class="p">()[</span><span class="n">field</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">error</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="n">code</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.hidden_fields">
    <p>def <span class="ident">hidden_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of all the BoundField objects that are hidden fields.
Useful for manual form layout in templates.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.hidden_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.hidden_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hidden_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of all the BoundField objects that are hidden fields.</span>
<span class="sd">    Useful for manual form layout in templates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_hidden</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.is_multipart">
    <p>def <span class="ident">is_multipart</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns True if the form needs to be multipart-encoded, i.e. it has
FileInput. Otherwise, False.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.is_multipart', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.is_multipart" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_multipart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True if the form needs to be multipart-encoded, i.e. it has</span>
<span class="sd">    FileInput. Otherwise, False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">needs_multipart_form</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns True if the form has no errors. Otherwise, False. If errors are
being ignored, returns False.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns True if the form has no errors. Otherwise, False. If errors are</span>
<span class="sd">    being ignored, returns False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bound</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.non_field_errors">
    <p>def <span class="ident">non_field_errors</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns an ErrorList of errors that aren't associated with a particular
field -- i.e., from Form.clean(). Returns an empty ErrorList if there
are none.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.non_field_errors', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.non_field_errors" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">non_field_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns an ErrorList of errors that aren&#39;t associated with a particular</span>
<span class="sd">    field -- i.e., from Form.clean(). Returns an empty ErrorList if there</span>
<span class="sd">    are none.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">NON_FIELD_ERRORS</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_class</span><span class="p">(</span><span class="n">error_class</span><span class="o">=</span><span class="s1">&#39;nonfield&#39;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.order_fields">
    <p>def <span class="ident">order_fields</span>(</p><p>self, field_order)</p>
    </div>
    

    
  
    <div class="desc"><p>Rearranges the fields according to field_order.</p>
<p>field_order is a list of field names specifying the order. Fields not
included in the list are appended in the default order for backward
compatibility with subclasses not overriding field_order. If field_order
is None, all fields are kept in the order defined in the class.
Unknown fields in field_order are ignored to allow disabling fields in
form subclasses without redefining ordering.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.order_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.order_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">order_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_order</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Rearranges the fields according to field_order.</span>
<span class="sd">    field_order is a list of field names specifying the order. Fields not</span>
<span class="sd">    included in the list are appended in the default order for backward</span>
<span class="sd">    compatibility with subclasses not overriding field_order. If field_order</span>
<span class="sd">    is None, all fields are kept in the order defined in the class.</span>
<span class="sd">    Unknown fields in field_order are ignored to allow disabling fields in</span>
<span class="sd">    form subclasses without redefining ordering.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">field_order</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">field_order</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fields</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>  <span class="c1"># ignore unknown fields</span>
            <span class="k">pass</span>
    <span class="n">fields</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>  <span class="c1"># add remaining fields in original order</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.save">
    <p>def <span class="ident">save</span>(</p><p>self, domain_override=None, subject_template_name=&#39;registration/password_reset_subject.txt&#39;, email_template_name=&#39;registration/password_reset_email.html&#39;, use_https=False, token_generator=&lt;django.contrib.auth.tokens.PasswordResetTokenGenerator object at 0x7f4036287d10&gt;, from_email=None, request=None, html_email_template_name=None, extra_email_context={}, user=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Generates a one-use only link for resetting password and sends to the
user.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">domain_override</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">subject_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_subject.txt&#39;</span><span class="p">,</span>
         <span class="n">email_template_name</span><span class="o">=</span><span class="s1">&#39;registration/password_reset_email.html&#39;</span><span class="p">,</span>
         <span class="n">use_https</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">token_generator</span><span class="o">=</span><span class="n">default_token_generator</span><span class="p">,</span>
         <span class="n">from_email</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">html_email_template_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">extra_email_context</span><span class="o">=</span><span class="p">{},</span> <span class="n">user</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a one-use only link for resetting password and sends to the</span>
<span class="sd">    user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">send_mail</span>
    <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s2">&quot;email&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">domain_override</span><span class="p">:</span>
        <span class="c1">#The sites framework does not necessarily give the correct URL of the deployed system so we get it from the request instead</span>
        <span class="n">current_site</span> <span class="o">=</span> <span class="n">get_current_site</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
        <span class="n">site_name</span> <span class="o">=</span> <span class="n">current_site</span><span class="o">.</span><span class="n">name</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="n">current_site</span><span class="o">.</span><span class="n">domain</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">site_name</span> <span class="o">=</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">domain_override</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
        <span class="s1">&#39;domain&#39;</span><span class="p">:</span> <span class="n">domain</span><span class="p">,</span>
        <span class="s1">&#39;site_name&#39;</span><span class="p">:</span> <span class="n">site_name</span><span class="p">,</span>
        <span class="s1">&#39;uid&#39;</span><span class="p">:</span> <span class="n">urlsafe_base64_encode</span><span class="p">(</span><span class="n">force_bytes</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)),</span>
        <span class="s1">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span>
        <span class="s1">&#39;token&#39;</span><span class="p">:</span> <span class="n">token_generator</span><span class="o">.</span><span class="n">make_token</span><span class="p">(</span><span class="n">user</span><span class="p">),</span>
        <span class="s1">&#39;protocol&#39;</span><span class="p">:</span> <span class="s1">&#39;https&#39;</span> <span class="k">if</span> <span class="n">use_https</span> <span class="k">else</span> <span class="s1">&#39;http&#39;</span><span class="p">,</span>
        <span class="s1">&#39;extra&#39;</span> <span class="p">:</span> <span class="n">extra_email_context</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">subject_template_name</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="c1"># Email subject *must not* contain newlines</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">subject</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
    <span class="n">html_email</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">email_template_name</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_email</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span>
    
    <span class="n">send_mail</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">from_email</span><span class="p">,</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span> <span class="n">html_message</span><span class="o">=</span><span class="n">html_email</span><span class="p">,</span> <span class="n">fail_silently</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.send_mail">
    <p>def <span class="ident">send_mail</span>(</p><p>self, subject_template_name, email_template_name, context, from_email, to_email, html_email_template_name=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Sends a django.core.mail.EmailMultiAlternatives to <code>to_email</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.send_mail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.send_mail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">send_mail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subject_template_name</span><span class="p">,</span> <span class="n">email_template_name</span><span class="p">,</span>
              <span class="n">context</span><span class="p">,</span> <span class="n">from_email</span><span class="p">,</span> <span class="n">to_email</span><span class="p">,</span> <span class="n">html_email_template_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sends a django.core.mail.EmailMultiAlternatives to `to_email`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">subject_template_name</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="c1"># Email subject *must not* contain newlines</span>
    <span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">subject</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span>
    <span class="n">body</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">email_template_name</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
    <span class="n">email_message</span> <span class="o">=</span> <span class="n">EmailMultiAlternatives</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="n">body</span><span class="p">,</span> <span class="n">from_email</span><span class="p">,</span> <span class="p">[</span><span class="n">to_email</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">html_email_template_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">html_email</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">render_to_string</span><span class="p">(</span><span class="n">html_email_template_name</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">email_message</span><span class="o">.</span><span class="n">attach_alternative</span><span class="p">(</span><span class="n">html_email</span><span class="p">,</span> <span class="s1">&#39;text/html&#39;</span><span class="p">)</span>
    <span class="n">email_message</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.MyPasswordResetForm.visible_fields">
    <p>def <span class="ident">visible_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of BoundField objects that aren't hidden fields.
The opposite of the hidden_fields() method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.MyPasswordResetForm.visible_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.MyPasswordResetForm.visible_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">visible_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of BoundField objects that aren&#39;t hidden fields.</span>
<span class="sd">    The opposite of the hidden_fields() method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">is_hidden</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource" class="name">class <span class="ident">NoCustomFieldsChemregProjectResource</span></p>
      
  
    <div class="desc"><p>A class for use in related resources in cases where 
we do not want to save all or retrieve all of the custom fields such as when 
indexing the CBHCompoundBatch objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">NoCustomFieldsChemregProjectResource</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A class for use in related resources in cases where </span>
<span class="sd">    we do not want to save all or retrieve all of the custom fields such as when </span>
<span class="sd">    indexing the CBHCompoundBatch objects&quot;&quot;&quot;</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">ChemRegCustomFieldConfigResource</span><span class="p">,</span>
                                            <span class="s1">&#39;custom_field_config&#39;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="o">.</span><span class="n">Meta</span><span class="p">):</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_projects_nocfc&#39;</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.NoCustomFieldsChemregProjectResource">NoCustomFieldsChemregProjectResource</a></li>
          <li><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></li>
          <li><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.Meta" class="name">var <span class="ident">Meta</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.Meta">Meta</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.base_fields">base_fields</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.custom_field_config" class="name">var <span class="ident">custom_field_config</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.custom_field_config">custom_field_config</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.declared_fields">declared_fields</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.valid_cache_get_keys" class="name">var <span class="ident">valid_cache_get_keys</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.valid_cache_get_keys">valid_cache_get_keys</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.urls" class="name">var <span class="ident">urls</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.urls">urls</a></code>
    </p>

            
  
    <div class="desc inherited"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.alter_deserialized_detail_data">alter_deserialized_detail_data</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.alter_deserialized_list_data">alter_deserialized_list_data</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.alter_detail_data_to_serialize">alter_detail_data_to_serialize</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Currently does not do all the things done by alter list data and perhaps better not to
as this function is used to update a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Currently does not do all the things done by alter list data and perhaps better not to</span>
<span class="sd">    as this function is used to update a project </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                      <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;objects&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">bundle</span><span class="p">,]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
                      
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.alter_list_data_to_serialize">alter_list_data_to_serialize</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Here we append a list of tags to the data of the GET request if the
search fields are required</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Here we append a list of tags to the data of the GET request if the</span>
<span class="sd">    search fields are required&#39;&#39;&#39;</span>
    <span class="n">userres</span> <span class="o">=</span> <span class="n">UserResource</span><span class="p">()</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
                                      <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">userbundle</span> <span class="o">=</span> <span class="n">userres</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">userbundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userbundle</span><span class="o">.</span><span class="n">data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">alter_project_data_for_permissions</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
    
    <span class="n">names_list</span> <span class="o">=</span> <span class="p">[]</span> 
    <span class="c1">#The tabular data schema is produced here as we have a list of the fields that the user has access to here</span>
    <span class="n">schema</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="p">[</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1">#set up a restricted fields lookup for removing restricted fields from output</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;user_restricted_fieldnames&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="p">:</span> <span class="n">proj</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;users_restricted_fields&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]}</span>
    <span class="k">for</span> <span class="n">projbund</span> <span class="ow">in</span> <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">bund</span> <span class="ow">in</span> <span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;custom_field_config&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_data_fields&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">schema</span><span class="p">:</span>
                <span class="c1">#The handsontable part is the same for each project</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="n">names_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;projects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            
                <span class="c1">#We have set up the app so there is one field per project so here we are just</span>
                <span class="c1"># ensuring we know the field type, everything else can be looked up from </span>
            <span class="n">real_renderer_for_this_project</span> <span class="o">=</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;renderer_named&quot;</span><span class="p">]</span>
            <span class="n">schema</span><span class="p">[</span><span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]][</span><span class="s2">&quot;project_specific_schema&quot;</span><span class="p">][</span><span class="n">projbund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;field_type&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="n">real_renderer_for_this_project</span> <span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span> <span class="p">:</span> <span class="n">bund</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">open_or_restricted</span><span class="p">}</span>
            <span class="k">del</span> <span class="n">bund</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;handsontable&quot;</span><span class="p">]</span>
            <span class="c1">#del bund.data[&quot;users_restricted_fields&quot;]</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">TABULAR_DATA_SETTINGS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="o">!=</span> <span class="s2">&quot;schema&quot;</span><span class="p">:</span>
            <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;included_in_tables&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;default&quot;</span> <span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">names_list</span> <span class="o">+</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]}</span>
    <span class="n">bundle</span><span class="p">[</span><span class="s2">&quot;tabular_data_schema&quot;</span><span class="p">][</span><span class="s2">&quot;schema&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.api_field_from_django_field">api_field_from_django_field</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.apply_authorization_limits">apply_authorization_limits</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.apply_filters">apply_filters</a></code>
    </p>

    
  
    <div class="desc inherited"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.apply_sorting">apply_sorting</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_create_detail">authorized_create_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_create_list">authorized_create_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_delete_detail">authorized_delete_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_delete_list">authorized_delete_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_read_detail">authorized_read_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_read_list">authorized_read_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_update_detail">authorized_update_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.authorized_update_list">authorized_update_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.base_urls">base_urls</a></code>
    </p>

    
  
    <div class="desc inherited"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.build_bundle">build_bundle</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.build_filters">build_filters</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.build_schema">build_schema</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.cached_obj_get">cached_obj_get</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.cached_obj_get_list">cached_obj_get_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.can_create">can_create</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.can_delete">can_delete</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.can_update">can_update</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.check_filtering">check_filtering</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.create_identifier">create_identifier</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.create_response">create_response</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Extracts the common "which-format/serialize/return-response" cycle.
Mostly a useful shortcut/hook.
Ensures that the cache is invalidated and re saved as appropriate</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">request</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span>
    <span class="o">**</span><span class="n">response_kwargs</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    Ensures that the cache is invalidated and re saved as appropriate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                        <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span>
                        <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">desired_format</span> \
            <span class="o">==</span> <span class="s1">&#39;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&#39;</span><span class="p">:</span>
        <span class="n">rc</span><span class="p">[</span><span class="s1">&#39;Content-Disposition&#39;</span><span class="p">]</span> <span class="o">=</span> \
            <span class="s1">&#39;attachment; filename=project_data_explanation.xlsx&#39;</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;objects&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">response_kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">))</span> <span class="ow">and</span> <span class="n">response_class</span> <span class="o">==</span> <span class="n">HttpResponse</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
                <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialized</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">in</span> <span class="p">[</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">]:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;projects_list_cache&quot;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">]</span>
        <span class="n">remove_session_cached_projectlists</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">rc</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.dehydrate">dehydrate</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_flowjs_upload_url">
    <p>def <span class="ident">dehydrate_flowjs_upload_url</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.dehydrate_flowjs_upload_url">dehydrate_flowjs_upload_url</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_flowjs_upload_url', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_flowjs_upload_url" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_flowjs_upload_url</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;flowv2_upload&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;project_id&#39;</span><span class="p">:</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="p">})</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.dehydrate_resource_uri">dehydrate_resource_uri</a></code>
    </p>

    
  
    <div class="desc inherited"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.delete_detail">delete_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.delete_list">delete_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.deserialize">deserialize</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.detail_uri_kwargs">detail_uri_kwargs</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.determine_format">determine_format</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.dispatch">dispatch</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.dispatch_detail">dispatch_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.dispatch_list">dispatch_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.error_response">error_response</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.filter_value_to_python">filter_value_to_python</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.full_dehydrate">full_dehydrate</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.full_hydrate">full_hydrate</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.generate_cache_key">generate_cache_key</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_bundle_detail_data">get_bundle_detail_data</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_detail">get_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_fields">get_fields</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_list">get_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Request the list response and if asked to, use the cache
Cache is invalidated each time a project anywhere on the system is updated by a signal in cbh_core_model</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Request the list response and if asked to, use the cache</span>
<span class="sd">    Cache is invalidated each time a project anywhere on the system is updated by a signal in cbh_core_model</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;session&quot;</span><span class="p">):</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;projects_list_cache&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">serialized</span> <span class="ow">and</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="ow">or</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;do_cache&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)):</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">print</span> <span class="s2">&quot;from cache&quot;</span>
            <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span>
                            <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_multiple">get_multiple</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_object_list">get_object_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Sort the projects by modified date descending by default</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Sort the projects by modified date descending by default&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span>
                 <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="n">Prefetch</span><span class="p">(</span><span class="s1">&#39;project_type&#39;</span>
                                                                          <span class="p">))</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s1">&#39;-modified&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_resource_uri">get_resource_uri</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_schema">get_schema</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.get_via_uri">get_via_uri</a></code>
    </p>

    
  
    <div class="desc inherited"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.hydrate">hydrate</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_created_by">
    <p>def <span class="ident">hydrate_created_by</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.hydrate_created_by">hydrate_created_by</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_created_by', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_created_by" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_created_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="n">user</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.hydrate_m2m">hydrate_m2m</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.is_authenticated">is_authenticated</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.is_valid">is_valid</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.log_throttled_access">log_throttled_access</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.lookup_kwargs_with_identifiers">lookup_kwargs_with_identifiers</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.method_check">method_check</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.obj_create">obj_create</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.obj_delete">obj_delete</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.obj_delete_list">obj_delete_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.obj_delete_list_for_update">obj_delete_list_for_update</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.obj_get">obj_get</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.obj_get_list">obj_get_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.obj_update">obj_update</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.override_urls">override_urls</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.patch_detail">patch_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.patch_list">patch_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">patch_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.post_detail">post_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.post_list">post_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the project, any integrity errors from repeated names are passed up as a 409 conflict&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">post_list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.prepend_urls">prepend_urls</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.put_detail">put_detail</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.put_list">put_list</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.remove_api_resource_names">remove_api_resource_names</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.resource_uri_kwargs">resource_uri_kwargs</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.rollback">rollback</a></code>
    </p>

    
  
    <div class="desc inherited"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.save">save</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.save_m2m">save_m2m</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.save_related">save_related</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Ensure that when saving the custom field config, any integrity errors from repeated names are passed up</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that when saving the custom field config, any integrity errors from repeated names are passed up&quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">ChemregProjectResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">HttpConflict</span><span class="p">(</span><span class="s2">&quot;Project with that name already exists&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.serialize">serialize</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.should_skip_field">should_skip_field</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.throttle_check">throttle_check</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.unauthorized_result">unauthorized_result</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.update_in_place">update_in_place</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.NoCustomFieldsChemregProjectResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_api.resources.ChemregProjectResource">ChemregProjectResource</a></code>.<code><a href="#cbh_core_api.resources.ChemregProjectResource.wrap_view">wrap_view</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.NoCustomFieldsChemregProjectResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.ProjectPermissionResource" class="name">class <span class="ident">ProjectPermissionResource</span></p>
      
  
    <div class="desc"><p>Allows updating of user permissions - project owners can change who views, edits and owns their project
Data is retrieved using the codename of the</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ProjectPermissionResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Allows updating of user permissions - project owners can change who views, edits and owns their project</span>
<span class="sd">    Data is retrieved using the codename of the </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">users</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToManyField</span><span class="p">(</span><span class="s2">&quot;cbh_core_api.resources.UserResource&quot;</span><span class="p">,</span><span class="n">attribute</span><span class="o">=</span><span class="s2">&quot;user_set&quot;</span><span class="p">)</span>
    <span class="c1"># groups = fields.ToManyField(GroupResource, attribute=&quot;group_set&quot;)</span>
    <span class="n">codename</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;codename&gt;[\w\d_.-]+)/$&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
    
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_permissions&#39;</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;patch&quot;</span><span class="p">,</span> <span class="s2">&quot;put&quot;</span><span class="p">]</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">ProjectPermissionAuthorization</span><span class="p">()</span>
        <span class="n">detail_uri_name</span> <span class="o">=</span> <span class="s1">&#39;codename&#39;</span>



    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure that the m2m bundle is hydrated before continuing as this is needed for the authorization&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bundle</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
        <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="c1"># Check if they&#39;re authorized.</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">m2m_bundle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">m2m_bundle</span><span class="p">)</span>

        <span class="c1"># Save FKs just in case.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>

        <span class="c1"># Save the main object.</span>
        <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>

        <span class="c1"># Now pick up the M2M bits.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.ProjectPermissionResource">ProjectPermissionResource</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectPermissionResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectPermissionResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectPermissionResource.codename" class="name">var <span class="ident">codename</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectPermissionResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectPermissionResource.users" class="name">var <span class="ident">users</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectPermissionResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for a list of objects, generally also including
meta data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for a list of objects, generally also including</span>
<span class="sd">    meta data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.</p>
<p>Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>get_object_list</code>.</p>
<p>Returns a queryset that may have been limited by other overrides.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``get_object_list``.</span>
<span class="sd">    Returns a queryset that may have been limited by other overrides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">_clone</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;codename&gt;[\w\d_.-]+)/$&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that the m2m bundle is hydrated before continuing as this is needed for the authorization</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that the m2m bundle is hydrated before continuing as this is needed for the authorization&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectPermissionResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectPermissionResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectPermissionResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.ProjectTypeResource" class="name">class <span class="ident">ProjectTypeResource</span></p>
      
  
    <div class="desc"><p>Resource for Project Type, specifies whether this is a chemical/inventory instance etc</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ProjectTypeResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Resource for Project Type, specifies whether this is a chemical/inventory instance etc &#39;&#39;&#39;</span>
    <span class="n">copy_action_name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;Clone&quot;</span><span class="p">,</span> 
                                        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The name for how the user clones the object changes dependent on the project type, this name comes from the back end and is used in front end buttons&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config_template</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToManyField</span><span class="p">(</span><span class="s2">&quot;cbh_core_api.resources.TemplateProjectFieldResource&quot;</span><span class="p">,</span> 
        <span class="n">attribute</span><span class="o">=</span><span class="k">lambda</span> <span class="n">bundle</span><span class="p">:</span> <span class="n">get_fields</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span> <span class="p">,</span>  
        <span class="n">full</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
        <span class="n">readonly</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Template set of fields for the projects that use this project type. Acts like a class inheritance&quot;</span><span class="p">)</span>
    <span class="n">project_template</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">{},</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Full project template&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Based on the custom field config template, generate a project template that can be used in the front end&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">bun</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]:</span>
            <span class="n">bun</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_template&quot;</span><span class="p">]</span> <span class="o">=</span>  <span class="p">{</span>
                <span class="s2">&quot;project_type&quot;</span><span class="p">:</span> <span class="n">bun</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;resource_uri&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;custom_field_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s2">&quot;project_data_fields&quot;</span><span class="p">:</span> <span class="n">get_field_list</span><span class="p">(</span><span class="n">bun</span><span class="p">),</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                    <span class="p">},</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">}</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="k">def</span> <span class="nf">dehydrate_copy_action_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the copy action name for the buttons based on the project type&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">show_compounds</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clone /&lt;br/&gt; Add Structure&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Clone Item&quot;</span>



    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Setup for the project type resource. Be aware that anyone can currently update project types but we do not enable this feature in the front end&quot;&quot;&quot;</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">ProjectType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_project_types&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;patch&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;saved_search_project_type&quot;</span><span class="p">:</span> <span class="n">ALL</span><span class="p">,</span>
            <span class="s2">&quot;plate_map_project_type&quot;</span><span class="p">:</span> <span class="n">ALL</span>
        <span class="p">}</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.ProjectTypeResource">ProjectTypeResource</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectTypeResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectTypeResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectTypeResource.copy_action_name" class="name">var <span class="ident">copy_action_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectTypeResource.custom_field_config_template" class="name">var <span class="ident">custom_field_config_template</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectTypeResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectTypeResource.project_template" class="name">var <span class="ident">project_template</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.ProjectTypeResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>Based on the custom field config template, generate a project template that can be used in the front end</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Based on the custom field config template, generate a project template that can be used in the front end&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bun</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;objects&quot;</span><span class="p">]:</span>
        <span class="n">bun</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;project_template&quot;</span><span class="p">]</span> <span class="o">=</span>  <span class="p">{</span>
            <span class="s2">&quot;project_type&quot;</span><span class="p">:</span> <span class="n">bun</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;resource_uri&quot;</span><span class="p">],</span>
                <span class="s2">&quot;custom_field_config&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;project_data_fields&quot;</span><span class="p">:</span> <span class="n">get_field_list</span><span class="p">(</span><span class="n">bun</span><span class="p">),</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
            <span class="p">}</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.</p>
<p>Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.dehydrate_copy_action_name">
    <p>def <span class="ident">dehydrate_copy_action_name</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the copy action name for the buttons based on the project type</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.dehydrate_copy_action_name', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.dehydrate_copy_action_name" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_copy_action_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the copy action name for the buttons based on the project type&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">show_compounds</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Clone /&lt;br/&gt; Add Structure&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Clone Item&quot;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>get_object_list</code>.</p>
<p>Returns a queryset that may have been limited by other overrides.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``get_object_list``.</span>
<span class="sd">    Returns a queryset that may have been limited by other overrides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">_clone</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.ProjectTypeResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.ProjectTypeResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.ProjectTypeResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.SimpleResourceURIField" class="name">class <span class="ident">SimpleResourceURIField</span></p>
      
  
    <div class="desc"><p>Provide just the id field as a resource URI</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SimpleResourceURIField', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SimpleResourceURIField" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SimpleResourceURIField</span><span class="p">(</span><span class="n">fields</span><span class="o">.</span><span class="n">ApiField</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provide just the id field as a resource URI</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dehydrated_type</span> <span class="o">=</span> <span class="s1">&#39;string&#39;</span>
    <span class="n">is_related</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">self_referential</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">help_text</span> <span class="o">=</span> <span class="s1">&#39;A related resource. Can be either a URI or set of nested resource data.&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">NOT_PROVIDED</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">unique</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">use_in</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Init method very similar to a realtedresource in tastypie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SimpleResourceURIField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="n">blank</span><span class="p">,</span>
                                                     <span class="n">readonly</span><span class="o">=</span><span class="n">readonly</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="n">unique</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">use_in</span><span class="o">=</span><span class="n">use_in</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related_name</span> <span class="o">=</span> <span class="n">related_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">to</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rel_resources</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">==</span> <span class="s1">&#39;self&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">self_referential</span> <span class="o">=</span> <span class="bp">True</span>



    <span class="k">def</span> <span class="nf">contribute_to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        method very similar to a realtedresource in tastypie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SimpleResourceURIField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">contribute_to_class</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

        <span class="c1"># Check if we&#39;re self-referential and hook it up.</span>
        <span class="c1"># We can&#39;t do this quite like Django because there&#39;s no ``AppCache``</span>
        <span class="c1"># here (which I think we should avoid as long as possible).</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_referential</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">==</span> <span class="s1">&#39;self&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="n">cls</span>

    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handles conversion between the data found and the type of the field.</span>
<span class="sd">        Extending classes should override this method and provide correct</span>
<span class="sd">        data coercion.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span>
        <span class="n">resource_uri</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">()</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">resource_uri</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes data stored in the bundle for the field and returns it. Used for</span>
<span class="sd">        taking simple data and building a instance object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_related</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="c1"># We&#39;ve got an FK (or alike field) &amp; a possible parent object.</span>
                <span class="c1"># Check for it.</span>
                <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span> <span class="ow">and</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_name</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">val</span>
                <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">):</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">()</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>

            <span class="k">raise</span> <span class="n">ApiFieldError</span><span class="p">(</span>
                <span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no data and doesn&#39;t allow a default or null value.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
        <span class="c1"># New code to rerturn URI</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
        
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         method very similar to a realtedresource in tastypie</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># We need to be lazy here, because when the metaclass constructs the</span>
        <span class="c1"># Resources, other classes may not exist yet.</span>
        <span class="c1"># That said, memoize this so we never have to relookup/reimport.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span>

        <span class="c1"># It&#39;s a string. Let&#39;s figure it out.</span>
        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">:</span>
            <span class="c1"># Try to import.</span>
            <span class="n">module_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="n">module_path</span><span class="p">,</span> <span class="n">class_name</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">module_bits</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">module_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># We&#39;ve got a bare class name here, which won&#39;t work (No AppCache</span>
            <span class="c1"># to rely on). Try to throw a useful error.</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                <span class="s2">&quot;Tastypie requires a Python-style path (&lt;module.module.Class&gt;) to lazy load related resources. Only given &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">class_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;Module &#39;</span><span class="si">%s</span><span class="s2">&#39; does not appear to have a class called &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="n">module_path</span><span class="p">,</span> <span class="n">class_name</span><span class="p">))</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.SimpleResourceURIField">SimpleResourceURIField</a></li>
          <li>tastypie.fields.ApiField</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.dehydrated_type" class="name">var <span class="ident">dehydrated_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.help_text" class="name">var <span class="ident">help_text</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.is_m2m" class="name">var <span class="ident">is_m2m</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.is_related" class="name">var <span class="ident">is_related</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.self_referential" class="name">var <span class="ident">self_referential</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.api_name" class="name">var <span class="ident">api_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.default" class="name">var <span class="ident">default</span></p>
            

            
  
    <div class="desc"><p>Returns the default value for the field.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.related_name" class="name">var <span class="ident">related_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.resource_name" class="name">var <span class="ident">resource_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.to" class="name">var <span class="ident">to</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SimpleResourceURIField.to_class" class="name">var <span class="ident">to_class</span></p>
            

            
  
    <div class="desc"><p>method very similar to a realtedresource in tastypie</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SimpleResourceURIField.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, to, attribute, full=False, related_name=None, default=&lt;class tastypie.fields.NOT_PROVIDED at 0x7f4035f88ae0&gt;, null=False, blank=False, readonly=False, unique=False, help_text=None, use_in=&#39;all&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Init method very similar to a realtedresource in tastypie</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SimpleResourceURIField.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SimpleResourceURIField.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">NOT_PROVIDED</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">readonly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">unique</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">use_in</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Init method very similar to a realtedresource in tastypie</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SimpleResourceURIField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">attribute</span><span class="o">=</span><span class="n">attribute</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">default</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="n">null</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="n">blank</span><span class="p">,</span>
                                                 <span class="n">readonly</span><span class="o">=</span><span class="n">readonly</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="n">unique</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="n">help_text</span><span class="p">,</span> <span class="n">use_in</span><span class="o">=</span><span class="n">use_in</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">related_name</span> <span class="o">=</span> <span class="n">related_name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">=</span> <span class="n">to</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rel_resources</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">==</span> <span class="s1">&#39;self&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">self_referential</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SimpleResourceURIField.contribute_to_class">
    <p>def <span class="ident">contribute_to_class</span>(</p><p>self, cls, name)</p>
    </div>
    

    
  
    <div class="desc"><p>method very similar to a realtedresource in tastypie</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SimpleResourceURIField.contribute_to_class', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SimpleResourceURIField.contribute_to_class" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">contribute_to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    method very similar to a realtedresource in tastypie</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SimpleResourceURIField</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">contribute_to_class</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="c1"># Check if we&#39;re self-referential and hook it up.</span>
    <span class="c1"># We can&#39;t do this quite like Django because there&#39;s no ``AppCache``</span>
    <span class="c1"># here (which I think we should avoid as long as possible).</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">self_referential</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">to</span> <span class="o">==</span> <span class="s1">&#39;self&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_to_class</span> <span class="o">=</span> <span class="n">cls</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SimpleResourceURIField.convert">
    <p>def <span class="ident">convert</span>(</p><p>self, value)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles conversion between the data found and the type of the field.
Extending classes should override this method and provide correct
data coercion.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SimpleResourceURIField.convert', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SimpleResourceURIField.convert" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles conversion between the data found and the type of the field.</span>
<span class="sd">    Extending classes should override this method and provide correct</span>
<span class="sd">    data coercion.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span>
    <span class="n">resource_uri</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">()</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">resource_uri</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SimpleResourceURIField.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle, for_list=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Takes data from the provided object and prepares it for the
resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SimpleResourceURIField.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SimpleResourceURIField.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes data from the provided object and prepares it for the</span>
<span class="sd">    resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">current_object</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attrs</span><span class="p">:</span>
            <span class="n">previous_object</span> <span class="o">=</span> <span class="n">current_object</span>
            <span class="n">current_object</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">current_object</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">current_object</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
                    <span class="n">current_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
                    <span class="c1"># Fall out of the loop, given any further attempts at</span>
                    <span class="c1"># accesses will fail miserably.</span>
                    <span class="k">break</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                    <span class="n">current_object</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="c1"># Fall out of the loop, given any further attempts at</span>
                    <span class="c1"># accesses will fail miserably.</span>
                    <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ApiFieldError</span><span class="p">(</span><span class="s2">&quot;The object &#39;</span><span class="si">%r</span><span class="s2">&#39; has an empty attribute &#39;</span><span class="si">%s</span><span class="s2">&#39; and doesn&#39;t allow a default or null value.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">previous_object</span><span class="p">,</span> <span class="n">attr</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">current_object</span><span class="p">):</span>
            <span class="n">current_object</span> <span class="o">=</span> <span class="n">current_object</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">current_object</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SimpleResourceURIField.has_default">
    <p>def <span class="ident">has_default</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a boolean of whether this field has a default value.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SimpleResourceURIField.has_default', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SimpleResourceURIField.has_default" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">has_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a boolean of whether this field has a default value.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOT_PROVIDED</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SimpleResourceURIField.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Takes data stored in the bundle for the field and returns it. Used for
taking simple data and building a instance object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SimpleResourceURIField.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SimpleResourceURIField.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes data stored in the bundle for the field and returns it. Used for</span>
<span class="sd">    taking simple data and building a instance object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_related</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="c1"># We&#39;ve got an FK (or alike field) &amp; a possible parent object.</span>
            <span class="c1"># Check for it.</span>
            <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span> <span class="ow">and</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_name</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_obj</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">val</span>
            <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">):</span>
                    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span><span class="p">()</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_default</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">raise</span> <span class="n">ApiFieldError</span><span class="p">(</span>
            <span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no data and doesn&#39;t allow a default or null value.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">)</span>
    <span class="c1"># New code to rerturn URI</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">instance_name</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.SkinningResource" class="name">class <span class="ident">SkinningResource</span></p>
      
  
    <div class="desc"><p>URL resourcing for pulling out sitewide skinning config 
Including the schemat for use on the search page</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SkinningResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;URL resourcing for pulling out sitewide skinning config </span>
<span class="sd">    Including the schemat for use on the search page</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">tabular_data_schema</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">{},</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty dictionary, filled on the client side with the tabular data information in order to render handsontable&quot;</span><span class="p">)</span>
    <span class="n">query_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form schema and form used to render the search forms in ChemBio Hub Platform&quot;</span><span class="p">)</span>
    <span class="n">chem_query_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The chemical angular schema form for chemical search&quot;</span><span class="p">)</span>
    <span class="n">sort_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form json schema used for sorting fields&quot;</span><span class="p">)</span>
    <span class="n">hide_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form json schema used for hiding fields&quot;</span><span class="p">)</span>
    <span class="n">savedsearch_schemaform</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DictField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The angular schema form json schema used for the saved search feature&quot;</span><span class="p">)</span>
    <span class="n">filters_applied</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the filters currently active on the dataset&quot;</span><span class="p">)</span>
    <span class="n">sorts_applied</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the sorts currently active on the dataset&quot;</span><span class="p">)</span>
    <span class="n">hides_applied</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the hidden fields on the dataset&quot;</span><span class="p">)</span>

    <span class="n">filters_objects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the columns which are currently filtered&quot;</span><span class="p">)</span>
    <span class="n">sort_objects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the columns which are currently sorted&quot;</span><span class="p">)</span>
    <span class="n">hide_objects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;empty list which is filled on the front end with the columns which are currently hidden&quot;</span><span class="p">)</span>
    <span class="n">field_type_choices</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ListField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="p">[],</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;List of the fields types which the user must pick from when creating a project&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">SkinningConfig</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_skinning&#39;</span>
        <span class="c1">#authorization = Authorization()</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">,</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span> <span class="s1">&#39;put&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">dehydrate_savedsearch_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema which is used when saving a search from the settings&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">SAVED_SEARCH_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_query_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the search form angular schema form json schema from the settings&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_QUERY_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_hide_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to hide a field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_HIDE_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_sort_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to sort a field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_SORT_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_chem_query_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to run chemical search&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_CHEMICAL_QUERY_SCHEMAFORM</span>

    <span class="k">def</span> <span class="nf">dehydrate_field_type_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the field type choices from the models file which are used when adding a project</span>
<span class="sd">        todo consider moving project schemaform to the back end&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">PinnedCustomField</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.SkinningResource">SkinningResource</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.chem_query_schemaform" class="name">var <span class="ident">chem_query_schemaform</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.field_type_choices" class="name">var <span class="ident">field_type_choices</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.filters_applied" class="name">var <span class="ident">filters_applied</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.filters_objects" class="name">var <span class="ident">filters_objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.hide_objects" class="name">var <span class="ident">hide_objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.hide_schemaform" class="name">var <span class="ident">hide_schemaform</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.hides_applied" class="name">var <span class="ident">hides_applied</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.query_schemaform" class="name">var <span class="ident">query_schemaform</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.savedsearch_schemaform" class="name">var <span class="ident">savedsearch_schemaform</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.sort_objects" class="name">var <span class="ident">sort_objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.sort_schemaform" class="name">var <span class="ident">sort_schemaform</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.sorts_applied" class="name">var <span class="ident">sorts_applied</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.tabular_data_schema" class="name">var <span class="ident">tabular_data_schema</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.SkinningResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for a list of objects, generally also including
meta data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for a list of objects, generally also including</span>
<span class="sd">    meta data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.</p>
<p>Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate_chem_query_schemaform">
    <p>def <span class="ident">dehydrate_chem_query_schemaform</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pull out the angular schema form json schema from the settings which is used to run chemical search</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate_chem_query_schemaform', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate_chem_query_schemaform" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_chem_query_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to run chemical search&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_CHEMICAL_QUERY_SCHEMAFORM</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate_field_type_choices">
    <p>def <span class="ident">dehydrate_field_type_choices</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pull out the field type choices from the models file which are used when adding a project
todo consider moving project schemaform to the back end</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate_field_type_choices', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate_field_type_choices" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_field_type_choices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pull out the field type choices from the models file which are used when adding a project</span>
<span class="sd">    todo consider moving project schemaform to the back end&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">key</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">PinnedCustomField</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate_hide_schemaform">
    <p>def <span class="ident">dehydrate_hide_schemaform</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pull out the angular schema form json schema from the settings which is used to hide a field</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate_hide_schemaform', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate_hide_schemaform" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_hide_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to hide a field&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_HIDE_SCHEMAFORM</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate_query_schemaform">
    <p>def <span class="ident">dehydrate_query_schemaform</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pull out the search form angular schema form json schema from the settings</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate_query_schemaform', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate_query_schemaform" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_query_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pull out the search form angular schema form json schema from the settings&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_QUERY_SCHEMAFORM</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate_savedsearch_schemaform">
    <p>def <span class="ident">dehydrate_savedsearch_schemaform</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pull out the angular schema form json schema which is used when saving a search from the settings</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate_savedsearch_schemaform', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate_savedsearch_schemaform" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_savedsearch_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema which is used when saving a search from the settings&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">SAVED_SEARCH_SCHEMAFORM</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dehydrate_sort_schemaform">
    <p>def <span class="ident">dehydrate_sort_schemaform</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Pull out the angular schema form json schema from the settings which is used to sort a field</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dehydrate_sort_schemaform', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dehydrate_sort_schemaform" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_sort_schemaform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pull out the angular schema form json schema from the settings which is used to sort a field&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">settings</span><span class="o">.</span><span class="n">CBH_SORT_SCHEMAFORM</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>get_object_list</code>.</p>
<p>Returns a queryset that may have been limited by other overrides.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``get_object_list``.</span>
<span class="sd">    Returns a queryset that may have been limited by other overrides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">_clone</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.SkinningResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.SkinningResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.SkinningResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.TemplateProjectFieldResource" class="name">class <span class="ident">TemplateProjectFieldResource</span></p>
      
  
    <div class="desc"><p>Provides the schema information about a field that is required by front end apps</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">TemplateProjectFieldResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;Provides the schema information about a field that is required by front end apps&quot;&quot;&quot;</span>
 
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;cbh_core_model&quot;</span><span class="p">,</span><span class="s2">&quot;PinnedCustomField&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">always_return_data</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;cbh_template_fields&#39;</span>
        <span class="n">include_resource_uri</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">]</span>
        <span class="n">default_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">dehydrate_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.TemplateProjectFieldResource">TemplateProjectFieldResource</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.TemplateProjectFieldResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.TemplateProjectFieldResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.TemplateProjectFieldResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.TemplateProjectFieldResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for a list of objects, generally also including
meta data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for a list of objects, generally also including</span>
<span class="sd">    meta data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated.</p>
<p>FIXME: REMOVE BEFORE 1.0</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated.</span>
<span class="sd">    FIXME: REMOVE BEFORE 1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">apply_limits</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.</p>
<p>Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_id">
    <p>def <span class="ident">dehydrate_id</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_id', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_id" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>get_object_list</code>.</p>
<p>Returns a queryset that may have been limited by other overrides.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``get_object_list``.</span>
<span class="sd">    Returns a queryset that may have been limited by other overrides.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">_clone</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.TemplateProjectFieldResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.TemplateProjectFieldResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.TemplateProjectFieldResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.UserHydrate" class="name">class <span class="ident">UserHydrate</span></p>
      
  
    <div class="desc"><p>Abstract class to make sure each 
resource object can hydrate the user object against it</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserHydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserHydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">UserHydrate</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract class to make sure each </span>
<span class="sd">    resource object can hydrate the user object against it&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">hydrate_created_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="n">user</span>
        <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.UserHydrate">UserHydrate</a></li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserHydrate.hydrate_created_by">
    <p>def <span class="ident">hydrate_created_by</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserHydrate.hydrate_created_by', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserHydrate.hydrate_created_by" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_created_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="n">User</span> <span class="o">=</span> <span class="n">get_user_model</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">created_by</span> <span class="o">=</span> <span class="n">user</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_api.resources.UserResource" class="name">class <span class="ident">UserResource</span></p>
      
  
    <div class="desc"><p>Displays information about the User's privileges and personal data</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">UserResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Displays information about the User&#39;s privileges and personal data&#39;&#39;&#39;</span>
    <span class="n">can_view_chemreg</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the user has chemireg enabled deprecated&quot;</span><span class="p">)</span>
    <span class="n">can_view_assayreg</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the user has assayreg enabled deprecated&quot;</span><span class="p">)</span>
    <span class="n">is_logged_in</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this user in the list is the logged in user&quot;</span><span class="p">)</span>
    <span class="n">can_create_and_own_projects</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this user is allowed to create or own projects&quot;</span><span class="p">)</span>
    <span class="n">display_name</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;How we want the name of this user to be displayed on the front end&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s1">&#39;users&#39;</span>
        <span class="n">allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">]</span>
        <span class="n">excludes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;is_active&#39;</span><span class="p">]</span>
        <span class="n">authentication</span> <span class="o">=</span> <span class="n">SessionAuthentication</span><span class="p">()</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">Authorization</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;probably deprecated&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">object_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        deprecated override</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">UserResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">dehydrate_display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;How we want the username or first and last name to be displayed on the system&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">username</span>

    <span class="k">def</span> <span class="nf">dehydrate_can_create_and_own_projects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal users (denoted by their email pattern match) are allowed to add and own projects&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;cbh_core_model.add_project&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>


    <span class="k">def</span> <span class="nf">dehydrate_is_logged_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Whether the user is logged in</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">dehydrate_can_view_chemreg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;The cbh_core_model.no_chemreg role in the Django admin is used to</span>
<span class="sd">        deny access to chemreg. As superusers have all permissions  by </span>
<span class="sd">        default they would be denied access therefore we check for superuser status and allow access&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;cbh_core_model.no_chemreg&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">dehydrate_can_view_assayreg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;The cbh_core_model.no_assayreg role in the Django admin is used to</span>
<span class="sd">        deny access to assayreg. As superusers have all permissions  by </span>
<span class="sd">        default they would be denied access therefore we check for superuser status and allow access&#39;&#39;&#39;</span>

        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;cbh_core_model.no_assayreg&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_api.resources.UserResource">UserResource</a></li>
          <li>tastypie.resources.ModelResource</li>
          <li>tastypie.resources.BaseModelResource</li>
          <li>tastypie.resources.Resource</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.base_fields" class="name">var <span class="ident">base_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.can_create_and_own_projects" class="name">var <span class="ident">can_create_and_own_projects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.can_view_assayreg" class="name">var <span class="ident">can_view_assayreg</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.can_view_chemreg" class="name">var <span class="ident">can_view_chemreg</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.declared_fields" class="name">var <span class="ident">declared_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.display_name" class="name">var <span class="ident">display_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.is_logged_in" class="name">var <span class="ident">is_logged_in</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_api.resources.UserResource.urls" class="name">var <span class="ident">urls</span></p>
            

            
  
    <div class="desc"><p>The endpoints this <code>Resource</code> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <code>Api</code> class or for including directly in
a URLconf should you choose to.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, api_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="c1"># this can cause:</span>
    <span class="c1"># TypeError: object.__new__(method-wrapper) is not safe, use method-wrapper.__new__()</span>
    <span class="c1"># when trying to copy a generator used as a default. Wrap call to</span>
    <span class="c1"># generator in lambda to get around this error.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_fields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.alter_deserialized_detail_data">
    <p>def <span class="ident">alter_deserialized_detail_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.alter_deserialized_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.alter_deserialized_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.alter_deserialized_list_data">
    <p>def <span class="ident">alter_deserialized_list_data</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just after it has been received from the user &amp;
gets deserialized.</p>
<p>Useful for altering the user data before any hydration is applied.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.alter_deserialized_list_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.alter_deserialized_list_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_deserialized_list_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just after it has been received from the user &amp;</span>
<span class="sd">    gets deserialized.</span>
<span class="sd">    Useful for altering the user data before any hydration is applied.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.alter_detail_data_to_serialize">
    <p>def <span class="ident">alter_detail_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter detail data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for receiving a single bundle of data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.alter_detail_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.alter_detail_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_detail_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter detail data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for receiving a single bundle of data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.alter_list_data_to_serialize">
    <p>def <span class="ident">alter_list_data_to_serialize</span>(</p><p>self, request, data)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to alter list data just before it gets serialized &amp; sent to the user.</p>
<p>Useful for restructuring/renaming aspects of the what's going to be
sent.</p>
<p>Should accommodate for a list of objects, generally also including
meta data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.alter_list_data_to_serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.alter_list_data_to_serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">alter_list_data_to_serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to alter list data just before it gets serialized &amp; sent to the user.</span>
<span class="sd">    Useful for restructuring/renaming aspects of the what&#39;s going to be</span>
<span class="sd">    sent.</span>
<span class="sd">    Should accommodate for a list of objects, generally also including</span>
<span class="sd">    meta data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.api_field_from_django_field">
    <p>def <span class="ident">api_field_from_django_field</span>(</p><p>cls, f, default=&lt;class &#39;tastypie.fields.CharField&#39;&gt;)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the field type that would likely be associated with each
Django type.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.api_field_from_django_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.api_field_from_django_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">api_field_from_django_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the field type that would likely be associated with each</span>
<span class="sd">    Django type.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">default</span>
    <span class="n">internal_type</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;DateTimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DateTimeField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;BooleanField&#39;</span><span class="p">,</span> <span class="s1">&#39;NullBooleanField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">BooleanField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FloatField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FloatField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;DecimalField&#39;</span><span class="p">,):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">DecimalField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;IntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;PositiveSmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;SmallIntegerField&#39;</span><span class="p">,</span> <span class="s1">&#39;AutoField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">IntegerField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;FileField&#39;</span><span class="p">,</span> <span class="s1">&#39;ImageField&#39;</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">FileField</span>
    <span class="k">elif</span> <span class="n">internal_type</span> <span class="o">==</span> <span class="s1">&#39;TimeField&#39;</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">TimeField</span>
    <span class="c1"># TODO: Perhaps enable these via introspection. The reason they&#39;re not enabled</span>
    <span class="c1">#       by default is the very different ``__init__`` they have over</span>
    <span class="c1">#       the other fields.</span>
    <span class="c1"># elif internal_type == &#39;ForeignKey&#39;:</span>
    <span class="c1">#     result = ForeignKey</span>
    <span class="c1"># elif internal_type == &#39;ManyToManyField&#39;:</span>
    <span class="c1">#     result = ManyToManyField</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.apply_authorization_limits">
    <p>def <span class="ident">apply_authorization_limits</span>(</p><p>self, request, object_list)</p>
    </div>
    

    
  
    <div class="desc"><p>probably deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.apply_authorization_limits', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.apply_authorization_limits" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_authorization_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;probably deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">object_list</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.apply_filters">
    <p>def <span class="ident">apply_filters</span>(</p><p>self, request, applicable_filters)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>apply_filters</code>.</p>
<p>The default simply applies the <code>applicable_filters</code> as <code>**kwargs</code>,
but should make it possible to do more advanced things.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.apply_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.apply_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An ORM-specific implementation of ``apply_filters``.</span>
<span class="sd">    The default simply applies the ``applicable_filters`` as ``**kwargs``,</span>
<span class="sd">    but should make it possible to do more advanced things.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">applicable_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.apply_sorting">
    <p>def <span class="ident">apply_sorting</span>(</p><p>self, obj_list, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of options, apply some ORM-level sorting to the
provided <code>QuerySet</code>.</p>
<p>Looks for the <code>order_by</code> key and handles either ascending (just the
field name) or descending (the field name with a <code>-</code> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.apply_sorting', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.apply_sorting" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">apply_sorting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of options, apply some ORM-level sorting to the</span>
<span class="sd">    provided ``QuerySet``.</span>
<span class="sd">    Looks for the ``order_by`` key and handles either ascending (just the</span>
<span class="sd">    field name) or descending (the field name with a ``-`` in front).</span>
<span class="sd">    The field name should be the resource field, **NOT** model field.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;order_by&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;order_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;sort_by&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="c1"># Nothing to alter the order. Return what we&#39;ve got.</span>
            <span class="k">return</span> <span class="n">obj_list</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;&#39;sort_by&#39; is a deprecated parameter. Please use &#39;order_by&#39; instead.&quot;</span><span class="p">)</span>
            <span class="n">parameter_name</span> <span class="o">=</span> <span class="s1">&#39;sort_by&#39;</span>
    <span class="n">order_by_args</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">order_bits</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">parameter_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">order_bits</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="n">order_bits</span> <span class="o">=</span> <span class="p">[</span><span class="n">order_bits</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">order_by</span> <span class="ow">in</span> <span class="n">order_bits</span><span class="p">:</span>
        <span class="n">order_by_bits</span> <span class="o">=</span> <span class="n">order_by</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">):</span>
            <span class="n">field_name</span> <span class="o">=</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">order</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;No matching &#39;</span><span class="si">%s</span><span class="s2">&#39; field for ordering on.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow ordering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSortError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for ordering with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="n">order_by_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">order_by_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])))</span>
    <span class="k">return</span> <span class="n">obj_list</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="o">*</span><span class="n">order_by_args</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_create_detail">
    <p>def <span class="ident">authorized_create_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_create_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_create_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_create_list">
    <p>def <span class="ident">authorized_create_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to POST this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_create_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_create_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_create_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to POST this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">create_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_delete_detail">
    <p>def <span class="ident">authorized_delete_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">auth_result</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_delete_list">
    <p>def <span class="ident">authorized_delete_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to DELETE this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to DELETE this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">delete_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_read_detail">
    <p>def <span class="ident">authorized_read_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_read_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_read_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_read_list">
    <p>def <span class="ident">authorized_read_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to GET this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_read_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_read_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_read_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to GET this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">read_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_update_detail">
    <p>def <span class="ident">authorized_update_detail</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_update_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_update_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Unauthorized</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.authorized_update_list">
    <p>def <span class="ident">authorized_update_list</span>(</p><p>self, object_list, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking of permissions to see if the user has authorization
to PUT this resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.authorized_update_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.authorized_update_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">authorized_update_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking of permissions to see if the user has authorization</span>
<span class="sd">    to PUT this resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authorization</span><span class="o">.</span><span class="n">update_list</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Unauthorized</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unauthorized_result</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">auth_result</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.base_urls">
    <p>def <span class="ident">base_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>The standard URLs this <code>Resource</code> should respond to.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.base_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.base_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">base_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The standard URLs this ``Resource`` should respond to.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_list&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_list&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/schema</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_schema&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_schema&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/set/(?P&lt;</span><span class="si">%s</span><span class="s2">_list&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;get_multiple&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_get_multiple&quot;</span><span class="p">),</span>
        <span class="n">url</span><span class="p">(</span><span class="s2">r&quot;^(?P&lt;resource_name&gt;</span><span class="si">%s</span><span class="s2">)/(?P&lt;</span><span class="si">%s</span><span class="s2">&gt;.*?)</span><span class="si">%s</span><span class="s2">$&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="n">trailing_slash</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrap_view</span><span class="p">(</span><span class="s1">&#39;dispatch_detail&#39;</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api_dispatch_detail&quot;</span><span class="p">),</span>
    <span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.build_bundle">
    <p>def <span class="ident">build_bundle</span>(</p><p>self, obj=None, data=None, request=None, objects_saved=None, via_uri=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given either an object, a data dictionary or both, builds a <code>Bundle</code>
for use throughout the <code>dehydrate/hydrate</code> cycle.</p>
<p>If no object is provided, an empty object from
<code>Resource._meta.object_class</code> is created so that attempts to access
<code>bundle.obj</code> do not fail.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.build_bundle', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.build_bundle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_bundle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">objects_saved</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">via_uri</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given either an object, a data dictionary or both, builds a ``Bundle``</span>
<span class="sd">    for use throughout the ``dehydrate/hydrate`` cycle.</span>
<span class="sd">    If no object is provided, an empty object from</span>
<span class="sd">    ``Resource._meta.object_class`` is created so that attempts to access</span>
<span class="sd">    ``bundle.obj`` do not fail.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">Bundle</span><span class="p">(</span>
        <span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span>
        <span class="n">objects_saved</span><span class="o">=</span><span class="n">objects_saved</span><span class="p">,</span>
        <span class="n">via_uri</span><span class="o">=</span><span class="n">via_uri</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.build_filters">
    <p>def <span class="ident">build_filters</span>(</p><p>self, filters=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<code>['startswith', 'exact', 'lte']</code>), the <code>ALL</code> constant or the
<code>ALL_WITH_RELATIONS</code> constant.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.build_filters', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.build_filters" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of filters, create the necessary ORM-level filters.</span>
<span class="sd">    Keys should be resource fields, **NOT** model fields.</span>
<span class="sd">    Valid values are either a list of Django filter types (i.e.</span>
<span class="sd">    ``[&#39;startswith&#39;, &#39;exact&#39;, &#39;lte&#39;]``), the ``ALL`` constant or the</span>
<span class="sd">    ``ALL_WITH_RELATIONS`` constant.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># At the declarative level:</span>
    <span class="c1">#     filtering = {</span>
    <span class="c1">#         &#39;resource_field_name&#39;: [&#39;exact&#39;, &#39;startswith&#39;, &#39;endswith&#39;, &#39;contains&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_2&#39;: [&#39;exact&#39;, &#39;gt&#39;, &#39;gte&#39;, &#39;lt&#39;, &#39;lte&#39;, &#39;range&#39;],</span>
    <span class="c1">#         &#39;resource_field_name_3&#39;: ALL,</span>
    <span class="c1">#         &#39;resource_field_name_4&#39;: ALL_WITH_RELATIONS,</span>
    <span class="c1">#         ...</span>
    <span class="c1">#     }</span>
    <span class="c1"># Accepts the filters as a dict. None by default, meaning no filters.</span>
    <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">qs_filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s1">&#39;queryset&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Get the possible query terms from the current QuerySet.</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_terms</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">QUERY_TERMS</span>
    <span class="k">if</span> <span class="n">django</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span> <span class="ow">and</span> <span class="n">GeometryField</span><span class="p">:</span>
        <span class="n">query_terms</span> <span class="o">=</span> <span class="n">query_terms</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">GeometryField</span><span class="o">.</span><span class="n">class_lookups</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="n">filter_expr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">LOOKUP_SEP</span><span class="p">)</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">filter_type</span> <span class="o">=</span> <span class="s1">&#39;exact&#39;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="c1"># It&#39;s not a field we know about. Move along citizen.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">)</span> <span class="ow">and</span> <span class="n">filter_bits</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">query_terms</span><span class="p">:</span>
            <span class="n">filter_type</span> <span class="o">=</span> <span class="n">filter_bits</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">lookup_bits</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_value_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">db_field_name</span> <span class="o">=</span> <span class="n">LOOKUP_SEP</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lookup_bits</span><span class="p">)</span>
        <span class="n">qs_filter</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">db_field_name</span><span class="p">,</span> <span class="n">LOOKUP_SEP</span><span class="p">,</span> <span class="n">filter_type</span><span class="p">)</span>
        <span class="n">qs_filters</span><span class="p">[</span><span class="n">qs_filter</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">qs_filters</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.build_schema">
    <p>def <span class="ident">build_schema</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <code>schema/</code> endpoint to describe what will be available.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.build_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.build_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">build_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of all the fields on the resource and some</span>
<span class="sd">    properties about those fields.</span>
<span class="sd">    Used by the ``schema/`` endpoint to describe what will be available.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;fields&#39;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s1">&#39;default_format&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">,</span>
        <span class="s1">&#39;allowed_list_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;allowed_detail_http_methods&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">,</span>
        <span class="s1">&#39;default_limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;ordering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">ordering</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;filtering&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span>
    <span class="c1"># Skip assigning pk_field_name for non-model resources</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">queryset</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">name</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">pk_field_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">default</span><span class="p">,</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span><span class="p">,</span>
            <span class="s1">&#39;nullable&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">,</span>
            <span class="s1">&#39;blank&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">,</span>
            <span class="s1">&#39;readonly&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">unique</span><span class="p">,</span>
            <span class="s1">&#39;primary_key&#39;</span><span class="p">:</span> <span class="bp">True</span> <span class="k">if</span> <span class="n">field_name</span> <span class="o">==</span> <span class="n">pk_field_name</span> <span class="k">else</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">verbose_name</span> <span class="ow">or</span> <span class="n">field_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">),</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_many&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">related_type</span> <span class="o">=</span> <span class="s1">&#39;to_one&#39;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">related_type</span>
            <span class="n">uri</span> <span class="o">=</span> <span class="n">reverse</span><span class="p">(</span><span class="s1">&#39;api_get_schema&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;api_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="n">field_object</span><span class="o">.</span><span class="n">to_class</span><span class="p">()</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">})</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fields&#39;</span><span class="p">][</span><span class="n">field_name</span><span class="p">][</span><span class="s1">&#39;related_schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.cached_obj_get">
    <p>def <span class="ident">cached_obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.cached_obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.cached_obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cached_bundle</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cached_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">cached_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cached_bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.cached_obj_get_list">
    <p>def <span class="ident">cached_obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A version of <code>obj_get_list</code> that uses the cache as a means to get
commonly-accessed data faster.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.cached_obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.cached_obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">cached_obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A version of ``obj_get_list`` that uses the cache as a means to get</span>
<span class="sd">    commonly-accessed data faster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_cache_key</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_list</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">obj_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="n">obj_list</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obj_list</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.can_create">
    <p>def <span class="ident">can_create</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>post</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.can_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.can_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``post`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;post&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.can_delete">
    <p>def <span class="ident">can_delete</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>delete</code> is within <code>allowed_methods</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.can_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.can_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``delete`` is within ``allowed_methods``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;delete&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.can_update">
    <p>def <span class="ident">can_update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks to ensure <code>put</code> is within <code>allowed_methods</code>.</p>
<p>Used when hydrating related data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.can_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.can_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">can_update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks to ensure ``put`` is within ``allowed_methods``.</span>
<span class="sd">    Used when hydrating related data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_allowed_methods</span><span class="p">)</span>
    <span class="k">return</span> <span class="s1">&#39;put&#39;</span> <span class="ow">in</span> <span class="n">allowed</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.check_filtering">
    <p>def <span class="ident">check_filtering</span>(</p><p>self, field_name, filter_type=u&#39;exact&#39;, filter_bits=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a field name, a optional filter type and an optional list of
additional relations, determine if a field can be filtered on.</p>
<p>If a filter does not meet the needed conditions, it should raise an
<code>InvalidFilterError</code>.</p>
<p>If the filter meets the conditions, a list of attribute names (not
field names) will be returned.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.check_filtering', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.check_filtering" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_filtering</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filter_type</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">,</span> <span class="n">filter_bits</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a field name, a optional filter type and an optional list of</span>
<span class="sd">    additional relations, determine if a field can be filtered on.</span>
<span class="sd">    If a filter does not meet the needed conditions, it should raise an</span>
<span class="sd">    ``InvalidFilterError``.</span>
<span class="sd">    If the filter meets the conditions, a list of attribute names (not</span>
<span class="sd">    field names) will be returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filter_bits</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">filter_bits</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not allow filtering.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s an allowed lookup type.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">):</span>
        <span class="c1"># Must be an explicit whitelist.</span>
        <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is not an allowed filter on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">filter_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field has no &#39;attribute&#39; for searching with.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="c1"># Check to see if it&#39;s a relational lookup and if that&#39;s allowed.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;is_related&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;The &#39;</span><span class="si">%s</span><span class="s2">&#39; field does not support relations.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">filtering</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">==</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidFilterError</span><span class="p">(</span><span class="s2">&quot;Lookups are not allowed more than one level deep on the &#39;</span><span class="si">%s</span><span class="s2">&#39; field.&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">)</span>
        <span class="c1"># Recursively descend through the remaining lookups in the filter,</span>
        <span class="c1"># if any. We should ensure that all along the way, we&#39;re allowed</span>
        <span class="c1"># to filter on that field by the related resource.</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">+</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">check_filtering</span><span class="p">(</span><span class="n">filter_bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">filter_type</span><span class="p">,</span> <span class="n">filter_bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.create_identifier">
    <p>def <span class="ident">create_identifier</span>(</p><p>self, obj)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.create_identifier', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.create_identifier" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">u&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span> <span class="n">get_module_name</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">_meta</span><span class="p">),</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.create_response">
    <p>def <span class="ident">create_response</span>(</p><p>self, request, data, response_class=&lt;class &#39;django.http.response.HttpResponse&#39;&gt;, **response_kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-response" cycle.</p>
<p>Mostly a useful shortcut/hook.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.create_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.create_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">create_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">HttpResponse</span><span class="p">,</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-response&quot; cycle.</span>
<span class="sd">    Mostly a useful shortcut/hook.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">),</span> <span class="o">**</span><span class="n">response_kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dehydrate">
    <p>def <span class="ident">dehydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow a final manipulation of data once all fields/methods</span>
<span class="sd">    have built out the dehydrated data.</span>
<span class="sd">    Useful if you need to access more than one dehydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dehydrate_can_create_and_own_projects">
    <p>def <span class="ident">dehydrate_can_create_and_own_projects</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Internal users (denoted by their email pattern match) are allowed to add and own projects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dehydrate_can_create_and_own_projects', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dehydrate_can_create_and_own_projects" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_can_create_and_own_projects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Internal users (denoted by their email pattern match) are allowed to add and own projects&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;cbh_core_model.add_project&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dehydrate_can_view_assayreg">
    <p>def <span class="ident">dehydrate_can_view_assayreg</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>The cbh_core_model.no_assayreg role in the Django admin is used to
deny access to assayreg. As superusers have all permissions  by 
default they would be denied access therefore we check for superuser status and allow access</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dehydrate_can_view_assayreg', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dehydrate_can_view_assayreg" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_can_view_assayreg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;The cbh_core_model.no_assayreg role in the Django admin is used to</span>
<span class="sd">    deny access to assayreg. As superusers have all permissions  by </span>
<span class="sd">    default they would be denied access therefore we check for superuser status and allow access&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;cbh_core_model.no_assayreg&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dehydrate_can_view_chemreg">
    <p>def <span class="ident">dehydrate_can_view_chemreg</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>The cbh_core_model.no_chemreg role in the Django admin is used to
deny access to chemreg. As superusers have all permissions  by 
default they would be denied access therefore we check for superuser status and allow access</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dehydrate_can_view_chemreg', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dehydrate_can_view_chemreg" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_can_view_chemreg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;The cbh_core_model.no_chemreg role in the Django admin is used to</span>
<span class="sd">    deny access to chemreg. As superusers have all permissions  by </span>
<span class="sd">    default they would be denied access therefore we check for superuser status and allow access&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="n">perms</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;cbh_core_model.no_chemreg&quot;</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dehydrate_display_name">
    <p>def <span class="ident">dehydrate_display_name</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>How we want the username or first and last name to be displayed on the system</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dehydrate_display_name', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dehydrate_display_name" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_display_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;How we want the username or first and last name to be displayed on the system&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">username</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dehydrate_is_logged_in">
    <p>def <span class="ident">dehydrate_is_logged_in</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Whether the user is logged in</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dehydrate_is_logged_in', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dehydrate_is_logged_in" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_is_logged_in</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Whether the user is logged in</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dehydrate_resource_uri">
    <p>def <span class="ident">dehydrate_resource_uri</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>For the automatically included <code>resource_uri</code> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dehydrate_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dehydrate_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dehydrate_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For the automatically included ``resource_uri`` field, dehydrate</span>
<span class="sd">    the URI for the given bundle.</span>
<span class="sd">    Returns empty string if no URI can be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.delete_detail">
    <p>def <span class="ident">delete_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a single resource/object.</p>
<p>Calls <code>obj_delete</code>.</p>
<p>If the resource is deleted, return <code>HttpNoContent</code> (204 No Content).
If the resource did not exist, return <code>Http404</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.delete_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.delete_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a single resource/object.</span>
<span class="sd">    Calls ``obj_delete``.</span>
<span class="sd">    If the resource is deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    If the resource did not exist, return ``Http404`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Manually construct the bundle here, since we don&#39;t want to try to</span>
    <span class="c1"># delete an empty instance.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="n">Bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">NotFound</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.delete_list">
    <p>def <span class="ident">delete_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Destroys a collection of resources/objects.</p>
<p>Calls <code>obj_delete_list</code>.</p>
<p>If the resources are deleted, return <code>HttpNoContent</code> (204 No Content).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Destroys a collection of resources/objects.</span>
<span class="sd">    Calls ``obj_delete_list``.</span>
<span class="sd">    If the resources are deleted, return ``HttpNoContent`` (204 No Content).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.deserialize">
    <p>def <span class="ident">deserialize</span>(</p><p>self, request, data, format=u&#39;application/json&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <code>CONTENT_TYPE</code> header,
falling back to <code>application/json</code> if not provided.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.deserialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.deserialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;application/json&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a format, deserializes the given data.</span>
<span class="sd">    It relies on the request properly sending a ``CONTENT_TYPE`` header,</span>
<span class="sd">    falling back to ``application/json`` if not provided.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="n">format</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">deserialized</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.detail_uri_kwargs">
    <p>def <span class="ident">detail_uri_kwargs</span>(</p><p>self, bundle_or_obj)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a <code>Bundle</code> or an object (typically a <code>Model</code> instance),
it returns the extra kwargs needed to generate a detail URI.</p>
<p>By default, it uses the model's <code>pk</code> in order to create the URI.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.detail_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.detail_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">detail_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a ``Bundle`` or an object (typically a ``Model`` instance),</span>
<span class="sd">    it returns the extra kwargs needed to generate a detail URI.</span>
<span class="sd">    By default, it uses the model&#39;s ``pk`` in order to create the URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.determine_format">
    <p>def <span class="ident">determine_format</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Used to determine the desired format.</p>
<p>Largely relies on <code>tastypie.utils.mime.determine_format</code> but here
as a point of extension.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.determine_format', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.determine_format" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used to determine the desired format.</span>
<span class="sd">    Largely relies on ``tastypie.utils.mime.determine_format`` but here</span>
<span class="sd">    as a point of extension.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="p">,</span> <span class="n">default_format</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dispatch">
    <p>def <span class="ident">dispatch</span>(</p><p>self, request_type, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dispatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dispatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_type</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the common operations (allowed HTTP method, authentication,</span>
<span class="sd">    throttling, method lookup) surrounding most CRUD interactions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">allowed_methods</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_allowed_methods&quot;</span> <span class="o">%</span> <span class="n">request_type</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">:</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="p">[</span><span class="s1">&#39;HTTP_X_HTTP_METHOD_OVERRIDE&#39;</span><span class="p">]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="n">allowed_methods</span><span class="p">)</span>
    <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">request_method</span><span class="p">,</span> <span class="n">request_type</span><span class="p">),</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># All clear. Process the request.</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_put</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Add the throttled request.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># If what comes back isn&#39;t a ``HttpResponse``, assume that the</span>
    <span class="c1"># request was accepted and that some action occurred. This also</span>
    <span class="c1"># prevents Django from freaking out.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dispatch_detail">
    <p>def <span class="ident">dispatch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dispatch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dispatch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on</span>
<span class="sd">    a single resource.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;detail&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.dispatch_list">
    <p>def <span class="ident">dispatch_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <code>Resource.dispatch</code> for the heavy-lifting.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.dispatch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.dispatch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispatch_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over</span>
<span class="sd">    the entire list of resources.</span>
<span class="sd">    Relies on ``Resource.dispatch`` for the heavy-lifting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dispatch</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.error_response">
    <p>def <span class="ident">error_response</span>(</p><p>self, request, errors, response_class=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Extracts the common "which-format/serialize/return-error-response"
cycle.</p>
<p>Should be used as much as possible to return errors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.error_response', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.error_response" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">error_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the common &quot;which-format/serialize/return-error-response&quot;</span>
<span class="sd">    cycle.</span>
<span class="sd">    Should be used as much as possible to return errors.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">response_class</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">response_class</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span>
    <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">determine_format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">BadRequest</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># Fall through to default handler below</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># JSONP can cause extra breakage.</span>
            <span class="n">desired_format</span> <span class="o">=</span> <span class="s1">&#39;application/json&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">desired_format</span><span class="p">:</span>
        <span class="n">desired_format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">default_format</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">errors</span><span class="p">,</span> <span class="n">desired_format</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">BadRequest</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">error</span> <span class="o">=</span> <span class="s2">&quot;Additional errors occurred, but serialization of those errors failed.&quot;</span>
        <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">:</span>
            <span class="n">error</span> <span class="o">+=</span> <span class="s2">&quot; </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span>
        <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;text/plain&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response_class</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="n">serialized</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="n">build_content_type</span><span class="p">(</span><span class="n">desired_format</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.filter_value_to_python">
    <p>def <span class="ident">filter_value_to_python</span>(</p><p>self, value, field_name, filters, filter_expr, filter_type)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn the string <code>value</code> into a python object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.filter_value_to_python', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.filter_value_to_python" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">filter_value_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">filter_expr</span><span class="p">,</span>
        <span class="n">filter_type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Turn the string ``value`` into a python object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Simple values</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">string_to_python</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="c1"># Split on &#39;,&#39; if not empty string and either an in or range filter.</span>
    <span class="k">if</span> <span class="n">filter_type</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> <span class="s1">&#39;range&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">filters</span><span class="p">,</span> <span class="s1">&#39;getlist&#39;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">filters</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="n">filter_expr</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.full_dehydrate">
    <p>def <span class="ident">full_dehydrate</span>(</p><p>self, bundle, for_list=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a bundle with an object instance, extract the information from it
to populate the resource.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.full_dehydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.full_dehydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a bundle with an object instance, extract the information from it</span>
<span class="sd">    to populate the resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span>
    <span class="n">api_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="n">resource_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span>
    <span class="c1"># Dehydrate each field.</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># If it&#39;s not for use in this mode, skip</span>
        <span class="n">field_use_in</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">use_in</span>
        <span class="k">if</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_use_in</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field_use_in</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_use_in</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span> <span class="k">if</span> <span class="n">for_list</span> <span class="k">else</span> <span class="s1">&#39;detail&#39;</span><span class="p">]:</span>
                <span class="k">continue</span>
        <span class="c1"># A touch leaky but it makes URI resolution work.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrated_type</span> <span class="o">==</span> <span class="s1">&#39;related&#39;</span><span class="p">:</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">api_name</span> <span class="o">=</span> <span class="n">api_name</span>
            <span class="n">field_object</span><span class="o">.</span><span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_name</span>
        <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="n">for_list</span><span class="p">)</span>
        <span class="c1"># Check for an optional method to do further dehydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dehydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.full_hydrate">
    <p>def <span class="ident">full_hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.full_hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.full_hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a populated bundle, distill it and turn it back into</span>
<span class="sd">    a full-fledged object instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
            <span class="c1"># NOTE: We only get back a bundle when it is related field.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Bundle</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                <span class="c1"># We need to avoid populating M2M data here as that will</span>
                <span class="c1"># cause things to blow up.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="c1"># NOTE: A bug fix in Django (ticket #18153) fixes incorrect behavior</span>
                        <span class="c1"># which Tastypie was relying on.  To fix this, we store value.obj to</span>
                        <span class="c1"># be saved later in save_related.</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span><span class="p">):</span>
                            <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="p">[</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">obj</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.generate_cache_key">
    <p>def <span class="ident">generate_cache_key</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.generate_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.generate_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a unique-enough cache key.</span>
<span class="sd">    This is based off the current api_name/resource_name/args/kwargs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">smooshed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
    <span class="c1"># Use a list plus a ``.join()`` because it&#39;s faster than concatenation.</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">),</span> <span class="s1">&#39;:&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">smooshed</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_bundle_detail_data">
    <p>def <span class="ident">get_bundle_detail_data</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Convenience method to return the <code>detail_uri_name</code> attribute off
<code>bundle.obj</code>.</p>
<p>Usually just accesses <code>bundle.obj.pk</code> by default.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_bundle_detail_data', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_bundle_detail_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_bundle_detail_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convenience method to return the ``detail_uri_name`` attribute off</span>
<span class="sd">    ``bundle.obj``.</span>
<span class="sd">    Usually just accesses ``bundle.obj.pk`` by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_detail">
    <p>def <span class="ident">get_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a single serialized resource.</p>
<p>Calls <code>cached_obj_get/obj_get</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a single serialized resource.</span>
<span class="sd">    Calls ``cached_obj_get/obj_get`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_fields">
    <p>def <span class="ident">get_fields</span>(</p><p>cls, fields=None, excludes=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_fields</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">excludes</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given any explicit fields to include and fields to exclude, add</span>
<span class="sd">    additional fields based on the associated model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">final_fields</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="n">fields</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="n">excludes</span> <span class="o">=</span> <span class="n">excludes</span> <span class="ow">or</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">final_fields</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="c1"># If the field name is already present, skip</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">cls</span><span class="o">.</span><span class="n">base_fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is not present in explicit field listing, skip</span>
        <span class="k">if</span> <span class="n">fields</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># If field is in exclude list, skip</span>
        <span class="k">if</span> <span class="n">excludes</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">excludes</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">should_skip_field</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="n">api_field_class</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">api_field_from_django_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;attribute&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s1">&#39;help_text&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">help_text</span><span class="p">,</span>
            <span class="s1">&#39;verbose_name&#39;</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;null&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">unique</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">null</span> <span class="ow">and</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;blank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">get_internal_type</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;TextField&#39;</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">has_default</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">default</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;auto_now_add&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">auto_now_add</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">api_field_class</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">final_fields</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">instance_name</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span>
    <span class="k">return</span> <span class="n">final_fields</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_list">
    <p>def <span class="ident">get_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources.</p>
<p>Calls <code>obj_get_list</code> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources.</span>
<span class="sd">    Calls ``obj_get_list`` to provide the data, then handles that result</span>
<span class="sd">    set and serializes it.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: Uncached for now. Invalidation that works for everyone may be</span>
    <span class="c1">#       impossible.</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">sorted_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_sorting</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">)</span>
    <span class="n">paginator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">paginator_class</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="n">sorted_objects</span><span class="p">,</span> <span class="n">resource_uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(),</span> <span class="n">limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span> <span class="n">max_limit</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">max_limit</span><span class="p">,</span> <span class="n">collection_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="n">paginator</span><span class="o">.</span><span class="n">page</span><span class="p">()</span>
    <span class="c1"># Dehydrate the bundles in preparation for serialization.</span>
    <span class="n">bundles</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">),</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="n">to_be_serialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">bundles</span>
    <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_multiple">
    <p>def <span class="ident">get_multiple</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <code>obj_get</code> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_multiple', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_multiple" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_multiple</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized list of resources based on the identifiers</span>
<span class="sd">    from the URL.</span>
<span class="sd">    Calls ``obj_get`` to fetch only the objects requested. This method</span>
<span class="sd">    only responds to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Rip apart the list then iterate.</span>
    <span class="n">kwarg_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">_list&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span>
    <span class="n">obj_identifiers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">kwarg_name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">not_found</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">base_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">obj_identifiers</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">base_bundle</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="n">identifier</span><span class="p">})</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">ObjectDoesNotExist</span><span class="p">,</span> <span class="n">Unauthorized</span><span class="p">):</span>
            <span class="n">not_found</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="n">objects</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">not_found</span><span class="p">):</span>
        <span class="n">object_list</span><span class="p">[</span><span class="s1">&#39;not_found&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">not_found</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">object_list</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_object_list">
    <p>def <span class="ident">get_object_list</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>deprecated override</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_object_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_object_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_object_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    deprecated override</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">UserResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_resource_uri">
    <p>def <span class="ident">get_resource_uri</span>(</p><p>self, bundle_or_obj=None, url_name=u&#39;api_dispatch_list&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles generating a resource URI.</p>
<p>If the <code>bundle_or_obj</code> argument is not provided, it builds the URI
for the list endpoint.</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it builds the URI for
the detail endpoint.</p>
<p>Return the generated URI. If that URI can not be reversed (not found
in the URLconf), it will return an empty string.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_resource_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_resource_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_resource_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">url_name</span><span class="o">=</span><span class="s1">&#39;api_dispatch_list&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles generating a resource URI.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is not provided, it builds the URI</span>
<span class="sd">    for the list endpoint.</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it builds the URI for</span>
<span class="sd">    the detail endpoint.</span>
<span class="sd">    Return the generated URI. If that URI can not be reversed (not found</span>
<span class="sd">    in the URLconf), it will return an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">url_name</span> <span class="o">=</span> <span class="s1">&#39;api_dispatch_detail&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_reverse_url</span><span class="p">(</span><span class="n">url_name</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">resource_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">NoReverseMatch</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_schema">
    <p>def <span class="ident">get_schema</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <code>build_schema</code> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_schema', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_schema" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a serialized form of the schema of the resource.</span>
<span class="sd">    Calls ``build_schema`` to generate the data. This method only responds</span>
<span class="sd">    to HTTP GET.</span>
<span class="sd">    Should return a HttpResponse (200 OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;get&#39;</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">throttle_check</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_throttled_access</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_schema</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.get_via_uri">
    <p>def <span class="ident">get_via_uri</span>(</p><p>self, uri, request=None)</p>
    </div>
    

    
  
    <div class="desc"><p>This pulls apart the salient bits of the URI and populates the
resource via a <code>obj_get</code>.</p>
<p>Optionally accepts a <code>request</code>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.get_via_uri', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.get_via_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_via_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This pulls apart the salient bits of the URI and populates the</span>
<span class="sd">    resource via a ``obj_get``.</span>
<span class="sd">    Optionally accepts a ``request``.</span>
<span class="sd">    If you need custom behavior based on other portions of the URI,</span>
<span class="sd">    simply override this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">get_script_prefix</span><span class="p">()</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="k">if</span> <span class="n">prefix</span> <span class="ow">and</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">):</span>
        <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:]</span>
    <span class="c1"># We mangle the path a bit further &amp; run URL resolution against *only*</span>
    <span class="c1"># the current class. This ought to prevent bad URLs from resolving to</span>
    <span class="c1"># incorrect data.</span>
    <span class="n">found_at</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="o">.</span><span class="n">rfind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">found_at</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;An incorrect URL was provided &#39;</span><span class="si">%s</span><span class="s2">&#39; for the &#39;</span><span class="si">%s</span><span class="s2">&#39; resource.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span><span class="p">))</span>
    <span class="n">chomped_uri</span> <span class="o">=</span> <span class="n">chomped_uri</span><span class="p">[</span><span class="n">found_at</span><span class="p">:]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">url_resolver</span> <span class="ow">in</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;urls&#39;</span><span class="p">,</span> <span class="p">[]):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">url_resolver</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">chomped_uri</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">view</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">Resolver404</span><span class="p">(</span><span class="s2">&quot;URI not found in &#39;self.urls&#39;.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">Resolver404</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;The URL provided &#39;</span><span class="si">%s</span><span class="s2">&#39; was not a link to a valid resource.&quot;</span> <span class="o">%</span> <span class="n">uri</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.hydrate">
    <p>def <span class="ident">hydrate</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook to allow an initial manipulation of data before all methods/fields
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.hydrate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.hydrate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook to allow an initial manipulation of data before all methods/fields</span>
<span class="sd">    have built out the hydrated data.</span>
<span class="sd">    Useful if you need to access more than one hydrated field or want</span>
<span class="sd">    to annotate on additional data.</span>
<span class="sd">    Must return the modified bundle.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.hydrate_m2m">
    <p>def <span class="ident">hydrate_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Populate the ManyToMany data on the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.hydrate_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.hydrate_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">hydrate_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Populate the ManyToMany data on the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">HydrationError</span><span class="p">(</span><span class="s2">&quot;You must call &#39;full_hydrate&#39; before attempting to run &#39;hydrate_m2m&#39; on </span><span class="si">%r</span><span class="s2">.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="c1"># Note that we only hydrate the data, leaving the instance</span>
            <span class="c1"># unmodified. It&#39;s up to the user&#39;s code to handle this.</span>
            <span class="c1"># The ``ModelResource`` provides a working baseline</span>
            <span class="c1"># in this regard.</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">field_name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.is_authenticated">
    <p>def <span class="ident">is_authenticated</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <code>authentication</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.is_authenticated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.is_authenticated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_authenticated</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user is authenticated and dealing with</span>
<span class="sd">    unauthenticated users.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``authentication`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Authenticate the request as needed.</span>
    <span class="n">auth_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">is_authenticated</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">auth_result</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">auth_result</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">auth_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.is_valid">
    <p>def <span class="ident">is_valid</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the data provided by the user is valid.</p>
<p>Mostly a hook, this uses class assigned to <code>validation</code> from
<code>Resource._meta</code>.</p>
<p>If validation fails, an error is raised with the error messages
serialized inside it.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.is_valid', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.is_valid" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the data provided by the user is valid.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``validation`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    If validation fails, an error is raised with the error messages</span>
<span class="sd">    serialized inside it.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">validation</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">errors</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.log_throttled_access">
    <p>def <span class="ident">log_throttled_access</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the recording of the user's access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.log_throttled_access', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.log_throttled_access" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">log_throttled_access</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the recording of the user&#39;s access for throttling purposes.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">accessed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">url</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">get_full_path</span><span class="p">(),</span> <span class="n">request_method</span><span class="o">=</span><span class="n">request_method</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.lookup_kwargs_with_identifiers">
    <p>def <span class="ident">lookup_kwargs_with_identifiers</span>(</p><p>self, bundle, kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Kwargs here represent uri identifiers Ex: /repos/<user_id>/<repo_name>/
We need to turn those identifiers into Python objects for generating
lookup parameters that can find them in the DB</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.lookup_kwargs_with_identifiers', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.lookup_kwargs_with_identifiers" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Kwargs here represent uri identifiers Ex: /repos/&lt;user_id&gt;/&lt;repo_name&gt;/</span>
<span class="sd">    We need to turn those identifiers into Python objects for generating</span>
<span class="sd">    lookup parameters that can find them in the DB</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">model</span><span class="p">()</span>
    <span class="c1"># Override data values, we rely on uri identifiers</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># We&#39;re going to manually hydrate, as opposed to calling</span>
    <span class="c1"># ``full_hydrate``, to ensure we don&#39;t try to flesh out related</span>
    <span class="c1"># resources &amp; keep things speedy.</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">identifier</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">identifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">field_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span>
        <span class="c1"># Skip readonly or related fields.</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span> <span class="ow">is</span> <span class="bp">True</span> <span class="ow">or</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Check for an optional method to do further hydration.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;hydrate_</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">identifier</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="n">bundle</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">lookup_kwargs</span><span class="p">[</span><span class="n">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">lookup_kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.method_check">
    <p>def <span class="ident">method_check</span>(</p><p>self, request, allowed=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <code>allowed</code> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like::</p>
<div class="codehilite"><pre><span></span># The most generic lookup.
self.method_check(request, self._meta.allowed_methods)

# A lookup against what&#39;s allowed for list-type methods.
self.method_check(request, self._meta.list_allowed_methods)

# A useful check when creating a new endpoint that only handles
# GET.
self.method_check(request, [&#39;get&#39;])
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.method_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.method_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">method_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">allowed</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ensures that the HTTP method used on the request is allowed to be</span>
<span class="sd">    handled by the resource.</span>
<span class="sd">    Takes an ``allowed`` parameter, which should be a list of lowercase</span>
<span class="sd">    HTTP methods to check against. Usually, this looks like::</span>
<span class="sd">        # The most generic lookup.</span>
<span class="sd">        self.method_check(request, self._meta.allowed_methods)</span>
<span class="sd">        # A lookup against what&#39;s allowed for list-type methods.</span>
<span class="sd">        self.method_check(request, self._meta.list_allowed_methods)</span>
<span class="sd">        # A useful check when creating a new endpoint that only handles</span>
<span class="sd">        # GET.</span>
<span class="sd">        self.method_check(request, [&#39;get&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">allowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">allowed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">request_method</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">allows</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">meth</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">meth</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="o">==</span> <span class="s2">&quot;options&quot;</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">request_method</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMethodNotAllowed</span><span class="p">(</span><span class="n">allows</span><span class="p">)</span>
        <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Allow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">allows</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">request_method</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.obj_create">
    <p>def <span class="ident">obj_create</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_create</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.obj_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.obj_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_create``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.obj_delete">
    <p>def <span class="ident">obj_delete</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.obj_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.obj_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.obj_delete_list">
    <p>def <span class="ident">obj_delete_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.obj_delete_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.obj_delete_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_delete_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.obj_delete_list_for_update">
    <p>def <span class="ident">obj_delete_list_for_update</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_delete_list_for_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.obj_delete_list_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.obj_delete_list_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_delete_list_for_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_delete_list_for_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objects_to_delete</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">deletable_objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_list</span><span class="p">(</span><span class="n">objects_to_delete</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">deletable_objects</span><span class="p">,</span> <span class="s1">&#39;delete&#39;</span><span class="p">):</span>
        <span class="c1"># It&#39;s likely a ``QuerySet``. Call ``.delete()`` for efficiency.</span>
        <span class="n">deletable_objects</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">authed_obj</span> <span class="ow">in</span> <span class="n">deletable_objects</span><span class="p">:</span>
            <span class="n">authed_obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.obj_get">
    <p>def <span class="ident">obj_get</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get</code>.</p>
<p>Takes optional <code>kwargs</code>, which are used to narrow the query to find
the instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.obj_get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.obj_get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get``.</span>
<span class="sd">    Takes optional ``kwargs``, which are used to narrow the query to find</span>
<span class="sd">    the instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># prevents FieldError when looking up nested resources containing extra data</span>
    <span class="n">field_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_all_field_names</span><span class="p">()</span>
    <span class="n">field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">field_names</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">object_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">stringified_kwargs</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">DoesNotExist</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find an instance of &#39;</span><span class="si">%s</span><span class="s2">&#39; which matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">object_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MultipleObjectsReturned</span><span class="p">(</span><span class="s2">&quot;More than &#39;</span><span class="si">%s</span><span class="s2">&#39; matched &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">stringified_kwargs</span><span class="p">))</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">object_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_detail</span><span class="p">(</span><span class="n">object_list</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.obj_get_list">
    <p>def <span class="ident">obj_get_list</span>(</p><p>self, bundle, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_get_list</code>.</p>
<p>Takes an optional <code>request</code> object, whose <code>GET</code> dictionary can be
used to narrow the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.obj_get_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.obj_get_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_get_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_get_list``.</span>
<span class="sd">    Takes an optional ``request`` object, whose ``GET`` dictionary can be</span>
<span class="sd">    used to narrow the query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">):</span>
        <span class="c1"># Grab a mutable copy.</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># Update with the provided kwargs.</span>
    <span class="n">filters</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">applicable_filters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_filters</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">applicable_filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">authorized_read_list</span><span class="p">(</span><span class="n">objects</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid resource lookup data provided (mismatched type).&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.obj_update">
    <p>def <span class="ident">obj_update</span>(</p><p>self, bundle, skip_errors=False, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>obj_update</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.obj_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.obj_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">obj_update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``obj_update``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bundle_detail_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">arg_detail_data</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle_detail_data</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">arg_detail_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">str</span><span class="p">(</span><span class="n">bundle_detail_data</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">(</span><span class="n">arg_detail_data</span><span class="p">)):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lookup_kwargs_with_identifiers</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># if there is trouble hydrating the data, fall back to just</span>
            <span class="c1"># using kwargs by itself (usually it only contains a &quot;pk&quot; key</span>
            <span class="c1"># and this will work fine.</span>
            <span class="n">lookup_kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">lookup_kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NotFound</span><span class="p">(</span><span class="s2">&quot;A model instance matching the provided arguments could not be found.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="n">skip_errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.override_urls">
    <p>def <span class="ident">override_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Deprecated. Will be removed by v1.0.0. Please use <code>prepend_urls</code> instead.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.override_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.override_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">override_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deprecated. Will be removed by v1.0.0. Please use ``prepend_urls`` instead.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.patch_detail">
    <p>def <span class="ident">patch_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates a resource in-place.</p>
<p>Calls <code>obj_update</code>.</p>
<p>If the resource is updated, return <code>HttpAccepted</code> (202 Accepted).
If the resource did not exist, return <code>HttpNotFound</code> (404 Not Found).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.patch_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.patch_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">patch_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a resource in-place.</span>
<span class="sd">    Calls ``obj_update``.</span>
<span class="sd">    If the resource is updated, return ``HttpAccepted`` (202 Accepted).</span>
<span class="sd">    If the resource did not exist, return ``HttpNotFound`` (404 Not Found).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">convert_post_to_patch</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># We want to be able to validate the update, but we can&#39;t just pass</span>
    <span class="c1"># the partial data into the validator since all data needs to be</span>
    <span class="c1"># present. Instead, we basically simulate a PUT by pulling out the</span>
    <span class="c1"># original data and updating it in-place.</span>
    <span class="c1"># So first pull out the original object. This is essentially</span>
    <span class="c1"># ``get_detail``.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cached_obj_get</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotFound</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">MultipleObjectsReturned</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpMultipleChoices</span><span class="p">(</span><span class="s2">&quot;More than one resource is found at this URI.&quot;</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Now update the bundle in-place.</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update_in_place</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
        <span class="c1"># because we might have changed a prefetched field</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpAccepted</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.patch_list">
    <p>def <span class="ident">patch_list</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An ORM-specific implementation of <code>patch_list</code>.</p>
<p>Necessary because PATCH should be atomic (all-success or all-fail)
and the only way to do this neatly is at the database level.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.patch_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.patch_list" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">assigned</span><span class="o">=</span><span class="n">available_attrs</span><span class="p">(</span><span class="n">func</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">with</span> <span class="bp">self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.post_detail">
    <p>def <span class="ident">post_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people's data models
aren't self-referential.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.post_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.post_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new subcollection of the resource under a resource.</span>
<span class="sd">    This is not implemented by default because most people&#39;s data models</span>
<span class="sd">    aren&#39;t self-referential.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNotImplemented</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.post_list">
    <p>def <span class="ident">post_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new resource/object with the provided data.</p>
<p>Calls <code>obj_create</code> with the provided data and returns a response
with the new resource's location.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.post_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.post_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">post_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new resource/object with the provided data.</span>
<span class="sd">    Calls ``obj_create`` with the provided data and returns a response</span>
<span class="sd">    with the new resource&#39;s location.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.prepend_urls">
    <p>def <span class="ident">prepend_urls</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>A hook for adding your own URLs or matching before the default URLs.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.prepend_urls', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.prepend_urls" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepend_urls</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A hook for adding your own URLs or matching before the default URLs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.put_detail">
    <p>def <span class="ident">put_detail</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <code>obj_update</code> with the provided data first, but falls back to
<code>obj_create</code> if the object does not already exist.</p>
<p>If a new resource is created, return <code>HttpCreated</code> (201 Created).
If <code>Meta.always_return_data = True</code>, there will be a populated body
of serialized data.</p>
<p>If an existing resource is modified and
<code>Meta.always_return_data = False</code> (default), return <code>HttpNoContent</code>
(204 No Content).
If an existing resource is modified and
<code>Meta.always_return_data = True</code>, return <code>HttpAccepted</code> (200
OK).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.put_detail', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.put_detail" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_detail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Either updates an existing resource or creates a new one with the</span>
<span class="sd">    provided data.</span>
<span class="sd">    Calls ``obj_update`` with the provided data first, but falls back to</span>
<span class="sd">    ``obj_create`` if the object does not already exist.</span>
<span class="sd">    If a new resource is created, return ``HttpCreated`` (201 Created).</span>
<span class="sd">    If ``Meta.always_return_data = True``, there will be a populated body</span>
<span class="sd">    of serialized data.</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = False`` (default), return ``HttpNoContent``</span>
<span class="sd">    (204 No Content).</span>
<span class="sd">    If an existing resource is modified and</span>
<span class="sd">    ``Meta.always_return_data = True``, return ``HttpAccepted`` (200</span>
<span class="sd">    OK).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">deserialized</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Invalidate prefetched_objects_cache for bundled object</span>
            <span class="c1"># because we might have changed a prefetched field</span>
            <span class="n">updated_bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_prefetched_objects_cache</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">NotFound</span><span class="p">,</span> <span class="n">MultipleObjectsReturned</span><span class="p">):</span>
        <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">location</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource_uri</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">updated_bundle</span><span class="p">)</span>
            <span class="n">updated_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_detail_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">updated_bundle</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpCreated</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.put_list">
    <p>def <span class="ident">put_list</span>(</p><p>self, request, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Replaces a collection of resources with another collection.</p>
<p>Calls <code>delete_list</code> to clear out the collection then <code>obj_create</code>
with the provided the data to create the new collection.</p>
<p>Return <code>HttpNoContent</code> (204 No Content) if
<code>Meta.always_return_data = False</code> (default).</p>
<p>Return <code>HttpAccepted</code> (200 OK) if
<code>Meta.always_return_data = True</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.put_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.put_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">put_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replaces a collection of resources with another collection.</span>
<span class="sd">    Calls ``delete_list`` to clear out the collection then ``obj_create``</span>
<span class="sd">    with the provided the data to create the new collection.</span>
<span class="sd">    Return ``HttpNoContent`` (204 No Content) if</span>
<span class="sd">    ``Meta.always_return_data = False`` (default).</span>
<span class="sd">    Return ``HttpAccepted`` (200 OK) if</span>
<span class="sd">    ``Meta.always_return_data = True``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;application/json&#39;</span><span class="p">))</span>
    <span class="n">deserialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_list_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">deserialized</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s2">&quot;Invalid data sent: missing &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">)</span>
    <span class="n">basic_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">obj_delete_list_for_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">basic_bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="n">bundles_seen</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">object_data</span> <span class="ow">in</span> <span class="n">deserialized</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">]:</span>
        <span class="n">bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">object_data</span><span class="p">),</span> <span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>
        <span class="c1"># Attempt to be transactional, deleting any previously created</span>
        <span class="c1"># objects if validation fails.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj_create</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">bundle</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">kwargs</span><span class="p">))</span>
            <span class="n">bundles_seen</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ImmediateHttpResponse</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">bundles_seen</span><span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">always_return_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpNoContent</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="p">{</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">collection_name</span><span class="p">:</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">full_dehydrate</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">for_list</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bundles_seen</span>
            <span class="p">]</span>
        <span class="p">}</span>
        <span class="n">to_be_serialized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">alter_list_data_to_serialize</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">to_be_serialized</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.remove_api_resource_names">
    <p>def <span class="ident">remove_api_resource_names</span>(</p><p>self, url_dict)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a dictionary of regex matches from a URLconf, removes
<code>api_name</code> and/or <code>resource_name</code> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example::</p>
<div class="codehilite"><pre><span></span>Model.objects.filter(**self.remove_api_resource_names(matches))
</pre></div></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.remove_api_resource_names', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.remove_api_resource_names" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_api_resource_names</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a dictionary of regex matches from a URLconf, removes</span>
<span class="sd">    ``api_name`` and/or ``resource_name`` if found.</span>
<span class="sd">    This is useful for converting URLconf matches into something suitable</span>
<span class="sd">    for data lookup. For example::</span>
<span class="sd">        Model.objects.filter(**self.remove_api_resource_names(matches))</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs_subset</span> <span class="o">=</span> <span class="n">url_dict</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">,</span> <span class="s1">&#39;resource_name&#39;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="n">kwargs_subset</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">kwargs_subset</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.resource_uri_kwargs">
    <p>def <span class="ident">resource_uri_kwargs</span>(</p><p>self, bundle_or_obj=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Builds a dictionary of kwargs to help generate URIs.</p>
<p>Automatically provides the <code>Resource.Meta.resource_name</code> (and
optionally the <code>Resource.Meta.api_name</code> if populated by an <code>Api</code>
object).</p>
<p>If the <code>bundle_or_obj</code> argument is provided, it calls
<code>Resource.detail_uri_kwargs</code> for additional bits to create</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.resource_uri_kwargs', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.resource_uri_kwargs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resource_uri_kwargs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle_or_obj</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Builds a dictionary of kwargs to help generate URIs.</span>
<span class="sd">    Automatically provides the ``Resource.Meta.resource_name`` (and</span>
<span class="sd">    optionally the ``Resource.Meta.api_name`` if populated by an ``Api``</span>
<span class="sd">    object).</span>
<span class="sd">    If the ``bundle_or_obj`` argument is provided, it calls</span>
<span class="sd">    ``Resource.detail_uri_kwargs`` for additional bits to create</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;resource_name&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">resource_name</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;api_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">api_name</span>
    <span class="k">if</span> <span class="n">bundle_or_obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">detail_uri_kwargs</span><span class="p">(</span><span class="n">bundle_or_obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">kwargs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.rollback">
    <p>def <span class="ident">rollback</span>(</p><p>self, bundles)</p>
    </div>
    

    
  
    <div class="desc"><p>A ORM-specific implementation of <code>rollback</code>.</p>
<p>Given the list of bundles, delete all models pertaining to those
bundles.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.rollback', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.rollback" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">rollback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundles</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A ORM-specific implementation of ``rollback``.</span>
<span class="sd">    Given the list of bundles, delete all models pertaining to those</span>
<span class="sd">    bundles.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">bundle</span> <span class="ow">in</span> <span class="n">bundles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
            <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.save">
    <p>def <span class="ident">save</span>(</p><p>self, bundle, skip_errors=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">,</span> <span class="n">skip_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bundle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">skip_errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">errors</span><span class="p">))</span>
    <span class="c1"># Check if they&#39;re authorized.</span>
    <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">pk</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_update_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">authorized_create_detail</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_object_list</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save FKs just in case.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_related</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="c1"># Save the main object.</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span> <span class="ow">or</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span><span class="p">:</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="c1"># Now pick up the M2M bits.</span>
    <span class="n">m2m_bundle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hydrate_m2m</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_m2m</span><span class="p">(</span><span class="n">m2m_bundle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bundle</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.save_m2m">
    <p>def <span class="ident">save_m2m</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn't a part of the main <code>save</code> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.save_m2m', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.save_m2m" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_m2m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related M2M data.</span>
<span class="sd">    Due to the way Django works, the M2M data must be handled after the</span>
<span class="sd">    main instance, which is why this isn&#39;t a part of the main ``save`` bits.</span>
<span class="sd">    Currently slightly inefficient in that it will clear out the whole</span>
<span class="sd">    relation and recreate the related data as needed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the manager.</span>
        <span class="n">related_mngr</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">six</span><span class="o">.</span><span class="n">string_types</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">callable</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">):</span>
            <span class="n">related_mngr</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">(</span><span class="n">bundle</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">related_mngr</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">related_mngr</span><span class="p">,</span> <span class="s1">&#39;clear&#39;</span><span class="p">):</span>
            <span class="c1"># FIXME: Dupe the original bundle, copy in the new object &amp;</span>
            <span class="c1">#        check the perms on that (using the related resource)?</span>
            <span class="c1"># Clear it out, just to be safe.</span>
            <span class="n">related_mngr</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">related_objs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">related_bundle</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">]:</span>
            <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
            <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
            <span class="n">updated_related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">,</span>
                <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">,</span>
                <span class="n">via_uri</span><span class="o">=</span><span class="n">related_bundle</span><span class="o">.</span><span class="n">via_uri</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="p">)</span>
            <span class="n">related_objs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">updated_related_bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_mngr</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="n">related_objs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.save_related">
    <p>def <span class="ident">save_related</span>(</p><p>self, bundle)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the saving of related non-M2M data.</p>
<p>Calling assigning <code>child.parent = parent</code> &amp; then calling
<code>Child.save</code> isn't good enough to make sure the <code>parent</code>
is saved.</p>
<p>To get around this, we go through all our related fields &amp;
call <code>save</code> on them if they have related, non-M2M data.
M2M data is handled by the <code>ModelResource.save_m2m</code> method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.save_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.save_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_related</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bundle</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the saving of related non-M2M data.</span>
<span class="sd">    Calling assigning ``child.parent = parent`` &amp; then calling</span>
<span class="sd">    ``Child.save`` isn&#39;t good enough to make sure the ``parent``</span>
<span class="sd">    is saved.</span>
<span class="sd">    To get around this, we go through all our related fields &amp;</span>
<span class="sd">    call ``save`` on them if they have related, non-M2M data.</span>
<span class="sd">    M2M data is handled by the ``ModelResource.save_m2m`` method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_related</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">is_m2m</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">readonly</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">field_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Get the object.</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
            <span class="c1"># Django 1.8: unset related objects default to None, no error</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c1"># We didn&#39;t get it, so maybe we created it but haven&#39;t saved it</span>
        <span class="k">if</span> <span class="n">related_obj</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">related_obj</span> <span class="o">=</span> <span class="n">bundle</span><span class="o">.</span><span class="n">related_objects_to_save</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
            <span class="c1"># this might be a reverse relation, so we need to save this</span>
            <span class="c1"># model, attach it to the related object, and save the related</span>
            <span class="c1"># object.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">bundle</span><span class="p">):</span>
                <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">related_obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">,</span> <span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">related_resource</span> <span class="o">=</span> <span class="n">field_object</span><span class="o">.</span><span class="n">get_related_resource</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
        <span class="c1"># Before we build the bundle &amp; try saving it, let&#39;s make sure we</span>
        <span class="c1"># haven&#39;t already saved it.</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="n">obj_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_identifier</span><span class="p">(</span><span class="n">related_obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span><span class="p">:</span>
                <span class="c1"># It&#39;s already been saved. We&#39;re done here.</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">field_name</span><span class="p">],</span> <span class="s1">&#39;keys&#39;</span><span class="p">):</span>
                <span class="c1"># Only build &amp; save if there&#39;s data, not just a URI.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field_name</span><span class="p">),</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">full_hydrate</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
            <span class="k">elif</span> <span class="n">field_object</span><span class="o">.</span><span class="n">related_name</span><span class="p">:</span>
                <span class="c1"># This condition probably means a URI for a reverse</span>
                <span class="c1"># relation was provided.</span>
                <span class="n">related_bundle</span> <span class="o">=</span> <span class="n">related_resource</span><span class="o">.</span><span class="n">build_bundle</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">related_obj</span><span class="p">,</span>
                    <span class="n">request</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">request</span><span class="p">,</span>
                    <span class="n">objects_saved</span><span class="o">=</span><span class="n">bundle</span><span class="o">.</span><span class="n">objects_saved</span>
                <span class="p">)</span>
                <span class="n">related_resource</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">related_bundle</span><span class="p">)</span>
                <span class="n">related_obj</span> <span class="o">=</span> <span class="n">related_bundle</span><span class="o">.</span><span class="n">obj</span>
        <span class="k">if</span> <span class="n">related_obj</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">bundle</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">field_object</span><span class="o">.</span><span class="n">attribute</span><span class="p">,</span> <span class="n">related_obj</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.serialize">
    <p>def <span class="ident">serialize</span>(</p><p>self, request, data, format, options=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <code>Serializer</code> from <code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.serialize', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.serialize" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a request, data and a desired format, produces a serialized</span>
<span class="sd">    version suitable for transfer over the wire.</span>
<span class="sd">    Mostly a hook, this uses the ``Serializer`` from ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="s1">&#39;text/javascript&#39;</span> <span class="ow">in</span> <span class="n">format</span><span class="p">:</span>
        <span class="c1"># get JSONP callback name. default to &quot;callback&quot;</span>
        <span class="n">callback</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;callback&#39;</span><span class="p">,</span> <span class="s1">&#39;callback&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_valid_jsonp_callback_value</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadRequest</span><span class="p">(</span><span class="s1">&#39;JSONP callback name is invalid.&#39;</span><span class="p">)</span>
        <span class="n">options</span><span class="p">[</span><span class="s1">&#39;callback&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callback</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.should_skip_field">
    <p>def <span class="ident">should_skip_field</span>(</p><p>cls, field)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.should_skip_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.should_skip_field" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">should_skip_field</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a Django model field, return if it should be included in the</span>
<span class="sd">    contributed ApiFields.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ignore certain fields (related fields).</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;rel&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.throttle_check">
    <p>def <span class="ident">throttle_check</span>(</p><p>self, request)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <code>throttle</code> from
<code>Resource._meta</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.throttle_check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.throttle_check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">throttle_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles checking if the user should be throttled.</span>
<span class="sd">    Mostly a hook, this uses class assigned to ``throttle`` from</span>
<span class="sd">    ``Resource._meta``.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">get_identifier</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c1"># Check to see if they should be throttled.</span>
    <span class="n">throttle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">throttle</span><span class="o">.</span><span class="n">should_be_throttled</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">throttle</span><span class="p">:</span>
        <span class="c1"># Throttle limit exceeded.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">HttpTooManyRequests</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">throttle</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">throttle</span><span class="p">,</span> <span class="n">datetime</span><span class="p">):</span>
            <span class="n">response</span><span class="p">[</span><span class="s1">&#39;Retry-After&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">format_date_time</span><span class="p">(</span><span class="n">mktime</span><span class="p">(</span><span class="n">throttle</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
        <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.unauthorized_result">
    <p>def <span class="ident">unauthorized_result</span>(</p><p>self, exception)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.unauthorized_result', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.unauthorized_result" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unauthorized_result</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exception</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ImmediateHttpResponse</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpUnauthorized</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.update_in_place">
    <p>def <span class="ident">update_in_place</span>(</p><p>self, request, original_bundle, new_data)</p>
    </div>
    

    
  
    <div class="desc"><p>Update the object in original_bundle in-place using new_data.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.update_in_place', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.update_in_place" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_in_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="p">,</span> <span class="n">new_data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the object in original_bundle in-place using new_data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">dict_strip_unicode_keys</span><span class="p">(</span><span class="n">new_data</span><span class="p">))</span>
    <span class="c1"># Now we&#39;ve got a bundle with the new data sitting in it and we&#39;re</span>
    <span class="c1"># we&#39;re basically in the same spot as a PUT request. SO the rest of this</span>
    <span class="c1"># function is cribbed from put_detail.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">alter_deserialized_detail_data</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">original_bundle</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">detail_uri_name</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bundle_detail_data</span><span class="p">(</span><span class="n">original_bundle</span><span class="p">),</span>
        <span class="s1">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj_update</span><span class="p">(</span><span class="n">bundle</span><span class="o">=</span><span class="n">original_bundle</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_api.resources.UserResource.wrap_view">
    <p>def <span class="ident">wrap_view</span>(</p><p>self, view)</p>
    </div>
    

    
  
    <div class="desc"><p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <code>BadRequest</code> or an exception with a <code>response</code> attr
are seen, there is special handling to either present a message back
to the user or return the response traveling with the exception.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_api.resources.UserResource.wrap_view', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_api.resources.UserResource.wrap_view" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">wrap_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wraps methods so they can be called in a more functional way as well</span>
<span class="sd">    as handling exceptions better.</span>
<span class="sd">    Note that if ``BadRequest`` or an exception with a ``response`` attr</span>
<span class="sd">    are seen, there is special handling to either present a message back</span>
<span class="sd">    to the user or return the response traveling with the exception.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nd">@csrf_exempt</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">callback</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="c1"># Our response can vary based on a number of factors, use</span>
            <span class="c1"># the cache class to determine what we should ``Vary`` on so</span>
            <span class="c1"># caches won&#39;t return the wrong (cached) version.</span>
            <span class="n">varies</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="p">,</span> <span class="s2">&quot;varies&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">if</span> <span class="n">varies</span><span class="p">:</span>
                <span class="n">patch_vary_headers</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">varies</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cacheable</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">():</span>
                    <span class="c1"># If the request is cacheable and we have a</span>
                    <span class="c1"># ``Cache-Control`` available then patch the header.</span>
                    <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">cache_control</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">is_ajax</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">has_header</span><span class="p">(</span><span class="s2">&quot;Cache-Control&quot;</span><span class="p">):</span>
                <span class="c1"># IE excessively caches XMLHttpRequests, so we&#39;re disabling</span>
                <span class="c1"># the browser cache here.</span>
                <span class="c1"># See http://www.enhanceie.com/ie/bugs.asp for details.</span>
                <span class="n">patch_cache_control</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">no_cache</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">response</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">BadRequest</span><span class="p">,</span> <span class="n">fields</span><span class="o">.</span><span class="n">ApiFieldError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="n">sanitize</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">messages</span><span class="p">)}</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">error_response</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">response_class</span><span class="o">=</span><span class="n">http</span><span class="o">.</span><span class="n">HttpBadRequest</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Prevent muting non-django&#39;s exceptions</span>
            <span class="c1"># i.e. RequestException from &#39;requests&#39; library</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s1">&#39;response&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="p">,</span> <span class="n">HttpResponse</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span>
            <span class="c1"># A real, non-expected exception.</span>
            <span class="c1"># Handle the case where the full traceback is more helpful</span>
            <span class="c1"># than the serialized error.</span>
            <span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;TASTYPIE_FULL_DEBUG&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="c1"># Re-raise the error to get a proper traceback when the error</span>
            <span class="c1"># happend during a test case</span>
            <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">META</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SERVER_NAME&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;testserver&#39;</span><span class="p">:</span>
                <span class="k">raise</span>
            <span class="c1"># Rather than re-raising, we&#39;re going to things similar to</span>
            <span class="c1"># what Django does. The difference is returning a serialized</span>
            <span class="c1"># error message.</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_500</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wrapper</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
