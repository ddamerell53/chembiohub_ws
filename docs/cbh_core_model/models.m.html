<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>cbh_core_model.models API documentation</title>
    <meta name="description" content="Core models for ChemBio Hub platform, covering objects required for configuration of the tool such a..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.FLOWJS_AUTO_DELETE_CHUNKS">FLOWJS_AUTO_DELETE_CHUNKS</a></li>
    <li class="mono"><a href="#cbh_core_model.models.FLOWJS_PATH">FLOWJS_PATH</a></li>
    <li class="mono"><a href="#cbh_core_model.models.FLOWJS_REMOVE_FILES_ON_DELETE">FLOWJS_REMOVE_FILES_ON_DELETE</a></li>
    <li class="mono"><a href="#cbh_core_model.models.OPEN">OPEN</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PERMISSION_CODENAME_SEPARATOR">PERMISSION_CODENAME_SEPARATOR</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PROJECT_PERMISSIONS">PROJECT_PERMISSIONS</a></li>
    <li class="mono"><a href="#cbh_core_model.models.RESTRICTED">RESTRICTED</a></li>
    <li class="mono"><a href="#cbh_core_model.models.RESTRICTION_CHOICES">RESTRICTION_CHOICES</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.flow_file_chunk_delete">flow_file_chunk_delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.flow_file_delete">flow_file_delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_all_project_ids_for_user">get_all_project_ids_for_user</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_all_project_ids_for_user_perms">get_all_project_ids_for_user_perms</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_name_for_custom_field_config_from_project">get_name_for_custom_field_config_from_project</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_old_all_project_ids_for_user">get_old_all_project_ids_for_user</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_old_project_ids_for_user_perms">get_old_project_ids_for_user_perms</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_permission_codename">get_permission_codename</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_permission_name">get_permission_name</a></li>
    <li class="mono"><a href="#cbh_core_model.models.get_projects_where_fields_restricted">get_projects_where_fields_restricted</a></li>
    <li class="mono"><a href="#cbh_core_model.models.make_default">make_default</a></li>
    <li class="mono"><a href="#cbh_core_model.models.print_name">print_name</a></li>
    <li class="mono"><a href="#cbh_core_model.models.sync_permissions">sync_permissions</a></li>
    <li class="mono"><a href="#cbh_core_model.models.test_bool">test_bool</a></li>
    <li class="mono"><a href="#cbh_core_model.models.test_file">test_file</a></li>
    <li class="mono"><a href="#cbh_core_model.models.test_int">test_int</a></li>
    <li class="mono"><a href="#cbh_core_model.models.test_number">test_number</a></li>
    <li class="mono"><a href="#cbh_core_model.models.test_percentage">test_percentage</a></li>
    <li class="mono"><a href="#cbh_core_model.models.test_string">test_string</a></li>
    <li class="mono"><a href="#cbh_core_model.models.test_stringdate">test_stringdate</a></li>
    <li class="mono"><a href="#cbh_core_model.models.update_project_key">update_project_key</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.CBHFlowFile">CBHFlowFile</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.get_chunk_filename">get_chunk_filename</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.get_next_by_updated">get_next_by_updated</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.get_previous_by_updated">get_previous_by_updated</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.get_state_display">get_state_display</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.is_valid_session">is_valid_session</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.join_chunks">join_chunks</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.update">update</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFile.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.CBHFlowFileChunk">CBHFlowFileChunk</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.get_next_by_created_at">get_next_by_created_at</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.get_previous_by_created_at">get_previous_by_created_at</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CBHFlowFileChunk.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.CustomFieldConfig">CustomFieldConfig</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.get_space_replaced_name">get_space_replaced_name</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.CustomFieldConfig.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.DataFormConfig">DataFormConfig</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.get_all_ancestor_objects">get_all_ancestor_objects</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.last_level">last_level</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.DataFormConfig.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.Invitation">Invitation</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Invitation.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.PinnedCustomField">PinnedCustomField</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.get_field_type_display">get_field_type_display</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.get_open_or_restricted_display">get_open_or_restricted_display</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.pandas_converter">pandas_converter</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.validate_field">validate_field</a></li>
    <li class="mono"><a href="#cbh_core_model.models.PinnedCustomField.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.Project">Project</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.Project.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_absolute_url">get_absolute_url</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_contenttype_for_instance">get_contenttype_for_instance</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_instance_permission_by_codename">get_instance_permission_by_codename</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.make_editor">make_editor</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.make_owner">make_owner</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.make_viewer">make_viewer</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.sync_permissions">sync_permissions</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.Project.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.ProjectPermissionManager">ProjectPermissionManager</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.aggregate">aggregate</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.all">all</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.annotate">annotate</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.bulk_create">bulk_create</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.complex_filter">complex_filter</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.contribute_to_class">contribute_to_class</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.count">count</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.create">create</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.dates">dates</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.datetimes">datetimes</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.db_manager">db_manager</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.deconstruct">deconstruct</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.defer">defer</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.distinct">distinct</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.earliest">earliest</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.exclude">exclude</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.exists">exists</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.extra">extra</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.filter">filter</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.first">first</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.from_queryset">from_queryset</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.get">get</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.get_next_incremental_id_for_compound">get_next_incremental_id_for_compound</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.get_or_create">get_or_create</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.get_queryset">get_queryset</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.in_bulk">in_bulk</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.iterator">iterator</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.last">last</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.latest">latest</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.none">none</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.only">only</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.order_by">order_by</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.prefetch_related">prefetch_related</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.raw">raw</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.reverse">reverse</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.select_for_update">select_for_update</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.select_related">select_related</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.sync_all_permissions">sync_all_permissions</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.update">update</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.update_or_create">update_or_create</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.using">using</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.values">values</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionManager.values_list">values_list</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.get_contenttype_for_instance">get_contenttype_for_instance</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.get_instance_permission_by_codename">get_instance_permission_by_codename</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.make_editor">make_editor</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.make_owner">make_owner</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.make_viewer">make_viewer</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.sync_permissions">sync_permissions</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectPermissionMixin.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.ProjectType">ProjectType</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.ProjectType.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_core_model.models.SkinningConfig">SkinningConfig</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.check">check</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.clean">clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.delete">delete</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.get_cache_key">get_cache_key</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.get_solo">get_solo</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.save">save</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.set_to_cache">set_to_cache</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_core_model.models.SkinningConfig.validate_unique">validate_unique</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">cbh_core_model.models</span> module</h1>
  <p>Core models for ChemBio Hub platform, covering objects required for configuration of the tool such as projects and skinning</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models" class="source">
    <div class="codehilite"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Core models for ChemBio Hub platform, covering objects required for configuration of the tool such as projects and skinning&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">connection</span>

<span class="kn">from</span> <span class="nn">solo.models</span> <span class="kn">import</span> <span class="n">SingletonModel</span>
<span class="kn">from</span> <span class="nn">django_extensions.db.models</span> <span class="kn">import</span> <span class="n">TimeStampedModel</span>
<span class="kn">from</span> <span class="nn">django.db.models.signals</span> <span class="kn">import</span> <span class="n">post_save</span><span class="p">,</span> <span class="n">pre_save</span>
<span class="kn">from</span> <span class="nn">django.contrib.contenttypes.models</span> <span class="kn">import</span> <span class="n">ContentType</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">Permission</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">Group</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">from</span> <span class="nn">django.utils.functional</span> <span class="kn">import</span> <span class="n">cached_property</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span><span class="p">,</span> <span class="n">deepcopy</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">dateutil</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">django</span>
<span class="c1">#from cbh_core_model.models import FlowFile</span>
<span class="kn">from</span> <span class="nn">django.template.defaultfilters</span> <span class="kn">import</span> <span class="n">slugify</span> 
<span class="kn">from</span> <span class="nn">django_hstore</span> <span class="kn">import</span> <span class="n">hstore</span>
<span class="c1">#FlowFile relocation stuff</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">django.db.models.signals</span> <span class="kn">import</span> <span class="n">pre_delete</span>
<span class="kn">from</span> <span class="nn">django.dispatch.dispatcher</span> <span class="kn">import</span> <span class="n">receiver</span>
<span class="kn">from</span> <span class="nn">django.core.files.storage</span> <span class="kn">import</span> <span class="n">default_storage</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">cbh_core_api.flowjs_settings</span> <span class="kn">import</span> <span class="n">FLOWJS_PATH</span><span class="p">,</span> <span class="n">FLOWJS_REMOVE_FILES_ON_DELETE</span><span class="p">,</span> <span class="n">FLOWJS_AUTO_DELETE_CHUNKS</span>
<span class="kn">from</span> <span class="nn">cbh_core_api.utils</span> <span class="kn">import</span> <span class="n">chunk_upload_to</span>
<span class="kn">from</span> <span class="nn">cbh_utils.idgenerator</span> <span class="kn">import</span> <span class="n">IncrementalIdGenerator</span>


<span class="n">PERMISSION_CODENAME_SEPARATOR</span> <span class="o">=</span> <span class="s2">&quot;__&quot;</span>
<span class="n">OPEN</span> <span class="o">=</span> <span class="s2">&quot;open&quot;</span>
<span class="n">RESTRICTED</span> <span class="o">=</span> <span class="s2">&quot;restricted&quot;</span>

<span class="n">RESTRICTION_CHOICES</span> <span class="o">=</span> <span class="p">((</span><span class="n">OPEN</span><span class="p">,</span> <span class="s2">&quot;Open to all viewers&quot;</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">RESTRICTED</span><span class="p">,</span> <span class="s2">&quot;Restricted to editors&quot;</span><span class="p">))</span>
<span class="c1">#Assume that these are declared in order of increasing permission</span>
<span class="n">PROJECT_PERMISSIONS</span> <span class="o">=</span> <span class="p">((</span><span class="s2">&quot;viewer&quot;</span><span class="p">,</span> <span class="s2">&quot;Can View&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;linked_field_permission&quot;</span><span class="p">:</span> <span class="n">RESTRICTED</span><span class="p">}),</span>
                       <span class="p">(</span><span class="s2">&quot;editor&quot;</span><span class="p">,</span> <span class="s2">&quot;Can edit or add batches&quot;</span><span class="p">,</span>  <span class="p">{</span><span class="s2">&quot;linked_field_permission&quot;</span><span class="p">:</span> <span class="n">OPEN</span><span class="p">}),</span>
                       <span class="p">(</span><span class="s2">&quot;owner&quot;</span><span class="p">,</span> <span class="s2">&quot;Can assign permissions&quot;</span><span class="p">,</span>  <span class="p">{</span><span class="s2">&quot;linked_field_permission&quot;</span><span class="p">:</span> <span class="n">OPEN</span><span class="p">}))</span>



<span class="k">def</span> <span class="nf">get_all_project_ids_for_user_perms</span><span class="p">(</span><span class="n">perms</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;New implementation of permissions by project - the contenttype is left now as project and </span>
<span class="sd">    the permission codename contains all information about the permission&quot;&quot;&quot;</span>
    <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="n">proj_role</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">PERMISSION_CODENAME_SEPARATOR</span> <span class="ow">in</span> <span class="n">proj_role</span><span class="p">:</span>
            <span class="n">prms</span> <span class="o">=</span> <span class="n">proj_role</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">PERMISSION_CODENAME_SEPARATOR</span><span class="p">)</span>
            <span class="n">pid</span> <span class="o">=</span> <span class="n">prms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">pid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">prms</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">possible_perm_levels</span><span class="p">:</span>
                <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">pids</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">get_old_project_ids_for_user_perms</span><span class="p">(</span><span class="n">perms</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;possibly deprecated&quot;&quot;&quot;</span>
    <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="n">prms</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        
        <span class="n">pid</span> <span class="o">=</span> <span class="n">prms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">prms</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">possible_perm_levels</span><span class="p">:</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">pids</span>


<span class="k">def</span> <span class="nf">get_old_all_project_ids_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_old_project_ids_for_user_perms</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">(),</span> <span class="n">possible_perm_levels</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_old_all_project_ids_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_old_project_ids_for_user_perms</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">(),</span> <span class="n">possible_perm_levels</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">get_all_project_ids_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a list of permission levels, extract all of the project ids for which the user has one of those permission levels&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_all_project_ids_for_user_perms</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">(),</span> <span class="n">possible_perm_levels</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_projects_where_fields_restricted</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate through the permission choices available and assign a dictionary for this user of the index that should</span>
<span class="sd">    be used for each permission. </span>
<span class="sd">    This is implemented in this way to allow the roles to be decopupled from the index that the user views&quot;&quot;&quot;</span>
    <span class="n">indexes_dict</span> <span class="o">=</span> <span class="p">{</span> <span class="n">OPEN</span> <span class="p">:</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">RESTRICTED</span> <span class="p">:</span><span class="nb">set</span><span class="p">()}</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">get_all_project_ids_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="p">[</span><span class="n">perm</span><span class="p">[</span><span class="mi">0</span><span class="p">]]):</span>
            <span class="n">indexes_dict</span><span class="p">[</span><span class="n">perm</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;linked_field_permission&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
    <span class="c1">#Poen permission trump restricted ones</span>
    <span class="n">indexes_dict</span><span class="p">[</span><span class="n">RESTRICTED</span><span class="p">]</span> <span class="o">=</span> <span class="n">indexes_dict</span><span class="p">[</span><span class="n">RESTRICTED</span><span class="p">]</span> <span class="o">-</span> <span class="n">indexes_dict</span><span class="p">[</span><span class="n">OPEN</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">indexes_dict</span>


<span class="k">class</span> <span class="nc">ProjectPermissionManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager methods to be inherited by the project object to manage permissions on projects&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">sync_all_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run trough all of the projects on the system and sync up the permission objects that they require&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="n">proj</span><span class="o">.</span><span class="n">sync_permissions</span><span class="p">()</span>



    <span class="k">def</span> <span class="nf">get_next_incremental_id_for_compound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Using the Redis ID generator retrieve the next ID for this project&quot;&quot;&quot;</span>
        <span class="n">gen</span> <span class="o">=</span> <span class="n">IncrementalIdGenerator</span><span class="p">(</span><span class="s2">&quot;project_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">maxReserveBuffer</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">new_id</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">proj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">project_id</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">new_id</span> <span class="o">!=</span> <span class="n">proj</span><span class="o">.</span><span class="n">project_counter_start</span><span class="p">:</span>
                <span class="n">new_id</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_id</span>


<span class="k">def</span> <span class="nf">get_permission_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">permission</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate a permission name so that we have something to display in the django admin UI in the dropdown selector&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">PERMISSION_CODENAME_SEPARATOR</span><span class="p">,</span> <span class="n">permission</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_permission_codename</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">permission</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;For a given project a set of permissions are generated in django like</span>
<span class="sd">    2__owner</span>
<span class="sd">    2__editor</span>
<span class="sd">    2__viewer</span>
<span class="sd">    This function generates these codenames&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%d%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">PERMISSION_CODENAME_SEPARATOR</span><span class="p">,</span> <span class="n">permission</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ProjectPermissionMixin</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;The aim of this mixin is to create a permission content type and a permission model for a given project</span>
<span class="sd">    It allows for pruning the contnet types once the model is changed</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">objects</span> <span class="o">=</span> <span class="n">ProjectPermissionManager</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">sync_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;first we delete the existing permissions that are not labelled in the model&#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">perm</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>




    <span class="k">def</span> <span class="nf">get_contenttype_for_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;All project permissions now simply sit under the project content type&quot;&quot;&quot;</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ct</span>



    <span class="k">def</span> <span class="nf">get_instance_permission_by_codename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get or create a permission object for a given codename on this project&quot;&quot;&quot;</span>
        <span class="n">pm</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
            <span class="n">codename</span><span class="o">=</span><span class="n">get_permission_codename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">codename</span><span class="p">),</span> 
            <span class="n">content_type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_contenttype_for_instance</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> 
            <span class="n">name</span><span class="o">=</span><span class="n">get_permission_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">codename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">pm</span>

    <span class="k">def</span> <span class="nf">_add_instance_permissions_to_user_or_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">,</span> <span class="n">codename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Give a user a given permission on a project&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">group_or_user</span><span class="p">)</span> <span class="o">==</span> <span class="n">Group</span><span class="p">:</span>
            <span class="n">group_or_user</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">codename</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">group_or_user</span><span class="p">)</span> <span class="o">==</span> <span class="n">User</span><span class="p">:</span>
            <span class="n">group_or_user</span><span class="o">.</span><span class="n">user_permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">codename</span><span class="p">))</span>

    

    <span class="k">def</span> <span class="nf">make_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a user object an editor of a project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
            <span class="n">group_or_user</span><span class="p">,</span>  <span class="s2">&quot;editor&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_viewer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a user object an viewer of a project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
            <span class="n">group_or_user</span><span class="p">,</span>   <span class="s2">&quot;viewer&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a user object an owner of a project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
            <span class="n">group_or_user</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Abstract model as only used to inherit into project&quot;&quot;&quot;</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>


<span class="k">class</span> <span class="nc">ProjectType</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The project type object&quot;&quot;&quot;</span>
    <span class="n">plateSizes</span> <span class="o">=</span> <span class="s2">&quot;96,48&quot;</span>
    <span class="n">plateTypes</span> <span class="o">=</span> <span class="s2">&quot;working,backup&quot;</span>
    <span class="n">SAVED_SEARCH_TEMPLATE</span> <span class="o">=</span> <span class="p">[{</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                            <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alias&quot;</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                            <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span>
                        <span class="p">}]</span>
    <span class="n">PLATE_MAP_TEMPLATE</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;radios&quot;</span><span class="p">,</span> <span class="s2">&quot;allowed_values&quot;</span><span class="p">:</span> <span class="n">plateSizes</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Plate Size&quot;</span><span class="p">,</span><span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Description&quot;</span><span class="p">,</span><span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;radios&quot;</span><span class="p">,</span> <span class="s2">&quot;allowed_values&quot;</span><span class="p">:</span> <span class="n">plateTypes</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Plate Type&quot;</span><span class="p">,</span><span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                      <span class="p">]</span>
    <span class="n">DEFAULT_TEMPLATE</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">},]</span>
    <span class="sd">&#39;&#39;&#39; Allows configuration of parts of the app on a per project basis - initially will be used to separate out compound and inventory projects &#39;&#39;&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Name of the project type&quot;</span><span class="p">)</span>
    <span class="n">show_compounds</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type should show compounds&quot;</span><span class="p">)</span>
    <span class="n">saved_search_project_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type is to be used in saved searches&quot;</span><span class="p">)</span>
    <span class="n">plate_map_project_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type is for plate maps&quot;</span><span class="p">)</span>
    <span class="c1">#Set the default to -1 to match the empty default custom field config</span>
    <span class="n">custom_field_config_template_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;If you wish for this project type to include a set of default fields, find an appropriate custom field config ID to use as a template and add it here&quot;</span><span class="p">)</span>
    <span class="n">set_as_default</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type should be used as the default project type on the system, set back to false if another project type is set as default&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


<span class="k">def</span> <span class="nf">make_default</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that there is only one default project type set at a time&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">set_as_default</span><span class="p">:</span>
        <span class="n">ProjectType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">set_as_default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>


<span class="n">post_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">make_default</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">ProjectType</span><span class="p">,</span> <span class="n">dispatch_uid</span><span class="o">=</span><span class="s2">&quot;ptype&quot;</span><span class="p">)</span>





<span class="k">class</span> <span class="nc">CustomFieldConfig</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Stores the schema of fields used in ChemiReg and AssayReg</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">)</span>
    <span class="n">schemaform</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">get_space_replaced_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot; &quot;</span><span class="p">,</span> <span class="s2">u&quot;__space__&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DataFormConfig</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;deprecated Shared configuration object - all projects can see this and potentially use it</span>
<span class="sd">    Object name comes from a concatentaion of all of the levels of custom field config</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">)</span>
    <span class="n">human_added</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">NullBooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">l0</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l0&quot;</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The first level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l0 would be industries.&quot;</span><span class="p">)</span>
    <span class="n">l1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l1&quot;</span><span class="p">,</span>
                           <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The second level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l1 would be companies.&quot;</span><span class="p">)</span>
    <span class="n">l2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l2&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The third level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l2 would be departments.&quot;</span><span class="p">)</span>
    <span class="n">l3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l3&quot;</span><span class="p">,</span>
                           <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The forth level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l3 would be teams.&quot;</span><span class="p">)</span>
    <span class="n">l4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l4&quot;</span><span class="p">,</span>
                           <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The fifth level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l4 would be employees.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l0</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">l0</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l1</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l1</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l2</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l2</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l3</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l3</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l4</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l4</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">string</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;l0&#39;</span><span class="p">,</span> <span class="s1">&#39;l1&#39;</span><span class="p">,</span> <span class="s1">&#39;l2&#39;</span><span class="p">,</span> <span class="s1">&#39;l3&#39;</span><span class="p">,</span> <span class="s1">&#39;l4&#39;</span><span class="p">),)</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;l0&#39;</span><span class="p">,</span> <span class="s1">&#39;l1&#39;</span><span class="p">,</span> <span class="s1">&#39;l2&#39;</span><span class="p">,</span> <span class="s1">&#39;l3&#39;</span><span class="p">,</span> <span class="s1">&#39;l4&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">last_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">last_level</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l4_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l4&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l3_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l3&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l2_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l2&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l1_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l1&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l0_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l0&quot;</span>
        <span class="k">return</span> <span class="n">last_level</span>

    <span class="k">def</span> <span class="nf">get_all_ancestor_objects</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">tree_builder</span><span class="o">=</span><span class="p">{},</span> <span class="n">uri_stub</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;l0&quot;</span><span class="p">,</span> <span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="s2">&quot;l2&quot;</span><span class="p">,</span> <span class="s2">&quot;l3&quot;</span><span class="p">,</span> <span class="s2">&quot;l4&quot;</span><span class="p">]</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_id&quot;</span> <span class="o">%</span> <span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">]</span>
        <span class="n">used_levels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">lev</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">lev</span> <span class="o">!=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_id&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_level</span><span class="p">():</span>
                <span class="n">used_levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lev</span><span class="p">)</span>

        <span class="n">filters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">used_levels</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">level_name</span> <span class="o">=</span> <span class="n">used_levels</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">level_filters</span> <span class="o">=</span> <span class="p">{</span><span class="n">lev</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">lev</span><span class="p">)</span> <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">used_levels</span><span class="p">[:</span><span class="n">i</span><span class="p">]}</span>
            <span class="n">filters</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">level_filters</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">filter_set</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">filters</span><span class="p">):</span>
            <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="n">lev</span><span class="p">:</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">}</span>
            <span class="n">new_filters</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">filter_set</span><span class="p">)</span>

            <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;defaults&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;created_by_id&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                    <span class="s2">&quot;human_added&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">}</span>
            <span class="n">new_object</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">DataFormConfig</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
                <span class="o">**</span><span class="n">defaults</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">obj</span><span class="o">.</span><span class="n">parent_id</span><span class="p">:</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="c1">#</span>

            <span class="n">permitted_child_array</span> <span class="o">=</span> <span class="n">tree_builder</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri_stub</span><span class="p">,</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="p">[])</span>
            <span class="n">permitted_child_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">tree_builder</span><span class="p">[</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri_stub</span><span class="p">,</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">permitted_child_array</span><span class="p">))</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="n">new_object</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">tree_builder</span><span class="p">[</span><span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">Project</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">,</span> <span class="n">ProjectPermissionMixin</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Project is a holder for moleculedictionary objects and for batches and permissions on the system are inherited from the project&#39;&#39;&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What would you like to call your project&quot;</span><span class="p">)</span>
    <span class="n">project_key</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;key for the project, mostly deprecated in favour of id now but still used in some places&quot;</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;User who created the project&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;project&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Custom field config object which is linked to this project&quot;</span><span class="p">)</span>
    <span class="n">project_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">ProjectType</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Project type that this project is linked to&quot;</span><span class="p">)</span>
    <span class="n">project_counter_start</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;start of the incremental ID field for this project&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">get_latest_by</span> <span class="o">=</span> <span class="s1">&#39;created&#39;</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@models.permalink</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;post_slug&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_key</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">get_name_for_custom_field_config_from_project</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">__</span><span class="si">%s</span><span class="s2">__project__config&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">sync_permissions</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;After saving the project make sure it has entries in the permissions table</span>
<span class="sd">    After possible renaming of the project ensure that all associated Custom Field Configs etc. are renamed&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">created</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">sync_permissions</span><span class="p">()</span>

        <span class="n">instance</span><span class="o">.</span><span class="n">make_owner</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">created_by</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#Iterate all of the project permissions associated with this instance and update the user friendly name for those permissions</span>
        <span class="n">proj_ct</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">perm_name</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
            <span class="n">perms</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="n">get_permission_codename</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">perm_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> 
                <span class="n">content_type</span><span class="o">=</span><span class="n">proj_ct</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
                <span class="n">perm</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">get_permission_name</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">perm_name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">perm</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="n">instance</span><span class="o">.</span><span class="n">custom_field_config</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">get_name_for_custom_field_config_from_project</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">custom_field_config</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="n">post_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">sync_permissions</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">Project</span><span class="p">,</span> <span class="n">dispatch_uid</span><span class="o">=</span><span class="s2">&quot;proj_perms&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">update_project_key</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the project key for a given project&quot;&quot;&quot;</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">project_key</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<span class="n">pre_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">update_project_key</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">Project</span><span class="p">,</span> <span class="n">dispatch_uid</span><span class="o">=</span><span class="s2">&quot;proj_key&quot;</span><span class="p">)</span>




<span class="k">class</span> <span class="nc">SkinningConfig</span><span class="p">(</span><span class="n">SingletonModel</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;Holds information about custom system messages and other customisable elements&#39;&#39;&#39;</span>
    <span class="c1">#created_by = models.ForeignKey(&quot;auth.User&quot;)</span>
    <span class="n">instance_alias</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;ChemiReg&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What the instance of ChemBio Hub should be labelled as (not really used, deprecated&quot;</span><span class="p">)</span>
    <span class="n">project_alias</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;project&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What projects on the system should be called (not really used, could be deprecated)&quot;</span><span class="p">)</span>
    <span class="n">result_alias</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;result&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What search results on the system should be called (not really used, could be deprecated)&quot;</span><span class="p">)</span>
    <span class="n">file_errors_from_backend</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">NullBooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the error message on file upload should be the exception message from the back end&quot;</span><span class="p">)</span>
    <span class="n">enable_smiles_input</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">NullBooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the SMILES input field should be enabled when adding multiple compounds&quot;</span><span class="p">)</span>
    <span class="n">data_manager_email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Email address for support requests&quot;</span><span class="p">)</span>
    <span class="n">data_manager_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Name of support requests manager&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">u&quot;Skinning Configuration&quot;</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Skinning Configuration&quot;</span>


<span class="k">def</span> <span class="nf">test_string</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">test_bool</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">False</span>


<span class="k">def</span> <span class="nf">test_file</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">False</span>



<span class="k">def</span> <span class="nf">test_int</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an integer, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">floatval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">intval</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">intval</span> <span class="o">==</span> <span class="n">floatval</span> <span class="ow">and</span> <span class="s2">&quot;.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">except</span>  <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">test_number</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an number, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">floatval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">except</span>  <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>


<span class="k">def</span> <span class="nf">test_stringdate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an date, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">curated_value</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">value</span><span class="p">))</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">curated_value</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>

<span class="k">def</span> <span class="nf">test_percentage</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an percentage, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">test_number</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>




<span class="k">class</span> <span class="nc">PinnedCustomField</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;PinnedCustomField is the model </span>
<span class="sd">    which stores all of the information about </span>
<span class="sd">    a particular field in a project&quot;&quot;&quot;</span>
    <span class="n">TEXT</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>
    <span class="n">TEXTAREA</span> <span class="o">=</span> <span class="s2">&quot;textarea&quot;</span>
    <span class="n">UISELECT</span> <span class="o">=</span> <span class="s2">&quot;uiselect&quot;</span>
    <span class="n">INTEGER</span> <span class="o">=</span> <span class="s2">&quot;integer&quot;</span>
    <span class="n">NUMBER</span> <span class="o">=</span> <span class="s2">&quot;number&quot;</span>
    <span class="n">RADIOS</span> <span class="o">=</span> <span class="s2">&quot;radios&quot;</span>
    <span class="n">UISELECTTAG</span> <span class="o">=</span> <span class="s2">&quot;uiselecttag&quot;</span>
    <span class="n">UISELECTTAGS</span> <span class="o">=</span> <span class="s2">&quot;uiselecttags&quot;</span>
    <span class="n">CHECKBOXES</span> <span class="o">=</span> <span class="s2">&quot;checkboxes&quot;</span>
    <span class="n">PERCENTAGE</span> <span class="o">=</span> <span class="s2">&quot;percentage&quot;</span>
    <span class="n">DECIMAL</span> <span class="o">=</span> <span class="s2">&quot;decimal&quot;</span>
    <span class="n">BOOLEAN</span> <span class="o">=</span> <span class="s2">&quot;boolean&quot;</span>
    <span class="n">DATE</span> <span class="o">=</span> <span class="s2">&quot;date&quot;</span>
    <span class="n">IMAGE</span> <span class="o">=</span> <span class="s2">&quot;imghref&quot;</span>
    <span class="n">LINK</span> <span class="o">=</span> <span class="s2">&quot;href&quot;</span>
    <span class="n">FILE_ATTACHMENT</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>


    <span class="k">def</span> <span class="nf">pandas_converter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_length</span><span class="p">,</span> <span class="n">pandas_dtype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a variable from its pandas datatype, not sure if used podssibly deprecated&quot;&quot;&quot;</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pandas_dtype</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;int64&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">INTEGER</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;float64&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">NUMBER</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_length</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXTAREA</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXT</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXT</span>

    <span class="n">FIELD_TYPE_CHOICES</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
        <span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Short text field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">}</span> <span class="p">,</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-font&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span> <span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}</span>
         <span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Short text field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="c1"># (TEXTAREA, {&quot;name&quot;: &quot;Full text&quot;, &quot;data&quot;: {</span>
        <span class="c1">#  &quot;icon&quot;: &quot;&lt;span class =&#39;glyphicon glyphicon-font&#39;&gt;&lt;/span&gt;&quot;, &quot;type&quot;: &quot;string&quot;, &quot;format&quot;: &quot;textarea&quot;}, &quot;test_datatype&quot; : test_string}),</span>
        <span class="p">(</span><span class="n">TEXTAREA</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Full text&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-font&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;ckeditor&quot;</span><span class="p">,</span> <span class="s2">&quot;ckeditor&quot;</span><span class="p">:{</span> <span class="s1">&#39;config.toolbar_Standard&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;basicstyles&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Italic&#39;</span><span class="p">,</span><span class="s1">&#39;Underline&#39;</span><span class="p">,</span><span class="s1">&#39;Strike&#39;</span><span class="p">,</span><span class="s1">&#39;Subscript&#39;</span><span class="p">,</span><span class="s1">&#39;Superscript&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;RemoveFormat&#39;</span> <span class="p">]</span> <span class="p">},</span> <span class="p">]</span> <span class="p">},},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">UISELECT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Choice field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> 
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;filtereddropdown&quot;</span><span class="p">,</span> 
         <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;options&quot;</span><span class="p">:{</span>
                          <span class="s2">&quot;tagging&quot;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s2">&quot;fetchDataEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;openedTaggingDropdown&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;dataArrivesEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;autoCompleteTaggingData&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;multiple&quot;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s2">&quot;staticItems&quot;</span> <span class="p">:</span> <span class="p">[]</span> 
                <span class="p">},</span>

         <span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">INTEGER</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Integer field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-stats&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_int</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">NUMBER</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Decimal field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-sound-5-1&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_number</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">UISELECTTAG</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Choice allowing create&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span>
         <span class="s2">&quot;data&quot;</span><span class="p">:</span>  <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-tag&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> 
          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;filtereddropdown&quot;</span><span class="p">,</span> 
          <span class="s2">&quot;options&quot;</span><span class="p">:{</span>
                          <span class="s2">&quot;tagging&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                          <span class="s2">&quot;fetchDataEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;openedTaggingDropdown&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;dataArrivesEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;autoCompleteTaggingData&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;multiple&quot;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s2">&quot;staticItems&quot;</span> <span class="p">:</span> <span class="p">[]</span> 
                <span class="p">},</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">UISELECTTAGS</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Tags field allowing create&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> 
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> 
            <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
            <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span> 
            <span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-tags&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;filtereddropdown&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
                  <span class="p">},</span>
             <span class="s2">&quot;options&quot;</span><span class="p">:{</span>
                          <span class="s2">&quot;tagging&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                          <span class="s2">&quot;fetchDataEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;openedTaggingDropdown&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;dataArrivesEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;autoCompleteTaggingData&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;multiple&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                          <span class="s2">&quot;staticItems&quot;</span> <span class="p">:</span> <span class="p">[]</span> 
                <span class="p">}</span>
            <span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span>
            <span class="p">}),</span>
        <span class="p">(</span><span class="n">PERCENTAGE</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Percentage field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;%&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;maximum&quot;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_percentage</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">RADIOS</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Radio buttons&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;%&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;radios&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">DATE</span><span class="p">,</span>  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Date Field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-calendar&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>   <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_stringdate</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">LINK</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Link to server or external&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span>
                                                               <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon glyphicon-new-window&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">IMAGE</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Image link to embed&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span> <span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;imghref&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span>
                                                         <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon glyphicon-picture&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">},</span>  <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">DECIMAL</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Decimal field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;3.1&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">},</span>  <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_number</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">BOOLEAN</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;3.1&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">},</span><span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_bool</span> <span class="p">}),</span>
        <span class="p">(</span><span class="s2">&quot;related&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;TEST&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;3.1&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">FILE_ATTACHMENT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;File Upload&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;attachmentlist&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-paperclip&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;file_upload&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;fileUploadRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_file</span><span class="p">})</span>

    <span class="p">))</span>

    <span class="n">field_key</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>  <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;field key value, not currently used perhaps deprecated&quot;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Name of the field in the project, may contain any character apart from slashes and dots&quot;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Description of the field to be displayed in the angular schema form when editing data&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;pinned_custom_field&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;the custom field config object this field is part of&quot;</span><span class="p">)</span>
    <span class="n">required</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whetehr the field is required&quot;</span><span class="p">)</span>
    <span class="n">field_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">(</span>
        <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">FIELD_TYPE_CHOICES</span><span class="o">.</span><span class="n">items</span><span class="p">()),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The data type of the data to be added in the front end forms for this field&quot;</span> <span class="p">)</span>
    <span class="n">allowed_values</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What values are allowed for this field&quot;</span><span class="p">)</span>
    <span class="n">position</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Auto-filled field that says what order the fields in a custom field config should be displayed int he form&quot;</span><span class="p">)</span>
    <span class="n">default</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The default value of this field to be applied when adding data via the angular schema form&quot;</span><span class="p">)</span>

    <span class="n">open_or_restricted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">OPEN</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">RESTRICTION_CHOICES</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether to open up this field to people who only have viewer rights on the project&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Data type testing for fields in the custom fields of a compound batch (possibly deprecated or unfinished&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;test_datatype&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">get_items_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List the allowed values for a particular field&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                 <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowed_values</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
        <span class="n">setitems</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">items</span><span class="p">)))</span>
        <span class="n">testdata</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;doc_count&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()}</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">setitems</span> <span class="k">if</span> <span class="n">item</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">testdata</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">get_space_replaced_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the name of the field in a space replaced way for ealsticsearch (deprecated)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot; &quot;</span><span class="p">,</span> <span class="s2">u&quot;__space__&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unicode representation of the field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">  </span><span class="si">%s</span><span class="s2">  </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_key</span><span class="p">,</span>  <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="p">)</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">field_values</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the data that is required when compiling the angular schema form JSON for a particular field&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;placeholder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">description</span>
        
        <span class="n">display_form</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;display_form&quot;</span><span class="p">])</span>
        <span class="n">form</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;knownBy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;custom_fields.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">position</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">display_form</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_space_replaced_name</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>

        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">description</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;disableSuccessState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;feedback&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">searchitems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;array&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
                <span class="n">form</span><span class="p">[</span><span class="s2">&quot;minLength&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="s2">&quot;filtereddropdown&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;filtereddropdown&quot;</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;placeholder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Choose...&quot;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;options&#39;</span><span class="p">][</span><span class="s1">&#39;staticItems&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_items_simple</span>

        <span class="k">if</span> <span class="s2">&quot;radios&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;radios&quot;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;enum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_items_simple</span><span class="p">]</span>
            <span class="n">form</span><span class="p">[</span><span class="s1">&#39;titleMap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]}</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_items_simple</span><span class="p">]</span>


        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;file_upload&quot;</span><span class="p">:</span>
            <span class="c1">#will need to alter the init method here (so it&#39;s no longer using dataoverviewctrl)</span>
            <span class="c1">#also the success method to add the projectid? Not sure what that means really</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;uploadOptions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;modal&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Modal Title specified here&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;flow&#39;</span><span class="p">:</span> <span class="p">{</span>
                                            <span class="s1">&#39;dropEnabled&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                            <span class="s1">&#39;imageOnly&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                            <span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="p">{},</span>
                                            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="s1">&#39;success(file, formkey)&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;removeFile&#39;</span><span class="p">:</span> <span class="s1">&#39;removeFile(formkey, index, url)&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;imageFunction&#39;</span><span class="p">:</span> <span class="s1">&#39;fetchImage(url)&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;sizeCheck&#39;</span><span class="p">:</span> <span class="s1">&#39;sizeCheck(file, formkey)&#39;</span>
                                          <span class="p">}</span>
                                        <span class="p">}</span>
                                      <span class="p">}</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;attachments&quot;</span> <span class="p">:</span> <span class="p">[]}</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;attachments&quot;</span> <span class="p">:</span> <span class="p">[]}</span>



        <span class="c1">#add config options for ckeditor</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;ckeditor&quot;</span><span class="p">:</span>
            <span class="n">form</span><span class="p">[</span><span class="s1">&#39;ckeditor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;toolbar&#39;</span><span class="p">:</span> <span class="p">[</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;clipboard&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Cut&#39;</span><span class="p">,</span> <span class="s1">&#39;Copy&#39;</span><span class="p">,</span> <span class="s1">&#39;Paste&#39;</span><span class="p">,</span> <span class="s1">&#39;PasteText&#39;</span><span class="p">,</span> <span class="s1">&#39;PasteFromWord&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;Undo&#39;</span><span class="p">,</span> <span class="s1">&#39;Redo&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;editing&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Scayt&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;links&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Link&#39;</span><span class="p">,</span> <span class="s1">&#39;Unlink&#39;</span><span class="p">,</span> <span class="s1">&#39;Anchor&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;tools&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Maximize&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="s1">&#39;/&#39;</span><span class="p">,</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;basicstyles&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Bold&#39;</span><span class="p">,</span><span class="s1">&#39;Italic&#39;</span><span class="p">,</span><span class="s1">&#39;Underline&#39;</span><span class="p">,</span><span class="s1">&#39;Strike&#39;</span><span class="p">,</span><span class="s1">&#39;Subscript&#39;</span><span class="p">,</span><span class="s1">&#39;Superscript&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;RemoveFormat&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;insert&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;HorizontalRule&#39;</span><span class="p">,</span><span class="s1">&#39;SpecialChar&#39;</span><span class="p">,</span><span class="s1">&#39;PageBreak&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;paragraph&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;NumberedList&#39;</span><span class="p">,</span><span class="s1">&#39;BulletedList&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;Outdent&#39;</span><span class="p">,</span><span class="s1">&#39;Indent&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyLeft&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyCenter&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyRight&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyBlock&#39;</span><span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;styles&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Styles&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;about&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;About&#39;</span> <span class="p">]</span> <span class="p">}</span>
                                            <span class="p">]</span> <span class="p">}</span>

        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="o">==</span> <span class="n">obj</span><span class="o">.</span><span class="n">DATE</span><span class="p">:</span>
            <span class="n">maxdate</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">form</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s2">&quot;minDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span>
                <span class="s2">&quot;maxDate&quot;</span><span class="p">:</span> <span class="n">maxdate</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;datepicker&#39;</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;yyyy-mm-dd&quot;</span><span class="p">,</span>
                <span class="s1">&#39;pickadate&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;selectYears&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                    <span class="s1">&#39;selectMonths&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;options&quot;</span><span class="p">]:</span>
                <span class="n">stuff</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">stuff</span><span class="p">:</span>
                    <span class="n">form</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">stuff</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">,</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">form</span><span class="p">),</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">display_form</span><span class="p">))</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Ordering by default in the model for use with tastypie related resource which does not give a way to order the related field values&quot;&quot;&quot;</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span>
        <span class="n">get_latest_by</span> <span class="o">=</span> <span class="s1">&#39;created&#39;</span>


<span class="k">class</span> <span class="nc">Invitation</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Invitation model which saves the fact that an invitation has been sent to a given user&quot;&quot;&quot;</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">)</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">projects</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>




<span class="k">class</span> <span class="nc">CBHFlowFile</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A file upload through Flow.js</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">STATE_UPLOADING</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">STATE_COMPLETED</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">STATE_UPLOAD_ERROR</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">STATE_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">STATE_UPLOADING</span><span class="p">,</span> <span class="s2">&quot;Uploading&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">STATE_COMPLETED</span><span class="p">,</span> <span class="s2">&quot;Completed&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">STATE_UPLOAD_ERROR</span><span class="p">,</span> <span class="s2">&quot;Upload Error&quot;</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># identification and file details</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;String identifier built using the name and session id of the file for security so other sessions cannot access the file&quot;</span><span class="p">)</span>
    <span class="n">original_filename</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The original filename of the file&quot;</span><span class="p">)</span>
    <span class="n">total_size</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Size in bytes&quot;</span><span class="p">)</span>
    <span class="n">total_chunks</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Number of chunks the file was split up into to upload&quot;</span><span class="p">)</span>

    <span class="c1"># current state</span>
    <span class="n">total_chunks_uploaded</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Number of chunks uploaded so far&quot;</span><span class="p">)</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">STATE_CHOICES</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">STATE_UPLOADING</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Current status of the upload&quot;</span><span class="p">)</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Date the upload was created&quot;</span><span class="p">)</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Date the upload was updated&quot;</span><span class="p">)</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Project that the uploaded file is associated with&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unicode representation of the file&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check the status of the uploading chunks&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks_uploaded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">join_chunks</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">extension</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the extension of the upload file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ext</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the unique filename generated based on the identifier</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">extension</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the uploaded file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_COMPLETED</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the full path of the file uploaded</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the path of the file uploaded</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FLOWJS_PATH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_chunk_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the filename of the chunk based on the identifier and chunk number</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">.tmp&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">number</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">join_chunks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Join all the chunks in one file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_UPLOADING</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks_uploaded</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks</span><span class="p">:</span>

            <span class="c1"># create file and write chunks in the right order</span>
            <span class="n">temp_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="n">chunk_bytes</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">temp_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk_bytes</span><span class="p">)</span>
            <span class="n">temp_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="c1"># set state as completed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_COMPLETED</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="c1"># delete chunks automatically if is activated in settings</span>
            <span class="k">if</span> <span class="n">FLOWJS_AUTO_DELETE_CHUNKS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">is_valid_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a session id is the same that uploaded the file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">CBHFlowFileChunk</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A chunk is part of the file uploaded</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span>

    <span class="c1"># identification and file details</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;chunks&quot;</span><span class="p">,</span> <span class="p">)</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">upload_to</span><span class="o">=</span><span class="n">chunk_upload_to</span><span class="p">)</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_chunk_filename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFileChunk</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>


<span class="nd">@receiver</span><span class="p">(</span><span class="n">pre_delete</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">CBHFlowFile</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">flow_file_delete</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove files on delete if is activated in settings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">FLOWJS_REMOVE_FILES_ON_DELETE</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">default_storage</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">pass</span>


<span class="nd">@receiver</span><span class="p">(</span><span class="n">pre_delete</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">CBHFlowFileChunk</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">flow_file_chunk_delete</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove file when chunk is deleted</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">print_name</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">project_key</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">sender</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">__dict__</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;new&quot;</span>

<span class="n">pre_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">print_name</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">Project</span><span class="p">,</span> <span class="n">dispatch_uid</span><span class="o">=</span><span class="s2">&quot;proj_key1&quot;</span><span class="p">)</span>
<span class="n">pre_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">print_name</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">CustomFieldConfig</span><span class="p">,</span> <span class="n">dispatch_uid</span><span class="o">=</span><span class="s2">&quot;proj_key2&quot;</span><span class="p">)</span>
<span class="n">pre_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">print_name</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">PinnedCustomField</span><span class="p">,</span> <span class="n">dispatch_uid</span><span class="o">=</span><span class="s2">&quot;proj_key3&quot;</span><span class="p">)</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="cbh_core_model.models.FLOWJS_AUTO_DELETE_CHUNKS" class="name">var <span class="ident">FLOWJS_AUTO_DELETE_CHUNKS</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_model.models.FLOWJS_PATH" class="name">var <span class="ident">FLOWJS_PATH</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_model.models.FLOWJS_REMOVE_FILES_ON_DELETE" class="name">var <span class="ident">FLOWJS_REMOVE_FILES_ON_DELETE</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_model.models.OPEN" class="name">var <span class="ident">OPEN</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_model.models.PERMISSION_CODENAME_SEPARATOR" class="name">var <span class="ident">PERMISSION_CODENAME_SEPARATOR</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_model.models.PROJECT_PERMISSIONS" class="name">var <span class="ident">PROJECT_PERMISSIONS</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_model.models.RESTRICTED" class="name">var <span class="ident">RESTRICTED</span></p>
      
  
  <div class="source_cont">
</div>

      </div>
      <div class="item">
      <p id="cbh_core_model.models.RESTRICTION_CHOICES" class="name">var <span class="ident">RESTRICTION_CHOICES</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.flow_file_chunk_delete">
    <p>def <span class="ident">flow_file_chunk_delete</span>(</p><p>sender, instance, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove file when chunk is deleted</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.flow_file_chunk_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.flow_file_chunk_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@receiver</span><span class="p">(</span><span class="n">pre_delete</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">CBHFlowFileChunk</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">flow_file_chunk_delete</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove file when chunk is deleted</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.flow_file_delete">
    <p>def <span class="ident">flow_file_delete</span>(</p><p>sender, instance, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove files on delete if is activated in settings</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.flow_file_delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.flow_file_delete" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@receiver</span><span class="p">(</span><span class="n">pre_delete</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">CBHFlowFile</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">flow_file_delete</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove files on delete if is activated in settings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">FLOWJS_REMOVE_FILES_ON_DELETE</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">default_storage</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_all_project_ids_for_user">
    <p>def <span class="ident">get_all_project_ids_for_user</span>(</p><p>user, possible_perm_levels)</p>
    </div>
    

    
  
    <div class="desc"><p>Given a list of permission levels, extract all of the project ids for which the user has one of those permission levels</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_all_project_ids_for_user', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_all_project_ids_for_user" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_all_project_ids_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Given a list of permission levels, extract all of the project ids for which the user has one of those permission levels&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_all_project_ids_for_user_perms</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">(),</span> <span class="n">possible_perm_levels</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_all_project_ids_for_user_perms">
    <p>def <span class="ident">get_all_project_ids_for_user_perms</span>(</p><p>perms, possible_perm_levels)</p>
    </div>
    

    
  
    <div class="desc"><p>New implementation of permissions by project - the contenttype is left now as project and 
the permission codename contains all information about the permission</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_all_project_ids_for_user_perms', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_all_project_ids_for_user_perms" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_all_project_ids_for_user_perms</span><span class="p">(</span><span class="n">perms</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;New implementation of permissions by project - the contenttype is left now as project and </span>
<span class="sd">    the permission codename contains all information about the permission&quot;&quot;&quot;</span>
    <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="n">proj_role</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">PERMISSION_CODENAME_SEPARATOR</span> <span class="ow">in</span> <span class="n">proj_role</span><span class="p">:</span>
            <span class="n">prms</span> <span class="o">=</span> <span class="n">proj_role</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">PERMISSION_CODENAME_SEPARATOR</span><span class="p">)</span>
            <span class="n">pid</span> <span class="o">=</span> <span class="n">prms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">pid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">prms</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">possible_perm_levels</span><span class="p">:</span>
                <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">pids</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_name_for_custom_field_config_from_project">
    <p>def <span class="ident">get_name_for_custom_field_config_from_project</span>(</p><p>p)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_name_for_custom_field_config_from_project', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_name_for_custom_field_config_from_project" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_name_for_custom_field_config_from_project</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">__</span><span class="si">%s</span><span class="s2">__project__config&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_old_all_project_ids_for_user">
    <p>def <span class="ident">get_old_all_project_ids_for_user</span>(</p><p>user, possible_perm_levels)</p>
    </div>
    

    
  
    <div class="desc"><p>deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_old_all_project_ids_for_user', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_old_all_project_ids_for_user" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_old_all_project_ids_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">get_old_project_ids_for_user_perms</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">get_all_permissions</span><span class="p">(),</span> <span class="n">possible_perm_levels</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_old_project_ids_for_user_perms">
    <p>def <span class="ident">get_old_project_ids_for_user_perms</span>(</p><p>perms, possible_perm_levels)</p>
    </div>
    

    
  
    <div class="desc"><p>possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_old_project_ids_for_user_perms', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_old_project_ids_for_user_perms" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_old_project_ids_for_user_perms</span><span class="p">(</span><span class="n">perms</span><span class="p">,</span> <span class="n">possible_perm_levels</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;possibly deprecated&quot;&quot;&quot;</span>
    <span class="n">pids</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
        <span class="n">prms</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">perm</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        
        <span class="n">pid</span> <span class="o">=</span> <span class="n">prms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">pid</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="n">prms</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">possible_perm_levels</span><span class="p">:</span>
            <span class="n">pids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">pids</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_permission_codename">
    <p>def <span class="ident">get_permission_codename</span>(</p><p>id, permission)</p>
    </div>
    

    
  
    <div class="desc"><p>For a given project a set of permissions are generated in django like
2<strong>owner
2</strong>editor
2__viewer
This function generates these codenames</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_permission_codename', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_permission_codename" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_permission_codename</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">permission</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;For a given project a set of permissions are generated in django like</span>
<span class="sd">    2__owner</span>
<span class="sd">    2__editor</span>
<span class="sd">    2__viewer</span>
<span class="sd">    This function generates these codenames&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%d%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">PERMISSION_CODENAME_SEPARATOR</span><span class="p">,</span> <span class="n">permission</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_permission_name">
    <p>def <span class="ident">get_permission_name</span>(</p><p>name, permission)</p>
    </div>
    

    
  
    <div class="desc"><p>Generate a permission name so that we have something to display in the django admin UI in the dropdown selector</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_permission_name', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_permission_name" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_permission_name</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">permission</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate a permission name so that we have something to display in the django admin UI in the dropdown selector&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">PERMISSION_CODENAME_SEPARATOR</span><span class="p">,</span> <span class="n">permission</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.get_projects_where_fields_restricted">
    <p>def <span class="ident">get_projects_where_fields_restricted</span>(</p><p>user)</p>
    </div>
    

    
  
    <div class="desc"><p>Iterate through the permission choices available and assign a dictionary for this user of the index that should
be used for each permission. 
This is implemented in this way to allow the roles to be decopupled from the index that the user views</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.get_projects_where_fields_restricted', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.get_projects_where_fields_restricted" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_projects_where_fields_restricted</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Iterate through the permission choices available and assign a dictionary for this user of the index that should</span>
<span class="sd">    be used for each permission. </span>
<span class="sd">    This is implemented in this way to allow the roles to be decopupled from the index that the user views&quot;&quot;&quot;</span>
    <span class="n">indexes_dict</span> <span class="o">=</span> <span class="p">{</span> <span class="n">OPEN</span> <span class="p">:</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">RESTRICTED</span> <span class="p">:</span><span class="nb">set</span><span class="p">()}</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">pid</span> <span class="ow">in</span> <span class="n">get_all_project_ids_for_user</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="p">[</span><span class="n">perm</span><span class="p">[</span><span class="mi">0</span><span class="p">]]):</span>
            <span class="n">indexes_dict</span><span class="p">[</span><span class="n">perm</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;linked_field_permission&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
    <span class="c1">#Poen permission trump restricted ones</span>
    <span class="n">indexes_dict</span><span class="p">[</span><span class="n">RESTRICTED</span><span class="p">]</span> <span class="o">=</span> <span class="n">indexes_dict</span><span class="p">[</span><span class="n">RESTRICTED</span><span class="p">]</span> <span class="o">-</span> <span class="n">indexes_dict</span><span class="p">[</span><span class="n">OPEN</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">indexes_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.make_default">
    <p>def <span class="ident">make_default</span>(</p><p>sender, instance, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure that there is only one default project type set at a time</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.make_default', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.make_default" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">make_default</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure that there is only one default project type set at a time&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">set_as_default</span><span class="p">:</span>
        <span class="n">ProjectType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">set_as_default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.print_name">
    <p>def <span class="ident">print_name</span>(</p><p>sender, instance, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.print_name', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.print_name" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">print_name</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">project_key</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">sender</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">__dict__</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;new&quot;</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.sync_permissions">
    <p>def <span class="ident">sync_permissions</span>(</p><p>sender, instance, created, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>After saving the project make sure it has entries in the permissions table
After possible renaming of the project ensure that all associated Custom Field Configs etc. are renamed</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.sync_permissions', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.sync_permissions" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">sync_permissions</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">created</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;After saving the project make sure it has entries in the permissions table</span>
<span class="sd">    After possible renaming of the project ensure that all associated Custom Field Configs etc. are renamed&#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">created</span> <span class="ow">is</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">sync_permissions</span><span class="p">()</span>

        <span class="n">instance</span><span class="o">.</span><span class="n">make_owner</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">created_by</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#Iterate all of the project permissions associated with this instance and update the user friendly name for those permissions</span>
        <span class="n">proj_ct</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">perm_name</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
            <span class="n">perms</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="n">get_permission_codename</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">perm_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> 
                <span class="n">content_type</span><span class="o">=</span><span class="n">proj_ct</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
                <span class="n">perm</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">get_permission_name</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">perm_name</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">perm</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="n">instance</span><span class="o">.</span><span class="n">custom_field_config</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">get_name_for_custom_field_config_from_project</span><span class="p">(</span><span class="n">instance</span><span class="p">)</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">custom_field_config</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.test_bool">
    <p>def <span class="ident">test_bool</span>(</p><p>value)</p>
    </div>
    

    
  
    <div class="desc"><p>Possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.test_bool', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.test_bool" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_bool</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.test_file">
    <p>def <span class="ident">test_file</span>(</p><p>value)</p>
    </div>
    

    
  
    <div class="desc"><p>Possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.test_file', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.test_file" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_file</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.test_int">
    <p>def <span class="ident">test_int</span>(</p><p>value)</p>
    </div>
    

    
  
    <div class="desc"><p>Check if an input value is an integer, not sure if this is used, possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.test_int', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.test_int" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_int</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an integer, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">floatval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">intval</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">intval</span> <span class="o">==</span> <span class="n">floatval</span> <span class="ow">and</span> <span class="s2">&quot;.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">unicode</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">except</span>  <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.test_number">
    <p>def <span class="ident">test_number</span>(</p><p>value)</p>
    </div>
    

    
  
    <div class="desc"><p>Check if an input value is an number, not sure if this is used, possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.test_number', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.test_number" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_number</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an number, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">floatval</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">except</span>  <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.test_percentage">
    <p>def <span class="ident">test_percentage</span>(</p><p>value)</p>
    </div>
    

    
  
    <div class="desc"><p>Check if an input value is an percentage, not sure if this is used, possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.test_percentage', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.test_percentage" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_percentage</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an percentage, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">test_number</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.test_string">
    <p>def <span class="ident">test_string</span>(</p><p>value)</p>
    </div>
    

    
  
    <div class="desc"><p>Possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.test_string', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.test_string" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_string</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.test_stringdate">
    <p>def <span class="ident">test_stringdate</span>(</p><p>value)</p>
    </div>
    

    
  
    <div class="desc"><p>Check if an input value is an date, not sure if this is used, possibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.test_stringdate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.test_stringdate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">test_stringdate</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check if an input value is an date, not sure if this is used, possibly deprecated&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">curated_value</span> <span class="o">=</span> <span class="n">dateutil</span><span class="o">.</span><span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="nb">unicode</span><span class="p">(</span><span class="n">value</span><span class="p">))</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">curated_value</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_core_model.models.update_project_key">
    <p>def <span class="ident">update_project_key</span>(</p><p>sender, instance, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the project key for a given project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.update_project_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.update_project_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_project_key</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the project key for a given project&quot;&quot;&quot;</span>
    <span class="n">instance</span><span class="o">.</span><span class="n">project_key</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="cbh_core_model.models.CBHFlowFile" class="name">class <span class="ident">CBHFlowFile</span></p>
      
  
    <div class="desc"><p>A file upload through Flow.js</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CBHFlowFile</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A file upload through Flow.js</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">STATE_UPLOADING</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">STATE_COMPLETED</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">STATE_UPLOAD_ERROR</span> <span class="o">=</span> <span class="mi">3</span>

    <span class="n">STATE_CHOICES</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">STATE_UPLOADING</span><span class="p">,</span> <span class="s2">&quot;Uploading&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">STATE_COMPLETED</span><span class="p">,</span> <span class="s2">&quot;Completed&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">STATE_UPLOAD_ERROR</span><span class="p">,</span> <span class="s2">&quot;Upload Error&quot;</span><span class="p">)</span>
    <span class="p">]</span>

    <span class="c1"># identification and file details</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;String identifier built using the name and session id of the file for security so other sessions cannot access the file&quot;</span><span class="p">)</span>
    <span class="n">original_filename</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The original filename of the file&quot;</span><span class="p">)</span>
    <span class="n">total_size</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Size in bytes&quot;</span><span class="p">)</span>
    <span class="n">total_chunks</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Number of chunks the file was split up into to upload&quot;</span><span class="p">)</span>

    <span class="c1"># current state</span>
    <span class="n">total_chunks_uploaded</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Number of chunks uploaded so far&quot;</span><span class="p">)</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">choices</span><span class="o">=</span><span class="n">STATE_CHOICES</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">STATE_UPLOADING</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Current status of the upload&quot;</span><span class="p">)</span>
    <span class="n">created</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Date the upload was created&quot;</span><span class="p">)</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Date the upload was updated&quot;</span><span class="p">)</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Project that the uploaded file is associated with&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unicode representation of the file&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span>

    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check the status of the uploading chunks&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks_uploaded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">join_chunks</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">extension</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the extension of the upload file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_filename</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ext</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the unique filename generated based on the identifier</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">extension</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the uploaded file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_COMPLETED</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">full_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the full path of the file uploaded</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the path of the file uploaded</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">FLOWJS_PATH</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_chunk_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the filename of the chunk based on the identifier and chunk number</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">.tmp&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">number</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">join_chunks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Join all the chunks in one file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_UPLOADING</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks_uploaded</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks</span><span class="p">:</span>

            <span class="c1"># create file and write chunks in the right order</span>
            <span class="n">temp_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                <span class="n">chunk_bytes</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">temp_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk_bytes</span><span class="p">)</span>
            <span class="n">temp_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

            <span class="c1"># set state as completed</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_COMPLETED</span>
            <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="c1"># delete chunks automatically if is activated in settings</span>
            <span class="k">if</span> <span class="n">FLOWJS_AUTO_DELETE_CHUNKS</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">is_valid_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a session id is the same that uploaded the file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.CBHFlowFile">CBHFlowFile</a></li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.STATE_CHOICES" class="name">var <span class="ident">STATE_CHOICES</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.STATE_COMPLETED" class="name">var <span class="ident">STATE_COMPLETED</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.STATE_UPLOADING" class="name">var <span class="ident">STATE_UPLOADING</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.STATE_UPLOAD_ERROR" class="name">var <span class="ident">STATE_UPLOAD_ERROR</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.cbhcompoundmultiplebatch_set" class="name">var <span class="ident">cbhcompoundmultiplebatch_set</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.chunks" class="name">var <span class="ident">chunks</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.created" class="name">var <span class="ident">created</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.identifier" class="name">var <span class="ident">identifier</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.original_filename" class="name">var <span class="ident">original_filename</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.project" class="name">var <span class="ident">project</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.state" class="name">var <span class="ident">state</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.total_chunks" class="name">var <span class="ident">total_chunks</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.total_chunks_uploaded" class="name">var <span class="ident">total_chunks_uploaded</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.total_size" class="name">var <span class="ident">total_size</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.updated" class="name">var <span class="ident">updated</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.extension" class="name">var <span class="ident">extension</span></p>
            

            
  
    <div class="desc"><p>Return the extension of the upload file</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.file" class="name">var <span class="ident">file</span></p>
            

            
  
    <div class="desc"><p>Return the uploaded file</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.filename" class="name">var <span class="ident">filename</span></p>
            

            
  
    <div class="desc"><p>Return the unique filename generated based on the identifier</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.full_path" class="name">var <span class="ident">full_path</span></p>
            

            
  
    <div class="desc"><p>Return the full path of the file uploaded</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.path" class="name">var <span class="ident">path</span></p>
            

            
  
    <div class="desc"><p>Return the path of the file uploaded</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFile.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.get_chunk_filename">
    <p>def <span class="ident">get_chunk_filename</span>(</p><p>self, number)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the filename of the chunk based on the identifier and chunk number</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.get_chunk_filename', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.get_chunk_filename" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_chunk_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the filename of the chunk based on the identifier and chunk number</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">-</span><span class="si">%s</span><span class="s1">.tmp&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">number</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.get_next_by_updated">
    <p>def <span class="ident">get_next_by_updated</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.get_next_by_updated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.get_next_by_updated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.get_previous_by_updated">
    <p>def <span class="ident">get_previous_by_updated</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.get_previous_by_updated', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.get_previous_by_updated" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.get_state_display">
    <p>def <span class="ident">get_state_display</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.get_state_display', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.get_state_display" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.is_valid_session">
    <p>def <span class="ident">is_valid_session</span>(</p><p>self, session)</p>
    </div>
    

    
  
    <div class="desc"><p>Check if a session id is the same that uploaded the file</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.is_valid_session', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.is_valid_session" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">is_valid_session</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">session</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if a session id is the same that uploaded the file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">identifier</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.join_chunks">
    <p>def <span class="ident">join_chunks</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Join all the chunks in one file</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.join_chunks', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.join_chunks" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">join_chunks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Join all the chunks in one file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_UPLOADING</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks_uploaded</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks</span><span class="p">:</span>
        <span class="c1"># create file and write chunks in the right order</span>
        <span class="n">temp_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">full_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="n">chunk_bytes</span> <span class="o">=</span> <span class="n">chunk</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">temp_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk_bytes</span><span class="p">)</span>
        <span class="n">temp_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1"># set state as completed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">STATE_COMPLETED</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="c1"># delete chunks automatically if is activated in settings</span>
        <span class="k">if</span> <span class="n">FLOWJS_AUTO_DELETE_CHUNKS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.update">
    <p>def <span class="ident">update</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Check the status of the uploading chunks</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Check the status of the uploading chunks&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">total_chunks_uploaded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunks</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">join_chunks</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFile.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFile.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFile.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.CBHFlowFileChunk" class="name">class <span class="ident">CBHFlowFileChunk</span></p>
      
  
    <div class="desc"><p>A chunk is part of the file uploaded</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CBHFlowFileChunk</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A chunk is part of the file uploaded</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span>

    <span class="c1"># identification and file details</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">CBHFlowFile</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;chunks&quot;</span><span class="p">,</span> <span class="p">)</span>
    <span class="nb">file</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span> <span class="n">upload_to</span><span class="o">=</span><span class="n">chunk_upload_to</span><span class="p">)</span>
    <span class="n">number</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now_add</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_chunk_filename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFileChunk</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.CBHFlowFileChunk">CBHFlowFileChunk</a></li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.created_at" class="name">var <span class="ident">created_at</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.file" class="name">var <span class="ident">file</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.number" class="name">var <span class="ident">number</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.parent" class="name">var <span class="ident">parent</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.filename" class="name">var <span class="ident">filename</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CBHFlowFileChunk.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.get_next_by_created_at">
    <p>def <span class="ident">get_next_by_created_at</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.get_next_by_created_at', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.get_next_by_created_at" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.get_previous_by_created_at">
    <p>def <span class="ident">get_previous_by_created_at</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.get_previous_by_created_at', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.get_previous_by_created_at" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.save">
    <p>def <span class="ident">save</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">CBHFlowFileChunk</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CBHFlowFileChunk.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CBHFlowFileChunk.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CBHFlowFileChunk.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.CustomFieldConfig" class="name">class <span class="ident">CustomFieldConfig</span></p>
      
  
    <div class="desc"><p>Stores the schema of fields used in ChemiReg and AssayReg</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CustomFieldConfig</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Stores the schema of fields used in ChemiReg and AssayReg</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">)</span>
    <span class="n">schemaform</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">get_space_replaced_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot; &quot;</span><span class="p">,</span> <span class="s2">u&quot;__space__&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.CustomFieldConfig">CustomFieldConfig</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.l0" class="name">var <span class="ident">l0</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.l1" class="name">var <span class="ident">l1</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.l2" class="name">var <span class="ident">l2</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.l3" class="name">var <span class="ident">l3</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.l4" class="name">var <span class="ident">l4</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.pinned_custom_field" class="name">var <span class="ident">pinned_custom_field</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.project" class="name">var <span class="ident">project</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.schemaform" class="name">var <span class="ident">schemaform</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.CustomFieldConfig.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.get_space_replaced_name">
    <p>def <span class="ident">get_space_replaced_name</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.get_space_replaced_name', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.get_space_replaced_name" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_space_replaced_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot; &quot;</span><span class="p">,</span> <span class="s2">u&quot;__space__&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.CustomFieldConfig.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.CustomFieldConfig.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.CustomFieldConfig.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.DataFormConfig" class="name">class <span class="ident">DataFormConfig</span></p>
      
  
    <div class="desc"><p>deprecated Shared configuration object - all projects can see this and potentially use it
Object name comes from a concatentaion of all of the levels of custom field config</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">DataFormConfig</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;deprecated Shared configuration object - all projects can see this and potentially use it</span>
<span class="sd">    Object name comes from a concatentaion of all of the levels of custom field config</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">)</span>
    <span class="n">human_added</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">NullBooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s1">&#39;self&#39;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;children&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="n">l0</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l0&quot;</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The first level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l0 would be industries.&quot;</span><span class="p">)</span>
    <span class="n">l1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l1&quot;</span><span class="p">,</span>
                           <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The second level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l1 would be companies.&quot;</span><span class="p">)</span>
    <span class="n">l2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l2&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The third level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l2 would be departments.&quot;</span><span class="p">)</span>
    <span class="n">l3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l3&quot;</span><span class="p">,</span>
                           <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The forth level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l3 would be teams.&quot;</span><span class="p">)</span>
    <span class="n">l4</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span>
                           <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;l4&quot;</span><span class="p">,</span>
                           <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                           <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The fifth level in the hierarchy of the form you are trying to create. For example, if curating industries, companies,  employees , teams and departments, l4 would be employees.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l0</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">l0</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l1</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l1</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l2</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l2</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l3</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l3</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l4</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot; &gt;&gt; &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">l4</span><span class="o">.</span><span class="n">__unicode__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">string</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">unique_together</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;l0&#39;</span><span class="p">,</span> <span class="s1">&#39;l1&#39;</span><span class="p">,</span> <span class="s1">&#39;l2&#39;</span><span class="p">,</span> <span class="s1">&#39;l3&#39;</span><span class="p">,</span> <span class="s1">&#39;l4&#39;</span><span class="p">),)</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;l0&#39;</span><span class="p">,</span> <span class="s1">&#39;l1&#39;</span><span class="p">,</span> <span class="s1">&#39;l2&#39;</span><span class="p">,</span> <span class="s1">&#39;l3&#39;</span><span class="p">,</span> <span class="s1">&#39;l4&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">last_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">last_level</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l4_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l4&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l3_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l3&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l2_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l2&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l1_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l1&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l0_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;l0&quot;</span>
        <span class="k">return</span> <span class="n">last_level</span>

    <span class="k">def</span> <span class="nf">get_all_ancestor_objects</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">tree_builder</span><span class="o">=</span><span class="p">{},</span> <span class="n">uri_stub</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;l0&quot;</span><span class="p">,</span> <span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="s2">&quot;l2&quot;</span><span class="p">,</span> <span class="s2">&quot;l3&quot;</span><span class="p">,</span> <span class="s2">&quot;l4&quot;</span><span class="p">]</span>
        <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_id&quot;</span> <span class="o">%</span> <span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">]</span>
        <span class="n">used_levels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">lev</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">lev</span> <span class="o">!=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_id&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_level</span><span class="p">():</span>
                <span class="n">used_levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lev</span><span class="p">)</span>

        <span class="n">filters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">used_levels</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">level_name</span> <span class="o">=</span> <span class="n">used_levels</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">level_filters</span> <span class="o">=</span> <span class="p">{</span><span class="n">lev</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">lev</span><span class="p">)</span> <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">used_levels</span><span class="p">[:</span><span class="n">i</span><span class="p">]}</span>
            <span class="n">filters</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">level_filters</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">filter_set</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">filters</span><span class="p">):</span>
            <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="n">lev</span><span class="p">:</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">}</span>
            <span class="n">new_filters</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">filter_set</span><span class="p">)</span>

            <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;defaults&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;created_by_id&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                    <span class="s2">&quot;human_added&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">}</span>
            <span class="n">new_object</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">DataFormConfig</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
                <span class="o">**</span><span class="n">defaults</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">obj</span><span class="o">.</span><span class="n">parent_id</span><span class="p">:</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="c1">#</span>

            <span class="n">permitted_child_array</span> <span class="o">=</span> <span class="n">tree_builder</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri_stub</span><span class="p">,</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="p">[])</span>
            <span class="n">permitted_child_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">tree_builder</span><span class="p">[</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri_stub</span><span class="p">,</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">permitted_child_array</span><span class="p">))</span>

            <span class="n">obj</span> <span class="o">=</span> <span class="n">new_object</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">tree_builder</span><span class="p">[</span><span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="p">]</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.DataFormConfig">DataFormConfig</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.children" class="name">var <span class="ident">children</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.human_added" class="name">var <span class="ident">human_added</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.l0" class="name">var <span class="ident">l0</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.l1" class="name">var <span class="ident">l1</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.l2" class="name">var <span class="ident">l2</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.l3" class="name">var <span class="ident">l3</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.l4" class="name">var <span class="ident">l4</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.parent" class="name">var <span class="ident">parent</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.DataFormConfig.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.get_all_ancestor_objects">
    <p>def <span class="ident">get_all_ancestor_objects</span>(</p><p>obj, request, tree_builder={}, uri_stub=&#39;&#39;)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.get_all_ancestor_objects', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.get_all_ancestor_objects" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_all_ancestor_objects</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">tree_builder</span><span class="o">=</span><span class="p">{},</span> <span class="n">uri_stub</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;l0&quot;</span><span class="p">,</span> <span class="s2">&quot;l1&quot;</span><span class="p">,</span> <span class="s2">&quot;l2&quot;</span><span class="p">,</span> <span class="s2">&quot;l3&quot;</span><span class="p">,</span> <span class="s2">&quot;l4&quot;</span><span class="p">]</span>
    <span class="n">levels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_id&quot;</span> <span class="o">%</span> <span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">]</span>
    <span class="n">used_levels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">lev</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">lev</span> <span class="o">!=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_id&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">last_level</span><span class="p">():</span>
            <span class="n">used_levels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lev</span><span class="p">)</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">used_levels</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">level_name</span> <span class="o">=</span> <span class="n">used_levels</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">level_filters</span> <span class="o">=</span> <span class="p">{</span><span class="n">lev</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">lev</span><span class="p">)</span> <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">used_levels</span><span class="p">[:</span><span class="n">i</span><span class="p">]}</span>
        <span class="n">filters</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">level_filters</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">filter_set</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">filters</span><span class="p">):</span>
        <span class="n">defaults</span> <span class="o">=</span> <span class="p">{</span><span class="n">lev</span><span class="p">:</span> <span class="bp">None</span> <span class="k">for</span> <span class="n">lev</span> <span class="ow">in</span> <span class="n">levels</span><span class="p">}</span>
        <span class="n">new_filters</span> <span class="o">=</span> <span class="n">defaults</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">filter_set</span><span class="p">)</span>
        <span class="n">defaults</span><span class="p">[</span><span class="s2">&quot;defaults&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;created_by_id&quot;</span><span class="p">:</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                <span class="s2">&quot;human_added&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">}</span>
        <span class="n">new_object</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">DataFormConfig</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
            <span class="o">**</span><span class="n">defaults</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">obj</span><span class="o">.</span><span class="n">parent_id</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">permitted_child_array</span> <span class="o">=</span> <span class="n">tree_builder</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri_stub</span><span class="p">,</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="p">[])</span>
        <span class="n">permitted_child_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">tree_builder</span><span class="p">[</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">uri_stub</span><span class="p">,</span> <span class="n">new_object</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">permitted_child_array</span><span class="p">))</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">new_object</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tree_builder</span><span class="p">[</span><span class="s2">&quot;root&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.last_level">
    <p>def <span class="ident">last_level</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.last_level', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.last_level" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">last_level</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">last_level</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l4_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;l4&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l3_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;l3&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l2_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;l2&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l1_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;l1&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l0_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;l0&quot;</span>
    <span class="k">return</span> <span class="n">last_level</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.DataFormConfig.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.DataFormConfig.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.DataFormConfig.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.Invitation" class="name">class <span class="ident">Invitation</span></p>
      
  
    <div class="desc"><p>Invitation model which saves the fact that an invitation has been sent to a given user</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Invitation</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Invitation model which saves the fact that an invitation has been sent to a given user&quot;&quot;&quot;</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">)</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="p">)</span>
    <span class="n">projects</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.Invitation">Invitation</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.email" class="name">var <span class="ident">email</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.first_name" class="name">var <span class="ident">first_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.last_name" class="name">var <span class="ident">last_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.projects" class="name">var <span class="ident">projects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.Invitation.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Invitation.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Invitation.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Invitation.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.PinnedCustomField" class="name">class <span class="ident">PinnedCustomField</span></p>
      
  
    <div class="desc"><p>PinnedCustomField is the model 
which stores all of the information about 
a particular field in a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">PinnedCustomField</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;PinnedCustomField is the model </span>
<span class="sd">    which stores all of the information about </span>
<span class="sd">    a particular field in a project&quot;&quot;&quot;</span>
    <span class="n">TEXT</span> <span class="o">=</span> <span class="s2">&quot;text&quot;</span>
    <span class="n">TEXTAREA</span> <span class="o">=</span> <span class="s2">&quot;textarea&quot;</span>
    <span class="n">UISELECT</span> <span class="o">=</span> <span class="s2">&quot;uiselect&quot;</span>
    <span class="n">INTEGER</span> <span class="o">=</span> <span class="s2">&quot;integer&quot;</span>
    <span class="n">NUMBER</span> <span class="o">=</span> <span class="s2">&quot;number&quot;</span>
    <span class="n">RADIOS</span> <span class="o">=</span> <span class="s2">&quot;radios&quot;</span>
    <span class="n">UISELECTTAG</span> <span class="o">=</span> <span class="s2">&quot;uiselecttag&quot;</span>
    <span class="n">UISELECTTAGS</span> <span class="o">=</span> <span class="s2">&quot;uiselecttags&quot;</span>
    <span class="n">CHECKBOXES</span> <span class="o">=</span> <span class="s2">&quot;checkboxes&quot;</span>
    <span class="n">PERCENTAGE</span> <span class="o">=</span> <span class="s2">&quot;percentage&quot;</span>
    <span class="n">DECIMAL</span> <span class="o">=</span> <span class="s2">&quot;decimal&quot;</span>
    <span class="n">BOOLEAN</span> <span class="o">=</span> <span class="s2">&quot;boolean&quot;</span>
    <span class="n">DATE</span> <span class="o">=</span> <span class="s2">&quot;date&quot;</span>
    <span class="n">IMAGE</span> <span class="o">=</span> <span class="s2">&quot;imghref&quot;</span>
    <span class="n">LINK</span> <span class="o">=</span> <span class="s2">&quot;href&quot;</span>
    <span class="n">FILE_ATTACHMENT</span> <span class="o">=</span> <span class="s2">&quot;file&quot;</span>


    <span class="k">def</span> <span class="nf">pandas_converter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_length</span><span class="p">,</span> <span class="n">pandas_dtype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert a variable from its pandas datatype, not sure if used podssibly deprecated&quot;&quot;&quot;</span>
        <span class="n">dtype</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pandas_dtype</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;int64&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">INTEGER</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;float64&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">NUMBER</span>
        <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">field_length</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXTAREA</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXT</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXT</span>

    <span class="n">FIELD_TYPE_CHOICES</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">((</span>
        <span class="p">(</span><span class="n">TEXT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Short text field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">}</span> <span class="p">,</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-font&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span> <span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}</span>
         <span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Short text field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="c1"># (TEXTAREA, {&quot;name&quot;: &quot;Full text&quot;, &quot;data&quot;: {</span>
        <span class="c1">#  &quot;icon&quot;: &quot;&lt;span class =&#39;glyphicon glyphicon-font&#39;&gt;&lt;/span&gt;&quot;, &quot;type&quot;: &quot;string&quot;, &quot;format&quot;: &quot;textarea&quot;}, &quot;test_datatype&quot; : test_string}),</span>
        <span class="p">(</span><span class="n">TEXTAREA</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Full text&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-font&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;ckeditor&quot;</span><span class="p">,</span> <span class="s2">&quot;ckeditor&quot;</span><span class="p">:{</span> <span class="s1">&#39;config.toolbar_Standard&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;basicstyles&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Italic&#39;</span><span class="p">,</span><span class="s1">&#39;Underline&#39;</span><span class="p">,</span><span class="s1">&#39;Strike&#39;</span><span class="p">,</span><span class="s1">&#39;Subscript&#39;</span><span class="p">,</span><span class="s1">&#39;Superscript&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;RemoveFormat&#39;</span> <span class="p">]</span> <span class="p">},</span> <span class="p">]</span> <span class="p">},},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">UISELECT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Choice field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> 
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;filtereddropdown&quot;</span><span class="p">,</span> 
         <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;options&quot;</span><span class="p">:{</span>
                          <span class="s2">&quot;tagging&quot;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s2">&quot;fetchDataEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;openedTaggingDropdown&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;dataArrivesEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;autoCompleteTaggingData&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;multiple&quot;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s2">&quot;staticItems&quot;</span> <span class="p">:</span> <span class="p">[]</span> 
                <span class="p">},</span>

         <span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">INTEGER</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Integer field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-stats&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_int</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">NUMBER</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Decimal field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-sound-5-1&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_number</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">UISELECTTAG</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Choice allowing create&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span>
         <span class="s2">&quot;data&quot;</span><span class="p">:</span>  <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-tag&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> 
          <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;filtereddropdown&quot;</span><span class="p">,</span> 
          <span class="s2">&quot;options&quot;</span><span class="p">:{</span>
                          <span class="s2">&quot;tagging&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                          <span class="s2">&quot;fetchDataEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;openedTaggingDropdown&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;dataArrivesEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;autoCompleteTaggingData&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;multiple&quot;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                          <span class="s2">&quot;staticItems&quot;</span> <span class="p">:</span> <span class="p">[]</span> 
                <span class="p">},</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">UISELECTTAGS</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Tags field allowing create&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> 
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> 
            <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
            <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span> 
            <span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-tags&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;array&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;filtereddropdown&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
                  <span class="p">},</span>
             <span class="s2">&quot;options&quot;</span><span class="p">:{</span>
                          <span class="s2">&quot;tagging&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                          <span class="s2">&quot;fetchDataEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;openedTaggingDropdown&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;dataArrivesEventName&quot;</span> <span class="p">:</span> <span class="s2">&quot;autoCompleteTaggingData&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;multiple&quot;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                          <span class="s2">&quot;staticItems&quot;</span> <span class="p">:</span> <span class="p">[]</span> 
                <span class="p">}</span>
            <span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span>
            <span class="p">}),</span>
        <span class="p">(</span><span class="n">PERCENTAGE</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Percentage field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;%&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span> <span class="s2">&quot;maximum&quot;</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_percentage</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">RADIOS</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Radio buttons&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;%&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span><span class="s2">&quot;radios&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">DATE</span><span class="p">,</span>  <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Date Field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-calendar&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>   <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span><span class="p">:</span> <span class="n">test_stringdate</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">LINK</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Link to server or external&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span>
                                                               <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon glyphicon-new-window&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">IMAGE</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Image link to embed&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span> <span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;imghref&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span>
                                                         <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon glyphicon-picture&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">},</span>  <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">DECIMAL</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Decimal field&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span> <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;3.1&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">},</span>  <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_number</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">BOOLEAN</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span><span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;3.1&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">},</span><span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_bool</span> <span class="p">}),</span>
        <span class="p">(</span><span class="s2">&quot;related&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;TEST&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;copyfield&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;defaultCustomFieldRenderer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon&#39;&gt;3.1&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_string</span><span class="p">}),</span>
        <span class="p">(</span><span class="n">FILE_ATTACHMENT</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;File Upload&quot;</span><span class="p">,</span> <span class="s2">&quot;display_form&quot;</span><span class="p">:{</span><span class="s2">&quot;type&quot;</span> <span class="p">:</span><span class="s2">&quot;attachmentlist&quot;</span><span class="p">},</span> <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&quot;className&quot;</span><span class="p">:</span> <span class="s2">&quot;htCenter htMiddle &quot;</span><span class="p">,</span>
         <span class="s2">&quot;icon&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;span class =&#39;glyphicon glyphicon-paperclip&#39;&gt;&lt;/span&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;file_upload&quot;</span><span class="p">,</span> <span class="s2">&quot;renderer_named&quot;</span> <span class="p">:</span> <span class="s2">&quot;fileUploadRenderer&quot;</span><span class="p">},</span> <span class="s2">&quot;test_datatype&quot;</span> <span class="p">:</span> <span class="n">test_file</span><span class="p">})</span>

    <span class="p">))</span>

    <span class="n">field_key</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>  <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;field key value, not currently used perhaps deprecated&quot;</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Name of the field in the project, may contain any character apart from slashes and dots&quot;</span><span class="p">)</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Description of the field to be displayed in the angular schema form when editing data&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;pinned_custom_field&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;the custom field config object this field is part of&quot;</span><span class="p">)</span>
    <span class="n">required</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whetehr the field is required&quot;</span><span class="p">)</span>
    <span class="n">field_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">(</span>
        <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">FIELD_TYPE_CHOICES</span><span class="o">.</span><span class="n">items</span><span class="p">()),</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The data type of the data to be added in the front end forms for this field&quot;</span> <span class="p">)</span>
    <span class="n">allowed_values</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What values are allowed for this field&quot;</span><span class="p">)</span>
    <span class="n">position</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">PositiveSmallIntegerField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Auto-filled field that says what order the fields in a custom field config should be displayed int he form&quot;</span><span class="p">)</span>
    <span class="n">default</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The default value of this field to be applied when adding data via the angular schema form&quot;</span><span class="p">)</span>

    <span class="n">open_or_restricted</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">OPEN</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">RESTRICTION_CHOICES</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether to open up this field to people who only have viewer rights on the project&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Data type testing for fields in the custom fields of a compound batch (possibly deprecated or unfinished&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;test_datatype&quot;</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>


    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">get_items_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List the allowed values for a particular field&quot;&quot;&quot;</span>
        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                 <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">allowed_values</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
        <span class="n">setitems</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">items</span><span class="p">)))</span>
        <span class="n">testdata</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;doc_count&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()}</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">setitems</span> <span class="k">if</span> <span class="n">item</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">testdata</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">get_space_replaced_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the name of the field in a space replaced way for ealsticsearch (deprecated)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">u&quot; &quot;</span><span class="p">,</span> <span class="s2">u&quot;__space__&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unicode representation of the field&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">  </span><span class="si">%s</span><span class="s2">  </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field_key</span><span class="p">,</span>  <span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="p">)</span>

    <span class="nd">@cached_property</span>
    <span class="k">def</span> <span class="nf">field_values</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pull out the data that is required when compiling the angular schema form JSON for a particular field&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>

        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">data</span><span class="p">[</span><span class="s2">&quot;placeholder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">description</span>
        
        <span class="n">display_form</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;display_form&quot;</span><span class="p">])</span>
        <span class="n">form</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;knownBy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;custom_fields.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">position</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>
        <span class="n">display_form</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_space_replaced_name</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span>

        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">description</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;disableSuccessState&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">form</span><span class="p">[</span><span class="s2">&quot;feedback&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">searchitems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;array&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">default</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
                <span class="n">form</span><span class="p">[</span><span class="s2">&quot;minLength&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="s2">&quot;filtereddropdown&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;filtereddropdown&quot;</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;placeholder&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Choose...&quot;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;options&#39;</span><span class="p">][</span><span class="s1">&#39;staticItems&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_items_simple</span>

        <span class="k">if</span> <span class="s2">&quot;radios&quot;</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;radios&quot;</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;enum&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_items_simple</span><span class="p">]</span>
            <span class="n">form</span><span class="p">[</span><span class="s1">&#39;titleMap&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]}</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">get_items_simple</span><span class="p">]</span>


        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;file_upload&quot;</span><span class="p">:</span>
            <span class="c1">#will need to alter the init method here (so it&#39;s no longer using dataoverviewctrl)</span>
            <span class="c1">#also the success method to add the projectid? Not sure what that means really</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;uploadOptions&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;modal&quot;</span><span class="p">:</span> <span class="p">{</span>
                                          <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;Modal Title specified here&#39;</span><span class="p">,</span>
                                          <span class="s1">&#39;flow&#39;</span><span class="p">:</span> <span class="p">{</span>
                                            <span class="s1">&#39;dropEnabled&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                            <span class="s1">&#39;imageOnly&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                                            <span class="s1">&#39;init&#39;</span><span class="p">:</span> <span class="p">{},</span>
                                            <span class="s1">&#39;success&#39;</span><span class="p">:</span> <span class="s1">&#39;success(file, formkey)&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;removeFile&#39;</span><span class="p">:</span> <span class="s1">&#39;removeFile(formkey, index, url)&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;imageFunction&#39;</span><span class="p">:</span> <span class="s1">&#39;fetchImage(url)&#39;</span><span class="p">,</span>
                                            <span class="s1">&#39;sizeCheck&#39;</span><span class="p">:</span> <span class="s1">&#39;sizeCheck(file, formkey)&#39;</span>
                                          <span class="p">}</span>
                                        <span class="p">}</span>
                                      <span class="p">}</span>
            <span class="n">data</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;attachments&quot;</span> <span class="p">:</span> <span class="p">[]}</span>
            <span class="n">form</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;attachments&quot;</span> <span class="p">:</span> <span class="p">[]}</span>



        <span class="c1">#add config options for ckeditor</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;ckeditor&quot;</span><span class="p">:</span>
            <span class="n">form</span><span class="p">[</span><span class="s1">&#39;ckeditor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;toolbar&#39;</span><span class="p">:</span> <span class="p">[</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;clipboard&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Cut&#39;</span><span class="p">,</span> <span class="s1">&#39;Copy&#39;</span><span class="p">,</span> <span class="s1">&#39;Paste&#39;</span><span class="p">,</span> <span class="s1">&#39;PasteText&#39;</span><span class="p">,</span> <span class="s1">&#39;PasteFromWord&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;Undo&#39;</span><span class="p">,</span> <span class="s1">&#39;Redo&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;editing&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Scayt&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;links&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Link&#39;</span><span class="p">,</span> <span class="s1">&#39;Unlink&#39;</span><span class="p">,</span> <span class="s1">&#39;Anchor&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;tools&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Maximize&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="s1">&#39;/&#39;</span><span class="p">,</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;basicstyles&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Bold&#39;</span><span class="p">,</span><span class="s1">&#39;Italic&#39;</span><span class="p">,</span><span class="s1">&#39;Underline&#39;</span><span class="p">,</span><span class="s1">&#39;Strike&#39;</span><span class="p">,</span><span class="s1">&#39;Subscript&#39;</span><span class="p">,</span><span class="s1">&#39;Superscript&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;RemoveFormat&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;insert&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;HorizontalRule&#39;</span><span class="p">,</span><span class="s1">&#39;SpecialChar&#39;</span><span class="p">,</span><span class="s1">&#39;PageBreak&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;paragraph&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;NumberedList&#39;</span><span class="p">,</span><span class="s1">&#39;BulletedList&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;Outdent&#39;</span><span class="p">,</span><span class="s1">&#39;Indent&#39;</span><span class="p">,</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyLeft&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyCenter&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyRight&#39;</span><span class="p">,</span><span class="s1">&#39;JustifyBlock&#39;</span><span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;styles&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;Styles&#39;</span><span class="p">,</span> <span class="s1">&#39;Format&#39;</span> <span class="p">]</span> <span class="p">},</span>
                                                <span class="p">{</span> <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;about&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="s1">&#39;About&#39;</span> <span class="p">]</span> <span class="p">}</span>
                                            <span class="p">]</span> <span class="p">}</span>

        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span> <span class="o">==</span> <span class="n">obj</span><span class="o">.</span><span class="n">DATE</span><span class="p">:</span>
            <span class="n">maxdate</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">form</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s2">&quot;minDate&quot;</span><span class="p">:</span> <span class="s2">&quot;2000-01-01&quot;</span><span class="p">,</span>
                <span class="s2">&quot;maxDate&quot;</span><span class="p">:</span> <span class="n">maxdate</span><span class="p">,</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;datepicker&#39;</span><span class="p">,</span>
                <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;yyyy-mm-dd&quot;</span><span class="p">,</span>
                <span class="s1">&#39;pickadate&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;selectYears&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                    <span class="s1">&#39;selectMonths&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">})</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;options&quot;</span><span class="p">]:</span>
                <span class="n">stuff</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">stuff</span><span class="p">:</span>
                    <span class="n">form</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">stuff</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">,</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">form</span><span class="p">),</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">display_form</span><span class="p">))</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Ordering by default in the model for use with tastypie related resource which does not give a way to order the related field values&quot;&quot;&quot;</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span>
        <span class="n">get_latest_by</span> <span class="o">=</span> <span class="s1">&#39;created&#39;</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.PinnedCustomField">PinnedCustomField</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.BOOLEAN" class="name">var <span class="ident">BOOLEAN</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.CHECKBOXES" class="name">var <span class="ident">CHECKBOXES</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.DATE" class="name">var <span class="ident">DATE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.DECIMAL" class="name">var <span class="ident">DECIMAL</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.FIELD_TYPE_CHOICES" class="name">var <span class="ident">FIELD_TYPE_CHOICES</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.FILE_ATTACHMENT" class="name">var <span class="ident">FILE_ATTACHMENT</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.IMAGE" class="name">var <span class="ident">IMAGE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.INTEGER" class="name">var <span class="ident">INTEGER</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.LINK" class="name">var <span class="ident">LINK</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.NUMBER" class="name">var <span class="ident">NUMBER</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.PERCENTAGE" class="name">var <span class="ident">PERCENTAGE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.RADIOS" class="name">var <span class="ident">RADIOS</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.TEXT" class="name">var <span class="ident">TEXT</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.TEXTAREA" class="name">var <span class="ident">TEXTAREA</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.UISELECT" class="name">var <span class="ident">UISELECT</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.UISELECTTAG" class="name">var <span class="ident">UISELECTTAG</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.UISELECTTAGS" class="name">var <span class="ident">UISELECTTAGS</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.allowed_values" class="name">var <span class="ident">allowed_values</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.custom_field_config" class="name">var <span class="ident">custom_field_config</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.default" class="name">var <span class="ident">default</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.description" class="name">var <span class="ident">description</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.field_key" class="name">var <span class="ident">field_key</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.field_type" class="name">var <span class="ident">field_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.open_or_restricted" class="name">var <span class="ident">open_or_restricted</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.position" class="name">var <span class="ident">position</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.required" class="name">var <span class="ident">required</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.PinnedCustomField.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.get_field_type_display">
    <p>def <span class="ident">get_field_type_display</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.get_field_type_display', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.get_field_type_display" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.get_open_or_restricted_display">
    <p>def <span class="ident">get_open_or_restricted_display</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.get_open_or_restricted_display', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.get_open_or_restricted_display" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.pandas_converter">
    <p>def <span class="ident">pandas_converter</span>(</p><p>self, field_length, pandas_dtype)</p>
    </div>
    

    
  
    <div class="desc"><p>Convert a variable from its pandas datatype, not sure if used podssibly deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.pandas_converter', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.pandas_converter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">pandas_converter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_length</span><span class="p">,</span> <span class="n">pandas_dtype</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert a variable from its pandas datatype, not sure if used podssibly deprecated&quot;&quot;&quot;</span>
    <span class="n">dtype</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pandas_dtype</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;int64&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">INTEGER</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;float64&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">NUMBER</span>
    <span class="k">if</span> <span class="n">dtype</span> <span class="o">==</span> <span class="s2">&quot;object&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field_length</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXTAREA</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXT</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">TEXT</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.validate_field">
    <p>def <span class="ident">validate_field</span>(</p><p>self, value)</p>
    </div>
    

    
  
    <div class="desc"><p>Data type testing for fields in the custom fields of a compound batch (possibly deprecated or unfinished</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.validate_field', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.validate_field" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Data type testing for fields in the custom fields of a compound batch (possibly deprecated or unfinished&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">FIELD_TYPE_CHOICES</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">field_type</span><span class="p">][</span><span class="s2">&quot;test_datatype&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.PinnedCustomField.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.PinnedCustomField.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.PinnedCustomField.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.Project" class="name">class <span class="ident">Project</span></p>
      
  
    <div class="desc"><p>Project is a holder for moleculedictionary objects and for batches and permissions on the system are inherited from the project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Project</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">,</span> <span class="n">ProjectPermissionMixin</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39; Project is a holder for moleculedictionary objects and for batches and permissions on the system are inherited from the project&#39;&#39;&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What would you like to call your project&quot;</span><span class="p">)</span>
    <span class="n">project_key</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">SlugField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;key for the project, mostly deprecated in favour of id now but still used in some places&quot;</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;auth.User&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;User who created the project&quot;</span><span class="p">)</span>
    <span class="n">custom_field_config</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_model.CustomFieldConfig&quot;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s2">&quot;project&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Custom field config object which is linked to this project&quot;</span><span class="p">)</span>
    <span class="n">project_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">ProjectType</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Project type that this project is linked to&quot;</span><span class="p">)</span>
    <span class="n">project_counter_start</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;start of the incremental ID field for this project&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">get_latest_by</span> <span class="o">=</span> <span class="s1">&#39;created&#39;</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@models.permalink</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;post_slug&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_key</span><span class="p">}</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.Project">Project</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.Project.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.Meta" class="name">var <span class="ident">Meta</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.Meta">Meta</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.cbhcompoundbatch_set" class="name">var <span class="ident">cbhcompoundbatch_set</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.cbhcompoundmultiplebatch_set" class="name">var <span class="ident">cbhcompoundmultiplebatch_set</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.cbhflowfile_set" class="name">var <span class="ident">cbhflowfile_set</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.custom_field_config" class="name">var <span class="ident">custom_field_config</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.invitation_set" class="name">var <span class="ident">invitation_set</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.moleculedictionary_set" class="name">var <span class="ident">moleculedictionary_set</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.objects" class="name">var <span class="ident">objects</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.objects">objects</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.project_counter_start" class="name">var <span class="ident">project_counter_start</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.project_key" class="name">var <span class="ident">project_key</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.Project.project_type" class="name">var <span class="ident">project_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.Project.pk" class="name">var <span class="ident">pk</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.pk">pk</a></code>
    </p>

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.__init__">__init__</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.check">check</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.clean">clean</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.clean_fields">clean_fields</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.date_error_message">date_error_message</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.delete">delete</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.from_db">from_db</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.full_clean">full_clean</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_absolute_url">
    <p>def <span class="ident">get_absolute_url</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_absolute_url', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_absolute_url" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">reverse</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">None</span><span class="p">,</span> <span class="o">*</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_contenttype_for_instance">
    <p>def <span class="ident">get_contenttype_for_instance</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.get_contenttype_for_instance">get_contenttype_for_instance</a></code>
    </p>

    
  
    <div class="desc inherited"><p>All project permissions now simply sit under the project content type</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_contenttype_for_instance', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_contenttype_for_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_contenttype_for_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;All project permissions now simply sit under the project content type&quot;&quot;&quot;</span>
    <span class="n">ct</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ct</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.get_deferred_fields">get_deferred_fields</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_instance_permission_by_codename">
    <p>def <span class="ident">get_instance_permission_by_codename</span>(</p><p>self, codename)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.get_instance_permission_by_codename">get_instance_permission_by_codename</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Get or create a permission object for a given codename on this project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_instance_permission_by_codename', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_instance_permission_by_codename" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_instance_permission_by_codename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get or create a permission object for a given codename on this project&quot;&quot;&quot;</span>
    <span class="n">pm</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
        <span class="n">codename</span><span class="o">=</span><span class="n">get_permission_codename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">codename</span><span class="p">),</span> 
        <span class="n">content_type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_contenttype_for_instance</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> 
        <span class="n">name</span><span class="o">=</span><span class="n">get_permission_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">codename</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">pm</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.make_editor">
    <p>def <span class="ident">make_editor</span>(</p><p>self, group_or_user)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.make_editor">make_editor</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Make a user object an editor of a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.make_editor', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.make_editor" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">make_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a user object an editor of a project&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
        <span class="n">group_or_user</span><span class="p">,</span>  <span class="s2">&quot;editor&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.make_owner">
    <p>def <span class="ident">make_owner</span>(</p><p>self, group_or_user)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.make_owner">make_owner</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Make a user object an owner of a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.make_owner', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.make_owner" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">make_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a user object an owner of a project&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
        <span class="n">group_or_user</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.make_viewer">
    <p>def <span class="ident">make_viewer</span>(</p><p>self, group_or_user)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.make_viewer">make_viewer</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Make a user object an viewer of a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.make_viewer', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.make_viewer" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">make_viewer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a user object an viewer of a project&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
        <span class="n">group_or_user</span><span class="p">,</span>   <span class="s2">&quot;viewer&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.prepare_database_save">prepare_database_save</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.refresh_from_db">refresh_from_db</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.save">save</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.save_base">save_base</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.serializable_value">serializable_value</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.sync_permissions">
    <p>def <span class="ident">sync_permissions</span>(</p><p>self)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.sync_permissions">sync_permissions</a></code>
    </p>

    
  
    <div class="desc inherited"><p>first we delete the existing permissions that are not labelled in the model</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.sync_permissions', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.sync_permissions" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">sync_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;first we delete the existing permissions that are not labelled in the model&#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">perm</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.unique_error_message">unique_error_message</a></code>
    </p>

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.Project.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></code>.<code><a href="#cbh_core_model.models.ProjectPermissionMixin.validate_unique">validate_unique</a></code>
    </p>

    
  
    <div class="desc inherited"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.Project.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.Project.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.ProjectPermissionManager" class="name">class <span class="ident">ProjectPermissionManager</span></p>
      
  
    <div class="desc"><p>Manager methods to be inherited by the project object to manage permissions on projects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ProjectPermissionManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager methods to be inherited by the project object to manage permissions on projects&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">sync_all_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Run trough all of the projects on the system and sync up the permission objects that they require&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="n">proj</span><span class="o">.</span><span class="n">sync_permissions</span><span class="p">()</span>



    <span class="k">def</span> <span class="nf">get_next_incremental_id_for_compound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Using the Redis ID generator retrieve the next ID for this project&quot;&quot;&quot;</span>
        <span class="n">gen</span> <span class="o">=</span> <span class="n">IncrementalIdGenerator</span><span class="p">(</span><span class="s2">&quot;project_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">maxReserveBuffer</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">new_id</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">new_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">proj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">project_id</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">new_id</span> <span class="o">!=</span> <span class="n">proj</span><span class="o">.</span><span class="n">project_counter_start</span><span class="p">:</span>
                <span class="n">new_id</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">new_id</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.ProjectPermissionManager">ProjectPermissionManager</a></li>
          <li>django.db.models.manager.Manager</li>
          <li>django.db.models.manager.BaseManagerFromQuerySet</li>
          <li>django.db.models.manager.BaseManager</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.ProjectPermissionManager.creation_counter" class="name">var <span class="ident">creation_counter</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectPermissionManager.use_in_migrations" class="name">var <span class="ident">use_in_migrations</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.ProjectPermissionManager.db" class="name">var <span class="ident">db</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">BaseManager</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_set_creation_counter</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_inherited</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_db</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hints</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.aggregate">
    <p>def <span class="ident">aggregate</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary containing the calculations (aggregation)
over the current queryset</p>
<p>If args is present the expression is passed as a kwarg using
the Aggregate object's default alias.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.aggregate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.aggregate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.all">
    <p>def <span class="ident">all</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.all', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># We can&#39;t proxy this method through the `QuerySet` like we do for the</span>
    <span class="c1"># rest of the `QuerySet` methods. This is because `QuerySet.all()`</span>
    <span class="c1"># works by creating a &quot;copy&quot; of the current queryset and in making said</span>
    <span class="c1"># copy, all the cached `prefetch_related` lookups are lost. See the</span>
    <span class="c1"># implementation of `RelatedManager.get_queryset()` for a better</span>
    <span class="c1"># understanding of how this comes into play.</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.annotate">
    <p>def <span class="ident">annotate</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a query set in which the returned objects have been annotated
with extra data or aggregations.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.annotate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.annotate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.bulk_create">
    <p>def <span class="ident">bulk_create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Inserts each of the instances into the database. This does <em>not</em> call
save() on each of the instances, does not send any pre/post save
signals, and does not set the primary key attribute if it is an
autoincrement field. Multi-table models are not supported.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.bulk_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.bulk_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.check">
    <p>def <span class="ident">check</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.complex_filter">
    <p>def <span class="ident">complex_filter</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with filter_obj added to the filters.</p>
<p>filter_obj can be a Q object (or anything with an add_to_query()
method) or a dictionary of keyword lookup arguments.</p>
<p>This exists to support framework features such as 'limit_choices_to',
and usually it will be more natural to use other methods.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.complex_filter', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.complex_filter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.contribute_to_class">
    <p>def <span class="ident">contribute_to_class</span>(</p><p>self, model, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.contribute_to_class', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.contribute_to_class" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">contribute_to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="c1"># TODO: Use weakref because of possible memory leak / circular reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="c1"># Only contribute the manager if the model is concrete</span>
    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">abstract</span><span class="p">:</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">AbstractManagerDescriptor</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">SwappedManagerDescriptor</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># if not model._meta.abstract and not model._meta.swapped:</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ManagerDescriptor</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s1">&#39;_default_manager&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">creation_counter</span> <span class="o">&lt;</span> <span class="n">model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">creation_counter</span><span class="p">):</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_default_manager</span> <span class="o">=</span> <span class="bp">self</span>
    <span class="n">abstract</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">abstract</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_inherited</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">):</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">managers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">creation_counter</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">abstract</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.count">
    <p>def <span class="ident">count</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Performs a SELECT COUNT() and returns the number of records as an
integer.</p>
<p>If the QuerySet is already fully cached this simply returns the length
of the cached results set to avoid multiple SELECT COUNT(*) calls.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.count', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.count" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.create">
    <p>def <span class="ident">create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new object with the given kwargs, saving it to the database
and returning the created object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.dates">
    <p>def <span class="ident">dates</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of date objects representing all available dates for
the given field_name, scoped to 'kind'.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.dates', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.dates" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.datetimes">
    <p>def <span class="ident">datetimes</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of datetime objects representing all available
datetimes for the given field_name, scoped to 'kind'.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.datetimes', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.datetimes" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.db_manager">
    <p>def <span class="ident">db_manager</span>(</p><p>self, using=None, hints=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.db_manager', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.db_manager" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">db_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hints</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_db</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_db</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_hints</span> <span class="o">=</span> <span class="n">hints</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hints</span>
    <span class="k">return</span> <span class="n">obj</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.deconstruct">
    <p>def <span class="ident">deconstruct</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a 5-tuple of the form (as_manager (True), manager_class,
queryset_class, args, kwargs).</p>
<p>Raises a ValueError if the manager is dynamically generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.deconstruct', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.deconstruct" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deconstruct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a 5-tuple of the form (as_manager (True), manager_class,</span>
<span class="sd">    queryset_class, args, kwargs).</span>
<span class="sd">    Raises a ValueError if the manager is dynamically generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">qs_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queryset_class</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_built_with_as_manager&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="c1"># using MyQuerySet.as_manager()</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">True</span><span class="p">,</span>  <span class="c1"># as_manager</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># manager_class</span>
            <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">qs_class</span><span class="o">.</span><span class="n">__module__</span><span class="p">,</span> <span class="n">qs_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span>  <span class="c1"># qs_class</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># args</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># kwargs</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">module_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__module__</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span>
        <span class="c1"># Make sure it&#39;s actually there and not an inner class</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Could not find manager </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;Please note that you need to inherit from managers you &quot;</span>
                <span class="s2">&quot;dynamically generated with &#39;from_queryset()&#39;.&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">module_name</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">False</span><span class="p">,</span>  <span class="c1"># as_manager</span>
            <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span>  <span class="c1"># manager_class</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># qs_class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_constructor_args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_constructor_args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="c1"># kwargs</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.defer">
    <p>def <span class="ident">defer</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Defers the loading of data for certain fields until they are accessed.
The set of fields to defer is added to any existing set of deferred
fields. The only exception to this is if None is passed in as the only
parameter, in which case all deferrals are removed (None acts as a
reset option).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.defer', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.defer" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.distinct">
    <p>def <span class="ident">distinct</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will select only distinct results.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.distinct', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.distinct" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.earliest">
    <p>def <span class="ident">earliest</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.earliest', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.earliest" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.exclude">
    <p>def <span class="ident">exclude</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with NOT (args) ANDed to the existing
set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.exclude', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.exclude" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.exists">
    <p>def <span class="ident">exists</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.exists', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.exists" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.extra">
    <p>def <span class="ident">extra</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Adds extra SQL fragments to the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.extra', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.extra" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.filter">
    <p>def <span class="ident">filter</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with the args ANDed to the existing
set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.filter', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.filter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.first">
    <p>def <span class="ident">first</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the first object of a query, returns None if no match is found.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.first', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.first" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.from_queryset">
    <p>def <span class="ident">from_queryset</span>(</p><p>cls, queryset_class, class_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.from_queryset', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.from_queryset" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_queryset</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">queryset_class</span><span class="p">,</span> <span class="n">class_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">class_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">From</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">queryset_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">class_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;_queryset_class&#39;</span><span class="p">:</span> <span class="n">queryset_class</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">class_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_get_queryset_methods</span><span class="p">(</span><span class="n">queryset_class</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">class_name</span><span class="p">,</span> <span class="p">(</span><span class="n">cls</span><span class="p">,),</span> <span class="n">class_dict</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.get">
    <p>def <span class="ident">get</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Performs the query and returns a single object matching the given
keyword arguments.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.get_next_incremental_id_for_compound">
    <p>def <span class="ident">get_next_incremental_id_for_compound</span>(</p><p>self, project_id)</p>
    </div>
    

    
  
    <div class="desc"><p>Using the Redis ID generator retrieve the next ID for this project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.get_next_incremental_id_for_compound', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.get_next_incremental_id_for_compound" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_next_incremental_id_for_compound</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Using the Redis ID generator retrieve the next ID for this project&quot;&quot;&quot;</span>
    <span class="n">gen</span> <span class="o">=</span> <span class="n">IncrementalIdGenerator</span><span class="p">(</span><span class="s2">&quot;project_</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">project_id</span><span class="p">,</span> <span class="n">maxReserveBuffer</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">new_id</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">new_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">proj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">project_id</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">new_id</span> <span class="o">!=</span> <span class="n">proj</span><span class="o">.</span><span class="n">project_counter_start</span><span class="p">:</span>
            <span class="n">new_id</span> <span class="o">=</span> <span class="n">gen</span><span class="o">.</span><span class="n">getId</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">new_id</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.get_or_create">
    <p>def <span class="ident">get_or_create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Looks up an object with the given kwargs, creating one if necessary.
Returns a tuple of (object, created), where created is a boolean
specifying whether an object was created.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.get_or_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.get_or_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.get_queryset">
    <p>def <span class="ident">get_queryset</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet object.  Subclasses can override this method to
easily customize the behavior of the Manager.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.get_queryset', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.get_queryset" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a new QuerySet object.  Subclasses can override this method to</span>
<span class="sd">    easily customize the behavior of the Manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queryset_class</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_db</span><span class="p">,</span> <span class="n">hints</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_hints</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.in_bulk">
    <p>def <span class="ident">in_bulk</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary mapping each of the given IDs to the object with
that ID.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.in_bulk', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.in_bulk" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.iterator">
    <p>def <span class="ident">iterator</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An iterator over the results from applying this QuerySet to the
database.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.iterator', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.iterator" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.last">
    <p>def <span class="ident">last</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the last object of a query, returns None if no match is found.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.last', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.last" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.latest">
    <p>def <span class="ident">latest</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.latest', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.latest" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.none">
    <p>def <span class="ident">none</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns an empty QuerySet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.none', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.none" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.only">
    <p>def <span class="ident">only</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Essentially, the opposite of defer. Only the fields passed into this
method and that are not already specified as deferred are loaded
immediately when the queryset is evaluated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.only', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.only" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.order_by">
    <p>def <span class="ident">order_by</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with the ordering changed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.order_by', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.order_by" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.prefetch_related">
    <p>def <span class="ident">prefetch_related</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will prefetch the specified
Many-To-One and Many-To-Many related objects when the QuerySet is
evaluated.</p>
<p>When prefetch_related() is called more than once, the list of lookups to
prefetch is appended to. If prefetch_related(None) is called, the list
is cleared.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.prefetch_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.prefetch_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.raw">
    <p>def <span class="ident">raw</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.raw', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.raw" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.reverse">
    <p>def <span class="ident">reverse</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reverses the ordering of the QuerySet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.reverse', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.reverse" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.select_for_update">
    <p>def <span class="ident">select_for_update</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will select objects with a
FOR UPDATE lock.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.select_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.select_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.select_related">
    <p>def <span class="ident">select_related</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will select related objects.</p>
<p>If fields are specified, they must be ForeignKey fields and only those
related objects are included in the selection.</p>
<p>If select_related(None) is called, the list is cleared.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.select_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.select_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.sync_all_permissions">
    <p>def <span class="ident">sync_all_permissions</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Run trough all of the projects on the system and sync up the permission objects that they require</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.sync_all_permissions', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.sync_all_permissions" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">sync_all_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Run trough all of the projects on the system and sync up the permission objects that they require&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">proj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
        <span class="n">proj</span><span class="o">.</span><span class="n">sync_permissions</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.update">
    <p>def <span class="ident">update</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates all elements in the current QuerySet, setting all the given
fields to the appropriate values.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.update_or_create">
    <p>def <span class="ident">update_or_create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Looks up an object with the given kwargs, updating one with defaults
if it exists, otherwise creates a new one.
Returns a tuple (object, created), where created is a boolean
specifying whether an object was created.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.update_or_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.update_or_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.using">
    <p>def <span class="ident">using</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Selects which database this QuerySet should execute its query against.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.using', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.using" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.values">
    <p>def <span class="ident">values</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.values', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.values" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionManager.values_list">
    <p>def <span class="ident">values_list</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionManager.values_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionManager.values_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.ProjectPermissionMixin" class="name">class <span class="ident">ProjectPermissionMixin</span></p>
      
  
    <div class="desc"><p>The aim of this mixin is to create a permission content type and a permission model for a given project
It allows for pruning the contnet types once the model is changed</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ProjectPermissionMixin</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;The aim of this mixin is to create a permission content type and a permission model for a given project</span>
<span class="sd">    It allows for pruning the contnet types once the model is changed</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">objects</span> <span class="o">=</span> <span class="n">ProjectPermissionManager</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">sync_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;first we delete the existing permissions that are not labelled in the model&#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">perm</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>




    <span class="k">def</span> <span class="nf">get_contenttype_for_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;All project permissions now simply sit under the project content type&quot;&quot;&quot;</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ct</span>



    <span class="k">def</span> <span class="nf">get_instance_permission_by_codename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get or create a permission object for a given codename on this project&quot;&quot;&quot;</span>
        <span class="n">pm</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
            <span class="n">codename</span><span class="o">=</span><span class="n">get_permission_codename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">codename</span><span class="p">),</span> 
            <span class="n">content_type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_contenttype_for_instance</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> 
            <span class="n">name</span><span class="o">=</span><span class="n">get_permission_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">codename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">pm</span>

    <span class="k">def</span> <span class="nf">_add_instance_permissions_to_user_or_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">,</span> <span class="n">codename</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Give a user a given permission on a project&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">group_or_user</span><span class="p">)</span> <span class="o">==</span> <span class="n">Group</span><span class="p">:</span>
            <span class="n">group_or_user</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">codename</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">group_or_user</span><span class="p">)</span> <span class="o">==</span> <span class="n">User</span><span class="p">:</span>
            <span class="n">group_or_user</span><span class="o">.</span><span class="n">user_permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">codename</span><span class="p">))</span>

    

    <span class="k">def</span> <span class="nf">make_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a user object an editor of a project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
            <span class="n">group_or_user</span><span class="p">,</span>  <span class="s2">&quot;editor&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_viewer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a user object an viewer of a project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
            <span class="n">group_or_user</span><span class="p">,</span>   <span class="s2">&quot;viewer&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">make_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Make a user object an owner of a project&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
            <span class="n">group_or_user</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Abstract model as only used to inherit into project&quot;&quot;&quot;</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.ProjectPermissionMixin">ProjectPermissionMixin</a></li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.ProjectPermissionMixin.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectPermissionMixin.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.ProjectPermissionMixin.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.get_contenttype_for_instance">
    <p>def <span class="ident">get_contenttype_for_instance</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>All project permissions now simply sit under the project content type</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.get_contenttype_for_instance', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.get_contenttype_for_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_contenttype_for_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;All project permissions now simply sit under the project content type&quot;&quot;&quot;</span>
    <span class="n">ct</span> <span class="o">=</span> <span class="n">ContentType</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_for_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ct</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.get_instance_permission_by_codename">
    <p>def <span class="ident">get_instance_permission_by_codename</span>(</p><p>self, codename)</p>
    </div>
    

    
  
    <div class="desc"><p>Get or create a permission object for a given codename on this project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.get_instance_permission_by_codename', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.get_instance_permission_by_codename" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_instance_permission_by_codename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">codename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get or create a permission object for a given codename on this project&quot;&quot;&quot;</span>
    <span class="n">pm</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span>
        <span class="n">codename</span><span class="o">=</span><span class="n">get_permission_codename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">codename</span><span class="p">),</span> 
        <span class="n">content_type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_contenttype_for_instance</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> 
        <span class="n">name</span><span class="o">=</span><span class="n">get_permission_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">codename</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">pm</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.make_editor">
    <p>def <span class="ident">make_editor</span>(</p><p>self, group_or_user)</p>
    </div>
    

    
  
    <div class="desc"><p>Make a user object an editor of a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.make_editor', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.make_editor" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">make_editor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a user object an editor of a project&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
        <span class="n">group_or_user</span><span class="p">,</span>  <span class="s2">&quot;editor&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.make_owner">
    <p>def <span class="ident">make_owner</span>(</p><p>self, group_or_user)</p>
    </div>
    

    
  
    <div class="desc"><p>Make a user object an owner of a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.make_owner', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.make_owner" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">make_owner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a user object an owner of a project&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
        <span class="n">group_or_user</span><span class="p">,</span> <span class="s2">&quot;owner&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.make_viewer">
    <p>def <span class="ident">make_viewer</span>(</p><p>self, group_or_user)</p>
    </div>
    

    
  
    <div class="desc"><p>Make a user object an viewer of a project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.make_viewer', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.make_viewer" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">make_viewer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_or_user</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a user object an viewer of a project&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_instance_permissions_to_user_or_group</span><span class="p">(</span>
        <span class="n">group_or_user</span><span class="p">,</span>   <span class="s2">&quot;viewer&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.sync_permissions">
    <p>def <span class="ident">sync_permissions</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>first we delete the existing permissions that are not labelled in the model</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.sync_permissions', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.sync_permissions" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">sync_permissions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;first we delete the existing permissions that are not labelled in the model&#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">perm</span> <span class="ow">in</span> <span class="n">PROJECT_PERMISSIONS</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_permission_by_codename</span><span class="p">(</span><span class="n">perm</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectPermissionMixin.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectPermissionMixin.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectPermissionMixin.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.ProjectType" class="name">class <span class="ident">ProjectType</span></p>
      
  
    <div class="desc"><p>The project type object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ProjectType</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The project type object&quot;&quot;&quot;</span>
    <span class="n">plateSizes</span> <span class="o">=</span> <span class="s2">&quot;96,48&quot;</span>
    <span class="n">plateTypes</span> <span class="o">=</span> <span class="s2">&quot;working,backup&quot;</span>
    <span class="n">SAVED_SEARCH_TEMPLATE</span> <span class="o">=</span> <span class="p">[{</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                            <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Alias&quot;</span>
                        <span class="p">},</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
                            <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;URL&quot;</span>
                        <span class="p">}]</span>
    <span class="n">PLATE_MAP_TEMPLATE</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;radios&quot;</span><span class="p">,</span> <span class="s2">&quot;allowed_values&quot;</span><span class="p">:</span> <span class="n">plateSizes</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Plate Size&quot;</span><span class="p">,</span><span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Description&quot;</span><span class="p">,</span><span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                        <span class="p">{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">True</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;radios&quot;</span><span class="p">,</span> <span class="s2">&quot;allowed_values&quot;</span><span class="p">:</span> <span class="n">plateTypes</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Plate Type&quot;</span><span class="p">,</span><span class="s1">&#39;readonly_on_create&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                      <span class="p">]</span>
    <span class="n">DEFAULT_TEMPLATE</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;required&quot;</span><span class="p">:</span><span class="bp">False</span><span class="p">,</span> <span class="s2">&quot;field_type&quot;</span><span class="p">:</span> <span class="s2">&quot;char&quot;</span><span class="p">,</span> <span class="s2">&quot;open_or_restricted&quot;</span><span class="p">:</span> <span class="s2">&quot;open&quot;</span><span class="p">},]</span>
    <span class="sd">&#39;&#39;&#39; Allows configuration of parts of the app on a per project basis - initially will be used to separate out compound and inventory projects &#39;&#39;&#39;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Name of the project type&quot;</span><span class="p">)</span>
    <span class="n">show_compounds</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type should show compounds&quot;</span><span class="p">)</span>
    <span class="n">saved_search_project_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type is to be used in saved searches&quot;</span><span class="p">)</span>
    <span class="n">plate_map_project_type</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type is for plate maps&quot;</span><span class="p">)</span>
    <span class="c1">#Set the default to -1 to match the empty default custom field config</span>
    <span class="n">custom_field_config_template_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;If you wish for this project type to include a set of default fields, find an appropriate custom field config ID to use as a template and add it here&quot;</span><span class="p">)</span>
    <span class="n">set_as_default</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this project type should be used as the default project type on the system, set back to false if another project type is set as default&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.ProjectType">ProjectType</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.DEFAULT_TEMPLATE" class="name">var <span class="ident">DEFAULT_TEMPLATE</span></p>
            

            
  
    <div class="desc"><p>Allows configuration of parts of the app on a per project basis - initially will be used to separate out compound and inventory projects</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.PLATE_MAP_TEMPLATE" class="name">var <span class="ident">PLATE_MAP_TEMPLATE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.SAVED_SEARCH_TEMPLATE" class="name">var <span class="ident">SAVED_SEARCH_TEMPLATE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.custom_field_config_template_id" class="name">var <span class="ident">custom_field_config_template_id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.plateSizes" class="name">var <span class="ident">plateSizes</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.plateTypes" class="name">var <span class="ident">plateTypes</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.plate_map_project_type" class="name">var <span class="ident">plate_map_project_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.project_set" class="name">var <span class="ident">project_set</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.saved_search_project_type" class="name">var <span class="ident">saved_search_project_type</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.set_as_default" class="name">var <span class="ident">set_as_default</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.show_compounds" class="name">var <span class="ident">show_compounds</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.ProjectType.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.ProjectType.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.ProjectType.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.ProjectType.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_core_model.models.SkinningConfig" class="name">class <span class="ident">SkinningConfig</span></p>
      
  
    <div class="desc"><p>Holds information about custom system messages and other customisable elements</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SkinningConfig</span><span class="p">(</span><span class="n">SingletonModel</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;Holds information about custom system messages and other customisable elements&#39;&#39;&#39;</span>
    <span class="c1">#created_by = models.ForeignKey(&quot;auth.User&quot;)</span>
    <span class="n">instance_alias</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;ChemiReg&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What the instance of ChemBio Hub should be labelled as (not really used, deprecated&quot;</span><span class="p">)</span>
    <span class="n">project_alias</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;project&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What projects on the system should be called (not really used, could be deprecated)&quot;</span><span class="p">)</span>
    <span class="n">result_alias</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;result&#39;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;What search results on the system should be called (not really used, could be deprecated)&quot;</span><span class="p">)</span>
    <span class="n">file_errors_from_backend</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">NullBooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the error message on file upload should be the exception message from the back end&quot;</span><span class="p">)</span>
    <span class="n">enable_smiles_input</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">NullBooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether the SMILES input field should be enabled when adding multiple compounds&quot;</span><span class="p">)</span>
    <span class="n">data_manager_email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Email address for support requests&quot;</span><span class="p">)</span>
    <span class="n">data_manager_name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Name of support requests manager&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">u&quot;Skinning Configuration&quot;</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">verbose_name</span> <span class="o">=</span> <span class="s2">&quot;Skinning Configuration&quot;</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_core_model.models.SkinningConfig">SkinningConfig</a></li>
          <li>solo.models.SingletonModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.data_manager_email" class="name">var <span class="ident">data_manager_email</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.data_manager_name" class="name">var <span class="ident">data_manager_name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.enable_smiles_input" class="name">var <span class="ident">enable_smiles_input</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.file_errors_from_backend" class="name">var <span class="ident">file_errors_from_backend</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.instance_alias" class="name">var <span class="ident">instance_alias</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.project_alias" class="name">var <span class="ident">project_alias</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.result_alias" class="name">var <span class="ident">result_alias</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_core_model.models.SkinningConfig.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.get_cache_key">
    <p>def <span class="ident">get_cache_key</span>(</p><p>cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.get_cache_key', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.get_cache_key" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_cache_key</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="n">solo_settings</span><span class="o">.</span><span class="n">SOLO_CACHE_PREFIX</span>
    <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.get_solo">
    <p>def <span class="ident">get_solo</span>(</p><p>cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.get_solo', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.get_solo" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_solo</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
    <span class="n">cache_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;SOLO_CACHE&#39;</span><span class="p">,</span> <span class="n">solo_settings</span><span class="o">.</span><span class="n">SOLO_CACHE</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cache_name</span><span class="p">:</span>
        <span class="n">obj</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span>
    <span class="n">cache</span> <span class="o">=</span> <span class="n">get_cache</span><span class="p">(</span><span class="n">cache_name</span><span class="p">)</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">get_cache_key</span><span class="p">()</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cache_key</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">obj</span><span class="p">:</span>
        <span class="n">obj</span><span class="p">,</span> <span class="n">created</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">set_to_cache</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">obj</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.save">
    <p>def <span class="ident">save</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_to_cache</span><span class="p">()</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SingletonModel</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.set_to_cache">
    <p>def <span class="ident">set_to_cache</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.set_to_cache', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.set_to_cache" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_to_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">cache_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;SOLO_CACHE&#39;</span><span class="p">,</span> <span class="n">solo_settings</span><span class="o">.</span><span class="n">SOLO_CACHE</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cache_name</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="n">cache</span> <span class="o">=</span> <span class="n">get_cache</span><span class="p">(</span><span class="n">cache_name</span><span class="p">)</span>
    <span class="n">cache_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cache_key</span><span class="p">()</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="s1">&#39;SOLO_CACHE_TIMEOUT&#39;</span><span class="p">,</span> <span class="n">solo_settings</span><span class="o">.</span><span class="n">SOLO_CACHE_TIMEOUT</span><span class="p">)</span>
    <span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">cache_key</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_core_model.models.SkinningConfig.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_core_model.models.SkinningConfig.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_core_model.models.SkinningConfig.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
