<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>cbh_chembl_model_extension.models API documentation</title>
    <meta name="description" content="Model classes for the chemical batches and multiple batches that are used to hold datasets in ChemBi..." />

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Source Sans Pro", "Helvetica Neueue", Helvetica, sans;
    font-weight: 300;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  } 

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; } 

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;
      
      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  .codehilite .hll { background-color: #ffffcc }
.codehilite  { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.BONDS_WEDGED_SDF_PROP">BONDS_WEDGED_SDF_PROP</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.generate_structure_and_dictionary">generate_structure_and_dictionary</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.generate_uox_id">generate_uox_id</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.index_new_compounds">index_new_compounds</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.set_images">set_images</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch">CBHCompoundBatch</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.check">check</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.clean">clean</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.delete">delete</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.generate_project_counter">generate_project_counter</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.get_uk">get_uk</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.save">save</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.standardise">standardise</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.validate">validate</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch.validate_unique">validate_unique</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager">CBHCompoundBatchManager</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.aggregate">aggregate</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.all">all</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.annotate">annotate</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.blinded">blinded</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.bulk_create">bulk_create</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.check">check</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.complex_filter">complex_filter</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.contribute_to_class">contribute_to_class</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.count">count</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.create">create</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.dates">dates</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.datetimes">datetimes</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.db_manager">db_manager</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.deconstruct">deconstruct</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.defer">defer</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.distinct">distinct</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.earliest">earliest</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.exclude">exclude</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.exists">exists</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.extra">extra</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.filter">filter</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.first">first</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_queryset">from_queryset</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_rd_mol">from_rd_mol</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.get">get</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_or_create">get_or_create</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_queryset">get_queryset</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.in_bulk">in_bulk</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.iterator">iterator</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.last">last</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.latest">latest</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.none">none</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.only">only</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.order_by">order_by</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.prefetch_related">prefetch_related</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.raw">raw</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.reverse">reverse</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_for_update">select_for_update</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_related">select_related</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.update">update</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.update_or_create">update_or_create</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.using">using</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.values">values</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager.values_list">values_list</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch">CBHCompoundMultipleBatch</a></span>
        
          
  <ul>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.__init__">__init__</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.check">check</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean">clean</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean_fields">clean_fields</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.date_error_message">date_error_message</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.delete">delete</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.from_db">from_db</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.full_clean">full_clean</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_deferred_fields">get_deferred_fields</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_created">get_next_by_created</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_modified">get_next_by_modified</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_created">get_previous_by_created</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_modified">get_previous_by_modified</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.prepare_database_save">prepare_database_save</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.refresh_from_db">refresh_from_db</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save">save</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save_base">save_base</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.serializable_value">serializable_value</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.unique_error_message">unique_error_message</a></li>
    <li class="mono"><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.validate_unique">validate_unique</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">cbh_chembl_model_extension.models</span> module</h1>
  <p>Model classes for the chemical batches and multiple batches that are used to hold datasets in ChemBio Hub</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models" class="source">
    <div class="codehilite"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Model classes for the chemical batches and multiple batches that are used to hold datasets in ChemBio Hub</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span><span class="p">,</span> <span class="n">connection</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="k">try</span><span class="p">:</span>
    <span class="c1"># django &gt;= 1.7</span>
    <span class="kn">from</span> <span class="nn">django.apps</span> <span class="kn">import</span> <span class="n">apps</span>
    <span class="n">get_model</span> <span class="o">=</span> <span class="n">apps</span><span class="o">.</span><span class="n">get_model</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="c1"># django &lt; 1.7</span>
    <span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">get_model</span>

<span class="c1">#---------------</span>
<span class="kn">from</span> <span class="nn">django_hstore</span> <span class="kn">import</span> <span class="n">hstore</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">chembl_business_model.models</span> <span class="kn">import</span> <span class="n">MoleculeDictionary</span>
<span class="kn">from</span> <span class="nn">chembl_business_model.models</span> <span class="kn">import</span> <span class="n">CompoundStructures</span>
<span class="kn">from</span> <span class="nn">rdkit</span> <span class="kn">import</span> <span class="n">Chem</span>
<span class="kn">from</span> <span class="nn">rdkit.Chem.Draw.MolDrawing</span> <span class="kn">import</span> <span class="n">DrawingOptions</span>
<span class="kn">from</span> <span class="nn">rdkit.Chem.rdmolfiles</span> <span class="kn">import</span> <span class="n">MolToMolBlock</span>
<span class="kn">from</span> <span class="nn">django.core.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span>
<span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">chembl_business_model.models</span> <span class="kn">import</span> <span class="n">CompoundStructures</span>
<span class="kn">from</span> <span class="nn">chembl_business_model.models</span> <span class="kn">import</span> <span class="n">MoleculeDictionary</span>
<span class="kn">from</span> <span class="nn">chembl_business_model.models</span> <span class="kn">import</span> <span class="n">ChemblIdLookup</span>
<span class="kn">from</span> <span class="nn">chembl_business_model.tasks</span> <span class="kn">import</span> <span class="n">generateCompoundPropertiesTask</span>
<span class="kn">from</span> <span class="nn">django.core.exceptions</span> <span class="kn">import</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">ObjectDoesNotExist</span>
<span class="kn">from</span> <span class="nn">django_extensions.db.models</span> <span class="kn">import</span> <span class="n">TimeStampedModel</span>
<span class="kn">import</span> <span class="nn">shortuuid</span>
<span class="kn">from</span> <span class="nn">chembl_business_model.utils</span> <span class="kn">import</span> <span class="n">inchiFromPipe</span>
<span class="kn">from</span> <span class="nn">rdkit.Chem</span> <span class="kn">import</span> <span class="n">InchiToInchiKey</span>
<span class="kn">from</span> <span class="nn">rdkit.Chem</span> <span class="kn">import</span> <span class="n">MolFromInchi</span>
<span class="kn">from</span> <span class="nn">rdkit.Chem</span> <span class="kn">import</span> <span class="n">MolToMolBlock</span>
<span class="kn">from</span> <span class="nn">picklefield.fields</span> <span class="kn">import</span> <span class="n">PickledObjectField</span>
<span class="kn">from</span> <span class="nn">pybel</span> <span class="kn">import</span> <span class="n">readstring</span>
<span class="kn">from</span> <span class="nn">django.db.models.signals</span> <span class="kn">import</span> <span class="n">post_save</span>
<span class="kn">from</span> <span class="nn">cbh_chembl_model_extension.lookups</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>
<span class="kn">from</span> <span class="nn">rdkit.Chem.AllChem</span> <span class="kn">import</span> <span class="n">Compute2DCoords</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">StringIO</span>
<span class="kn">from</span> <span class="nn">rdkit.Chem</span> <span class="kn">import</span>  <span class="n">SDMolSupplier</span><span class="p">,</span> <span class="n">MolToMolBlock</span><span class="p">,</span> <span class="n">MolFromSmarts</span><span class="p">,</span> <span class="n">SDMolSupplier</span><span class="p">,</span> <span class="n">AllChem</span><span class="p">,</span> <span class="n">Draw</span><span class="p">,</span> <span class="n">SanitizeMol</span><span class="p">,</span> <span class="n">SanitizeFlags</span><span class="p">,</span>   <span class="n">AssignAtomChiralTagsFromStructure</span>

<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">IntegrityError</span>



<span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="o">.</span><span class="n">register_lookup</span><span class="p">(</span><span class="n">KeyValuesAny</span><span class="p">)</span>

<span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="o">.</span><span class="n">register_lookup</span><span class="p">(</span><span class="n">KeyValuesAll</span><span class="p">)</span>
<span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="o">.</span><span class="n">register_lookup</span><span class="p">(</span><span class="n">KeyValuesSingle</span><span class="p">)</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Signal code - on a webauthed system, if a user is auto-created by a webauth login,</span>
<span class="sd">notify a superuser.</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="k">if</span> <span class="s2">&quot;django_webauth&quot;</span> <span class="ow">in</span> <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">django.db.models.signals</span> <span class="kn">import</span> <span class="n">post_save</span>
    <span class="kn">from</span> <span class="nn">django.core.mail</span> <span class="kn">import</span> <span class="n">send_mail</span>

    <span class="k">def</span> <span class="nf">email_new_user</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Function to email new users (oxford-specific)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;created&quot;</span><span class="p">]:</span>  <span class="c1"># only for new users</span>
            <span class="c1"># need to email superusers to inform them a new user has logged in</span>
            <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">email</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">username</span> <span class="o">!=</span> <span class="n">instance</span><span class="o">.</span><span class="n">email</span><span class="p">:</span>
                    <span class="c1">#This is not an invited user</span>
                    <span class="n">admin_users</span> <span class="o">=</span> <span class="n">find_superuser</span><span class="p">()</span>
                    <span class="n">email_from</span> <span class="o">=</span> <span class="s1">&#39;no-reply-chemreg@chembiohub.ox.ac.uk&#39;</span>
                    <span class="n">new_user_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">instance</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">instance</span><span class="o">.</span><span class="n">last_name</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">admin</span> <span class="ow">in</span> <span class="n">admin_users</span><span class="p">:</span>
                        <span class="n">html_email</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;Hi </span><span class="si">%s</span><span class="s1">, &lt;br&gt;A new user has logged onto the system via Webauth, </span><span class="si">%s</span><span class="s1">. &lt;br&gt;You should add them to any applicable projects.&lt;br&gt;Thanks&lt;br&gt;ChemBio Hub ChemReg&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">admin</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">new_user_name</span><span class="p">)</span>
                        <span class="n">email_message</span> <span class="o">=</span> <span class="s1">&#39;Hi </span><span class="si">%s</span><span class="s1">, A new user has logged onto the system via Webauth, </span><span class="si">%s</span><span class="s1">.You should add them to any applicable projects&#39;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">admin</span><span class="o">.</span><span class="n">first_name</span><span class="p">,</span> <span class="n">new_user_name</span><span class="p">)</span>
                        <span class="n">send_mail</span><span class="p">(</span><span class="s1">&#39;New Webauth User&#39;</span><span class="p">,</span> <span class="n">email_message</span><span class="p">,</span> <span class="n">email_from</span><span class="p">,</span> <span class="p">[</span>
                                  <span class="n">admin</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="p">],</span> <span class="n">fail_silently</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">html_message</span><span class="o">=</span><span class="n">html_email</span><span class="p">)</span>
                    <span class="c1"># we also need to email the user with a welcome message</span>
                    <span class="n">welcome_message</span> <span class="o">=</span> <span class="s1">&#39;Welcome to ChemReg, </span><span class="si">%s</span><span class="s1">! You have successfully logged in using Webauth and you will be added to projects by an admin user shortly.&#39;</span> <span class="o">%</span> <span class="n">new_user_name</span>
                    <span class="n">html_welcome_message</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;Welcome to ChemReg, </span><span class="si">%s</span><span class="s1">! &lt;br&gt;You have successfully logged in using Webauth and you will be added to projects by an admin user shortly.&lt;/p&gt;&#39;</span> <span class="o">%</span> <span class="n">new_user_name</span>
                    <span class="n">send_mail</span><span class="p">(</span><span class="s1">&#39;Welcome to ChemReg&#39;</span><span class="p">,</span> <span class="n">welcome_message</span><span class="p">,</span> <span class="n">email_from</span><span class="p">,</span> <span class="p">[</span>
                              <span class="n">instance</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="p">],</span> <span class="n">fail_silently</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">html_message</span><span class="o">=</span><span class="n">html_welcome_message</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_superuser</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Find the first superuser that you can possibly deprecated&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">is_active</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">is_superuser</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="n">post_save</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">email_new_user</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">User</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">generate_uox_id</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Create an alphanumeric ID for a new compound or blinded compound or inventory item, </span>
<span class="sd">    ensuring that this has not been created before</span>
<span class="sd">    There is a theoretical possibility of a race condition here but it is unlikely due to the number of possible IDs that can be generated</span>
<span class="sd">    We have proposed a foolproof method to do this ID generation in thecbh_chembl_id_generator repository but have not had time to implement it&quot;&quot;&quot;</span>
    <span class="n">two_letterg</span> <span class="o">=</span> <span class="n">shortuuid</span><span class="o">.</span><span class="n">ShortUUID</span><span class="p">()</span>
    <span class="n">two_letterg</span><span class="o">.</span><span class="n">set_alphabet</span><span class="p">(</span><span class="s2">&quot;ABCDEFGHJKLMNPQRSTUVWXYZ&quot;</span><span class="p">)</span>
    <span class="n">two_letter</span> <span class="o">=</span> <span class="n">two_letterg</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">two_numberg</span> <span class="o">=</span> <span class="n">shortuuid</span><span class="o">.</span><span class="n">ShortUUID</span><span class="p">()</span>
    <span class="n">two_numberg</span><span class="o">.</span><span class="n">set_alphabet</span><span class="p">(</span><span class="s2">&quot;0123456789&quot;</span><span class="p">)</span>
    <span class="n">two_number</span> <span class="o">=</span> <span class="n">two_numberg</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">three_letterg</span> <span class="o">=</span> <span class="n">shortuuid</span><span class="o">.</span><span class="n">ShortUUID</span><span class="p">()</span>
    <span class="n">three_letterg</span><span class="o">.</span><span class="n">set_alphabet</span><span class="p">(</span><span class="s2">&quot;ABCDEFGHJKLMNPQRSTUVWXYZ&quot;</span><span class="p">)</span>
    <span class="n">three_letter</span> <span class="o">=</span> <span class="n">three_letterg</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">uox_id</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">ID_PREFIX</span><span class="p">,</span> <span class="n">two_letter</span><span class="p">,</span> <span class="n">two_number</span><span class="p">,</span> <span class="n">three_letter</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ChemblIdLookup</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">chembl_id</span><span class="o">=</span><span class="n">uox_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">generate_uox_id</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">uox_id</span>


<span class="n">BONDS_WEDGED_SDF_PROP</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&gt;  &lt;_drawingBondsWedged&gt;</span>
<span class="s1">True</span>

<span class="s1">$$$$&#39;&#39;&#39;</span>


<span class="c1">#-----------------------------------------------------------------------------------------------------------------------</span>

<span class="k">def</span> <span class="nf">_parseMolData</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Imports a molfile and verifies if all of the coordinates are set to zeros.</span>
<span class="sd">    if they are set to zeros then we know there are no real coordinates in the molfile</span>
<span class="sd">    In this case we allow RDKit to recaculate the positions of the atoms and come up with its own pictorial representation of the molecule</span>
<span class="sd">    If not we use the molecule as drawn&quot;&quot;&quot;</span>
    <span class="n">suppl</span> <span class="o">=</span> <span class="n">SDMolSupplier</span><span class="p">()</span>

    <span class="n">suppl</span><span class="o">.</span><span class="n">SetData</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">sanitize</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">suppl</span> <span class="k">if</span> <span class="n">x</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">HasProp</span><span class="p">(</span><span class="s2">&quot;_drawingBondsWedged&quot;</span><span class="p">):</span>
            <span class="n">SanitizeMol</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ctab</span> <span class="o">=</span> <span class="n">MolToMolBlock</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ctablines</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;0.0000&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">ctab</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="s2">&quot;0.0000&quot;</span> <span class="ow">in</span> <span class="n">item</span><span class="p">]</span>
        <span class="n">needs_redraw</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">ctablines</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">needs_redraw</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">needs_redraw</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ctablines</span><span class="p">):</span>
             <span class="c1">#check for overlapping molecules in the CTAB </span>
            <span class="n">SanitizeMol</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">Compute2DCoords</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="k">print</span> <span class="s2">&quot;testr&quot;</span>
    <span class="k">return</span> <span class="n">data</span>

<span class="k">def</span> <span class="nf">_mols2imageStream</span><span class="p">(</span><span class="n">mols</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">legend</span><span class="p">,</span> <span class="n">highlightMatch</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return an input stream for the molecule as drawn&quot;&quot;&quot;</span>
    <span class="n">highlights</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">highlightMatch</span><span class="p">:</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">MolFromSmarts</span><span class="p">(</span><span class="n">highlightMatch</span><span class="p">)</span>
        <span class="n">highlights</span> <span class="o">=</span> <span class="p">[</span><span class="n">mol</span><span class="o">.</span><span class="n">GetSubstructMatch</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span> <span class="k">for</span> <span class="n">mol</span> <span class="ow">in</span> <span class="n">mols</span><span class="p">]</span>
    <span class="n">kek</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="n">mols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">HasProp</span><span class="p">(</span><span class="s2">&quot;_drawingBondsWedged&quot;</span><span class="p">):</span>
        <span class="n">kek</span><span class="o">=</span><span class="bp">False</span>
    <span class="n">fit</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">DrawingOptions</span><span class="p">()</span> 
    <span class="n">subim</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span><span class="p">,</span><span class="n">size</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">size</span> <span class="o">&gt;</span><span class="mi">150</span><span class="p">:</span>
        <span class="n">subim</span> <span class="o">=</span> <span class="p">(</span><span class="n">size</span> <span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="n">size</span> <span class="o">*</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">options</span><span class="o">.</span><span class="n">coordScale</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="n">options</span><span class="o">.</span><span class="n">bondLineWidth</span> <span class="o">=</span> <span class="mf">3.6</span>
        <span class="n">options</span><span class="o">.</span><span class="n">dblBondOffset</span> <span class="o">=</span> <span class="mf">0.435</span>
        <span class="n">options</span><span class="o">.</span><span class="n">atomLabelFontSize</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="n">fit</span> <span class="o">=</span> <span class="bp">True</span>
        
    <span class="n">image</span> <span class="o">=</span> <span class="n">Draw</span><span class="o">.</span><span class="n">MolsToGridImage</span><span class="p">(</span><span class="n">mols</span><span class="p">,</span><span class="n">molsPerRow</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mols</span><span class="p">),</span><span class="mi">4</span><span class="p">),</span><span class="n">subImgSize</span><span class="o">=</span><span class="n">subim</span><span class="p">,</span>
                                     <span class="n">kekulize</span><span class="o">=</span><span class="n">kek</span><span class="p">,</span><span class="n">highlightAtomLists</span><span class="o">=</span><span class="n">highlights</span><span class="p">,</span> <span class="n">fitImage</span><span class="o">=</span><span class="n">fit</span><span class="p">,</span>
                                    <span class="n">options</span><span class="o">=</span><span class="n">options</span>
    <span class="p">)</span>
    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">format</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_mols2imageString</span><span class="p">(</span><span class="n">mols</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">legend</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">recalc</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">highlightMatch</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Take an input stream for the molecule image and return as a string&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">mols</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>
 <span class="c1">#   if recalc:</span>
  <span class="c1">#      _apply(mols, _computeCoords)</span>
    <span class="n">imageData</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">mol</span> <span class="ow">in</span> <span class="n">mols</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">SanitizeMol</span><span class="p">(</span><span class="n">mol</span><span class="p">,</span><span class="n">sanitizeOps</span><span class="o">=</span><span class="n">SanitizeFlags</span><span class="o">.</span><span class="n">SANITIZE_ALL</span><span class="o">^</span><span class="n">SanitizeFlags</span><span class="o">.</span><span class="n">SANITIZE_CLEANUPCHIRALITY</span><span class="o">^</span><span class="n">Chem</span><span class="o">.</span><span class="n">SanitizeFlags</span><span class="o">.</span><span class="n">SANITIZE_SETCONJUGATION</span><span class="o">^</span><span class="n">Chem</span><span class="o">.</span><span class="n">SanitizeFlags</span><span class="o">.</span><span class="n">SANITIZE_SETAROMATICITY</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">imageData</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="n">AllChem</span><span class="o">.</span><span class="n">AssignAtomChiralTagsFromStructure</span><span class="p">(</span><span class="n">mol</span><span class="p">,</span><span class="n">replaceExistingTags</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">_mols2imageStream</span><span class="p">(</span><span class="n">mols</span><span class="p">,</span> <span class="n">imageData</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">legend</span><span class="p">,</span> <span class="n">highlightMatch</span><span class="o">=</span><span class="n">highlightMatch</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">imageData</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">_ctab2image</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">legend</span><span class="p">,</span> <span class="n">recalc</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">highlightMatch</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate a base64 encoded image string for the molecule&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">_mols2imageString</span><span class="p">(</span><span class="n">_parseMolData</span><span class="p">(</span><span class="n">data</span><span class="p">),</span><span class="n">size</span><span class="p">,</span><span class="n">legend</span><span class="p">,</span> <span class="s1">&#39;PNG&#39;</span><span class="p">,</span> <span class="n">recalc</span><span class="o">=</span><span class="n">recalc</span><span class="p">,</span> <span class="n">highlightMatch</span><span class="o">=</span><span class="n">highlightMatch</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">set_images</span><span class="p">(</span><span class="n">batch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Append images to a particular compound batch object&quot;&quot;&quot;</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">bigimage</span> <span class="o">=</span> <span class="n">_ctab2image</span><span class="p">(</span><span class="n">copy</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">ctab</span><span class="p">),</span> <span class="mi">400</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">recalc</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">_ctab2image</span><span class="p">(</span><span class="n">copy</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">ctab</span><span class="p">),</span><span class="mi">80</span><span class="p">,</span><span class="bp">False</span><span class="p">,</span> <span class="n">recalc</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">CBHCompoundBatchManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager methods for the generation of compound batch objects&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">blinded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Generate a batch with a blinded id&#39;&#39;&#39;</span>
        <span class="n">blinded_batch_id</span> <span class="o">=</span> <span class="s2">&quot;EMPTY_ID&quot;</span>
        <span class="k">return</span> <span class="n">CBHCompoundBatch</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span> <span class="n">blinded_batch_id</span><span class="o">=</span><span class="n">blinded_batch_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">from_rd_mol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rd_mol</span><span class="p">,</span> <span class="n">orig_ctab</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">smiles</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reDraw</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Clean up the structures that come in from Smiles or from XLS or SDFs&#39;&#39;&#39;</span>
        <span class="c1"># Get a copy of the mol data</span>
        <span class="n">moldata</span> <span class="o">=</span> <span class="n">rd_mol</span>
        <span class="k">if</span> <span class="n">orig_ctab</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">moldata</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">moldata</span><span class="o">.</span><span class="n">GetPropNames</span><span class="p">():</span>
                <span class="c1"># delete the property names for the saved ctab</span>
                <span class="n">moldata</span><span class="o">.</span><span class="n">ClearProp</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">ctab</span> <span class="o">=</span> <span class="n">Chem</span><span class="o">.</span><span class="n">MolToMolBlock</span><span class="p">(</span><span class="n">moldata</span><span class="p">)</span>
            <span class="c1"># make it into an sdf block</span>
            <span class="n">ctab</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">$$$$&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">not_first_lists</span> <span class="o">=</span> <span class="n">orig_ctab</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">headerlines</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">reallines</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">not_first_lists</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;V2000&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">headerlines</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">if</span> <span class="n">headerlines</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="n">reallines</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="s2">&quot;END&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">reallines</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;blank_molfile&quot;</span><span class="p">)</span>
            <span class="n">all_lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">]</span> <span class="o">+</span> <span class="n">lines</span> <span class="o">+</span> <span class="p">[</span><span class="n">BONDS_WEDGED_SDF_PROP</span><span class="p">,</span> <span class="p">]</span>

            <span class="n">ctab</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_lines</span><span class="p">)</span>

        <span class="n">batch</span> <span class="o">=</span> <span class="n">CBHCompoundBatch</span><span class="p">(</span><span class="n">ctab</span><span class="o">=</span><span class="n">ctab</span><span class="p">,</span> <span class="n">original_smiles</span><span class="o">=</span><span class="n">smiles</span><span class="p">)</span>
        <span class="n">set_images</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">project</span><span class="p">:</span>
            <span class="n">batch</span><span class="o">.</span><span class="n">project_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>
        <span class="k">return</span> <span class="n">batch</span>



    

<span class="k">def</span> <span class="nf">index_new_compounds</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Select unindexed compounds from the compound structures table and insert them into the compound mols table using the is_valid_ctab from RDKit to check if the molecule is valid for RDKit&quot;&quot;&quot;</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s2">&quot;INSERT INTO compound_mols (molregno , ctab) SELECT c.molregno, mol_from_ctab(molfile::cstring) ctab FROM compound_structures c LEFT OUTER JOIN compound_mols ON c.molregno = compound_mols.molregno WHERE is_valid_ctab(molfile::cstring) AND compound_mols.molregno is null;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>




<span class="k">class</span> <span class="nc">CBHCompoundMultipleBatch</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Holds a list of batches&#39;&#39;&#39;</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;User who created this multiple batch&quot;</span><span class="p">)</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Project that the multiple batch was created in&quot;</span><span class="p">)</span>
    <span class="n">uploaded_data</span> <span class="o">=</span> <span class="n">PickledObjectField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Now used to store the headers from the file used to generate the multiple batch, picke use perhaps can be improved or is deprecated&quot;</span><span class="p">)</span>
    <span class="n">uploaded_file</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_model.CBHFlowFile&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;File that was uploaded to generate this multiple batch&quot;</span><span class="p">)</span>
    <span class="n">saved</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this multiple batch has been saved or not&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">CBHCompoundBatch</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Holds the batch information for an uploaded compound before it is fully registered&#39;&#39;&#39;</span>
    <span class="n">ctab</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The raw MDL molfile text (chemical table block - ctab) that was used to generate this compound batch&quot;</span><span class="p">)</span>
    <span class="n">std_ctab</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The standardised version of the above ctab/molfile text standardised using the Inchi software&quot;</span><span class="p">)</span>
    <span class="n">canonical_smiles</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Canonical SMILES pattern for the uploaded compound batch generated by the pybel library from openbabel&quot;</span><span class="p">)</span>
    <span class="n">original_smiles</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The SMILES pattern that was originally uploaded&quot;</span><span class="p">)</span>
    <span class="n">uncurated_fields</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The fields that were uploaded to the record but were not mapped on to anything, or extra information that the user wanted to include&quot;</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A small base64 encoded image for the compound, for use in the front end&quot;</span><span class="p">)</span>
    <span class="n">bigimage</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A larger base64 encoded image for the compound, for use in the front end&quot;</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The display name for the user who created this compound batch&quot;</span><span class="p">)</span>
    <span class="n">created_by_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The ID from the user who created this compound batch&quot;</span><span class="p">)</span>
    <span class="n">related_molregno</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">MoleculeDictionary</span><span class="p">,</span> 
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> 
        <span class="n">to_field</span><span class="o">=</span><span class="s2">&quot;molregno&quot;</span><span class="p">,</span> 
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The foreign key relationship to the MoleculeDictionary record generated for this compound. May be null for compounds without a structure or inventory items&quot;</span>
        <span class="p">)</span>
    <span class="n">standard_inchi</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The standard Inchi string for the molecule as generated by the standard Inchi library&quot;</span><span class="p">)</span>
    <span class="n">standard_inchi_key</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>  <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The standard Inchi key string for the molecule as generated by the standard Inchi library&quot;</span><span class="p">)</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Warnings that were raised when the molecule was uploaded&quot;</span><span class="p">)</span>
    <span class="n">properties</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;System generated properties for the molecule and whether it is archived&quot;</span><span class="p">)</span>
    <span class="n">custom_fields</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The main field where data associated with the molecule is stored - data may be strings, numbers, lists or objects&quot;</span><span class="p">)</span>
    <span class="n">multiple_batch_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The multiple batch id of this molecule and any others that were created at the same time&quot;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">CBHCompoundBatchManager</span><span class="p">()</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Foreign key to the projects table, used to determine permissions on the compound batch object&quot;</span><span class="p">)</span>
    <span class="n">blinded_batch_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;UUID assigned in cases where the compound batch is an inventory item or a molecule without a structure&quot;</span> <span class="p">)</span>
    <span class="n">project_counter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;ID for this compound batch within the context of the project&quot;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">generate_project_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign an ID to the compound batch object within the given project&quot;&quot;&quot;</span>
        <span class="n">Project</span> <span class="o">=</span> <span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;cbh_core_model&quot;</span><span class="p">,</span> <span class="s2">&quot;Project&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_next_incremental_id_for_compound</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">get_uk</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
        <span class="sd">&quot;&quot;&quot;Generate a unique key for the molecule, was used in finding duplicates on upload, may now be deprecated&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">__</span><span class="si">%d</span><span class="s2">__</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span> <span class="s2">&quot;MOL&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add additional generated attributes to the compound batch object as it is being saved&quot;&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;validate&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

        <span class="c1"># self.validate()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiple_batch_id</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mb</span> <span class="o">=</span> <span class="n">CBHCompoundMultipleBatch</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">multiple_batch_id</span> <span class="o">=</span> <span class="n">mb</span><span class="o">.</span><span class="n">id</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_counter</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_project_counter</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CBHCompoundBatch</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">:</span>
            <span class="n">uox_id_lookup</span> <span class="o">=</span> <span class="n">ChemblIdLookup</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">chembl_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">,</span>
                                                              <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;DOCUMENT&quot;</span><span class="p">,</span>
                                                              <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">temp_props</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Could now just use standardise, deprecated&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">standardise</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">standardise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure Inchi etc was generated correctly&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonical_smiles</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctab</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span> <span class="o">=</span> <span class="n">inchiFromPipe</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">INCHI_BINARIES_LOCATION</span><span class="p">[</span><span class="s1">&#39;1.02&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;inchi_error&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi_key</span> <span class="o">=</span> <span class="n">InchiToInchiKey</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span>

    



<span class="k">def</span> <span class="nf">generate_structure_and_dictionary</span><span class="p">(</span><span class="n">batch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adding the structure data to a compound batch object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chirality</span><span class="o">=</span><span class="s2">&quot;1&quot;</span>
    <span class="k">if</span> <span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;not updating&quot;</span>
        <span class="c1"># currently we dont update existing compound records</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">batch</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">:</span>

            <span class="n">uox_id</span> <span class="o">=</span> <span class="n">generate_uox_id</span><span class="p">()</span>
            <span class="n">batch</span><span class="o">.</span><span class="n">blinded_batch_id</span> <span class="o">=</span> <span class="n">uox_id</span>
            <span class="n">batch</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">batch</span><span class="o">.</span><span class="n">canonical_smiles</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    

                    <span class="n">pybelmol</span> <span class="o">=</span> <span class="n">readstring</span><span class="p">(</span>
                        <span class="s2">&quot;mol&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">ctab</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span>
                    <span class="n">batch</span><span class="o">.</span><span class="n">canonical_smiles</span> <span class="o">=</span> <span class="n">pybelmol</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                        <span class="s2">&quot;can&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">batch</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;cdxml&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pybelmol</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;cdxml&quot;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">mol</span> <span class="o">=</span> <span class="n">MolFromInchi</span><span class="p">(</span>
                        <span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;ignore&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">mol</span><span class="p">:</span>
                        <span class="n">batch</span><span class="o">.</span><span class="n">std_ctab</span> <span class="o">=</span> <span class="n">MolToMolBlock</span><span class="p">(</span>
                            <span class="n">mol</span><span class="p">,</span> <span class="n">includeStereo</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">inchi_key</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi_key</span>
                <span class="n">inchi</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">batch</span><span class="o">.</span><span class="n">related_molregno_id</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">moldict</span> <span class="o">=</span> <span class="n">MoleculeDictionary</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
                                                                 <span class="n">structure_type</span><span class="o">=</span><span class="s2">&quot;MOL&quot;</span><span class="p">,</span>
                                                                 <span class="c1"># chirality=chirality,</span>
                                                                 <span class="n">structure_key</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi_key</span><span class="p">)</span>
                    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>

                        <span class="n">uox_id</span> <span class="o">=</span> <span class="n">generate_uox_id</span><span class="p">()</span>
                        <span class="n">rnd</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">1000000000</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
                        <span class="n">uox_id_lookup</span> <span class="o">=</span> <span class="n">ChemblIdLookup</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                            <span class="n">chembl_id</span><span class="o">=</span><span class="n">uox_id</span><span class="p">,</span> <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;COMPOUND&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="n">rnd</span><span class="p">)</span>

                        <span class="n">moldict</span> <span class="o">=</span> <span class="n">MoleculeDictionary</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">chembl</span><span class="o">=</span><span class="n">uox_id_lookup</span><span class="p">,</span>
                                                                           <span class="n">project</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
                                                                           <span class="n">structure_type</span><span class="o">=</span><span class="s2">&quot;MOL&quot;</span><span class="p">,</span>
                                                                           <span class="c1"># chirality=chirality,</span>
                                                                           <span class="n">structure_key</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi_key</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">uox_id_lookup</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">moldict</span><span class="o">.</span><span class="n">molregno</span>
                        <span class="n">uox_id_lookup</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="n">structure</span> <span class="o">=</span> <span class="n">CompoundStructures</span><span class="p">(</span>
                            <span class="n">molecule</span><span class="o">=</span><span class="n">moldict</span><span class="p">,</span> <span class="n">molfile</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">,</span> <span class="n">standard_inchi_key</span><span class="o">=</span><span class="n">inchi_key</span><span class="p">,</span> <span class="n">standard_inchi</span><span class="o">=</span><span class="n">inchi</span><span class="p">)</span>
                        <span class="n">structure</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">structure</span><span class="o">.</span><span class="n">molecule_id</span><span class="p">:</span>
                            <span class="n">generateCompoundPropertiesTask</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
                        <span class="k">print</span> <span class="n">moldict</span><span class="o">.</span><span class="n">compoundproperties</span><span class="o">.</span><span class="n">__dict__</span>
                    <span class="n">batch</span><span class="o">.</span><span class="n">related_molregno</span> <span class="o">=</span> <span class="n">moldict</span>
                <span class="n">batch</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">batch</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="cbh_chembl_model_extension.models.BONDS_WEDGED_SDF_PROP" class="name">var <span class="ident">BONDS_WEDGED_SDF_PROP</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.generate_structure_and_dictionary">
    <p>def <span class="ident">generate_structure_and_dictionary</span>(</p><p>batch)</p>
    </div>
    

    
  
    <div class="desc"><p>Adding the structure data to a compound batch object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.generate_structure_and_dictionary', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.generate_structure_and_dictionary" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_structure_and_dictionary</span><span class="p">(</span><span class="n">batch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adding the structure data to a compound batch object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chirality</span><span class="o">=</span><span class="s2">&quot;1&quot;</span>
    <span class="k">if</span> <span class="n">batch</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;not updating&quot;</span>
        <span class="c1"># currently we dont update existing compound records</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">batch</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">:</span>

            <span class="n">uox_id</span> <span class="o">=</span> <span class="n">generate_uox_id</span><span class="p">()</span>
            <span class="n">batch</span><span class="o">.</span><span class="n">blinded_batch_id</span> <span class="o">=</span> <span class="n">uox_id</span>
            <span class="n">batch</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">batch</span><span class="o">.</span><span class="n">canonical_smiles</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    

                    <span class="n">pybelmol</span> <span class="o">=</span> <span class="n">readstring</span><span class="p">(</span>
                        <span class="s2">&quot;mol&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">ctab</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span>
                    <span class="n">batch</span><span class="o">.</span><span class="n">canonical_smiles</span> <span class="o">=</span> <span class="n">pybelmol</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                        <span class="s2">&quot;can&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">batch</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;cdxml&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pybelmol</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;cdxml&quot;</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">mol</span> <span class="o">=</span> <span class="n">MolFromInchi</span><span class="p">(</span>
                        <span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">,</span> <span class="s1">&#39;ignore&#39;</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">mol</span><span class="p">:</span>
                        <span class="n">batch</span><span class="o">.</span><span class="n">std_ctab</span> <span class="o">=</span> <span class="n">MolToMolBlock</span><span class="p">(</span>
                            <span class="n">mol</span><span class="p">,</span> <span class="n">includeStereo</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="n">inchi_key</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi_key</span>
                <span class="n">inchi</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">batch</span><span class="o">.</span><span class="n">related_molregno_id</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">moldict</span> <span class="o">=</span> <span class="n">MoleculeDictionary</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
                                                                 <span class="n">structure_type</span><span class="o">=</span><span class="s2">&quot;MOL&quot;</span><span class="p">,</span>
                                                                 <span class="c1"># chirality=chirality,</span>
                                                                 <span class="n">structure_key</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi_key</span><span class="p">)</span>
                    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>

                        <span class="n">uox_id</span> <span class="o">=</span> <span class="n">generate_uox_id</span><span class="p">()</span>
                        <span class="n">rnd</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">1000000000</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span>
                        <span class="n">uox_id_lookup</span> <span class="o">=</span> <span class="n">ChemblIdLookup</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                            <span class="n">chembl_id</span><span class="o">=</span><span class="n">uox_id</span><span class="p">,</span> <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;COMPOUND&quot;</span><span class="p">,</span> <span class="n">entity_id</span><span class="o">=</span><span class="n">rnd</span><span class="p">)</span>

                        <span class="n">moldict</span> <span class="o">=</span> <span class="n">MoleculeDictionary</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">chembl</span><span class="o">=</span><span class="n">uox_id_lookup</span><span class="p">,</span>
                                                                           <span class="n">project</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">project</span><span class="p">,</span>
                                                                           <span class="n">structure_type</span><span class="o">=</span><span class="s2">&quot;MOL&quot;</span><span class="p">,</span>
                                                                           <span class="c1"># chirality=chirality,</span>
                                                                           <span class="n">structure_key</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">standard_inchi_key</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">uox_id_lookup</span><span class="o">.</span><span class="n">entity_id</span> <span class="o">=</span> <span class="n">moldict</span><span class="o">.</span><span class="n">molregno</span>
                        <span class="n">uox_id_lookup</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="n">structure</span> <span class="o">=</span> <span class="n">CompoundStructures</span><span class="p">(</span>
                            <span class="n">molecule</span><span class="o">=</span><span class="n">moldict</span><span class="p">,</span> <span class="n">molfile</span><span class="o">=</span><span class="n">batch</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">,</span> <span class="n">standard_inchi_key</span><span class="o">=</span><span class="n">inchi_key</span><span class="p">,</span> <span class="n">standard_inchi</span><span class="o">=</span><span class="n">inchi</span><span class="p">)</span>
                        <span class="n">structure</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                        <span class="k">if</span> <span class="n">structure</span><span class="o">.</span><span class="n">molecule_id</span><span class="p">:</span>
                            <span class="n">generateCompoundPropertiesTask</span><span class="p">(</span><span class="n">structure</span><span class="p">)</span>
                        <span class="k">print</span> <span class="n">moldict</span><span class="o">.</span><span class="n">compoundproperties</span><span class="o">.</span><span class="n">__dict__</span>
                    <span class="n">batch</span><span class="o">.</span><span class="n">related_molregno</span> <span class="o">=</span> <span class="n">moldict</span>
                <span class="n">batch</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">validate</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">batch</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.generate_uox_id">
    <p>def <span class="ident">generate_uox_id</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Create an alphanumeric ID for a new compound or blinded compound or inventory item, 
ensuring that this has not been created before
There is a theoretical possibility of a race condition here but it is unlikely due to the number of possible IDs that can be generated
We have proposed a foolproof method to do this ID generation in thecbh_chembl_id_generator repository but have not had time to implement it</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.generate_uox_id', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.generate_uox_id" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_uox_id</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Create an alphanumeric ID for a new compound or blinded compound or inventory item, </span>
<span class="sd">    ensuring that this has not been created before</span>
<span class="sd">    There is a theoretical possibility of a race condition here but it is unlikely due to the number of possible IDs that can be generated</span>
<span class="sd">    We have proposed a foolproof method to do this ID generation in thecbh_chembl_id_generator repository but have not had time to implement it&quot;&quot;&quot;</span>
    <span class="n">two_letterg</span> <span class="o">=</span> <span class="n">shortuuid</span><span class="o">.</span><span class="n">ShortUUID</span><span class="p">()</span>
    <span class="n">two_letterg</span><span class="o">.</span><span class="n">set_alphabet</span><span class="p">(</span><span class="s2">&quot;ABCDEFGHJKLMNPQRSTUVWXYZ&quot;</span><span class="p">)</span>
    <span class="n">two_letter</span> <span class="o">=</span> <span class="n">two_letterg</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">two_numberg</span> <span class="o">=</span> <span class="n">shortuuid</span><span class="o">.</span><span class="n">ShortUUID</span><span class="p">()</span>
    <span class="n">two_numberg</span><span class="o">.</span><span class="n">set_alphabet</span><span class="p">(</span><span class="s2">&quot;0123456789&quot;</span><span class="p">)</span>
    <span class="n">two_number</span> <span class="o">=</span> <span class="n">two_numberg</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">three_letterg</span> <span class="o">=</span> <span class="n">shortuuid</span><span class="o">.</span><span class="n">ShortUUID</span><span class="p">()</span>
    <span class="n">three_letterg</span><span class="o">.</span><span class="n">set_alphabet</span><span class="p">(</span><span class="s2">&quot;ABCDEFGHJKLMNPQRSTUVWXYZ&quot;</span><span class="p">)</span>
    <span class="n">three_letter</span> <span class="o">=</span> <span class="n">three_letterg</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">uox_id</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">settings</span><span class="o">.</span><span class="n">ID_PREFIX</span><span class="p">,</span> <span class="n">two_letter</span><span class="p">,</span> <span class="n">two_number</span><span class="p">,</span> <span class="n">three_letter</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ChemblIdLookup</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">chembl_id</span><span class="o">=</span><span class="n">uox_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">generate_uox_id</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ObjectDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">uox_id</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.index_new_compounds">
    <p>def <span class="ident">index_new_compounds</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Select unindexed compounds from the compound structures table and insert them into the compound mols table using the is_valid_ctab from RDKit to check if the molecule is valid for RDKit</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.index_new_compounds', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.index_new_compounds" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">index_new_compounds</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Select unindexed compounds from the compound structures table and insert them into the compound mols table using the is_valid_ctab from RDKit to check if the molecule is valid for RDKit&quot;&quot;&quot;</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
        <span class="s2">&quot;INSERT INTO compound_mols (molregno , ctab) SELECT c.molregno, mol_from_ctab(molfile::cstring) ctab FROM compound_structures c LEFT OUTER JOIN compound_mols ON c.molregno = compound_mols.molregno WHERE is_valid_ctab(molfile::cstring) AND compound_mols.molregno is null;&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">True</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.set_images">
    <p>def <span class="ident">set_images</span>(</p><p>batch)</p>
    </div>
    

    
  
    <div class="desc"><p>Append images to a particular compound batch object</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.set_images', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.set_images" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_images</span><span class="p">(</span><span class="n">batch</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Append images to a particular compound batch object&quot;&quot;&quot;</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">bigimage</span> <span class="o">=</span> <span class="n">_ctab2image</span><span class="p">(</span><span class="n">copy</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">ctab</span><span class="p">),</span> <span class="mi">400</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="n">recalc</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">_ctab2image</span><span class="p">(</span><span class="n">copy</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">ctab</span><span class="p">),</span><span class="mi">80</span><span class="p">,</span><span class="bp">False</span><span class="p">,</span> <span class="n">recalc</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="cbh_chembl_model_extension.models.CBHCompoundBatch" class="name">class <span class="ident">CBHCompoundBatch</span></p>
      
  
    <div class="desc"><p>Holds the batch information for an uploaded compound before it is fully registered</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CBHCompoundBatch</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Holds the batch information for an uploaded compound before it is fully registered&#39;&#39;&#39;</span>
    <span class="n">ctab</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The raw MDL molfile text (chemical table block - ctab) that was used to generate this compound batch&quot;</span><span class="p">)</span>
    <span class="n">std_ctab</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The standardised version of the above ctab/molfile text standardised using the Inchi software&quot;</span><span class="p">)</span>
    <span class="n">canonical_smiles</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Canonical SMILES pattern for the uploaded compound batch generated by the pybel library from openbabel&quot;</span><span class="p">)</span>
    <span class="n">original_smiles</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The SMILES pattern that was originally uploaded&quot;</span><span class="p">)</span>
    <span class="n">uncurated_fields</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The fields that were uploaded to the record but were not mapped on to anything, or extra information that the user wanted to include&quot;</span><span class="p">)</span>
    <span class="n">image</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A small base64 encoded image for the compound, for use in the front end&quot;</span><span class="p">)</span>
    <span class="n">bigimage</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;A larger base64 encoded image for the compound, for use in the front end&quot;</span><span class="p">)</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The display name for the user who created this compound batch&quot;</span><span class="p">)</span>
    <span class="n">created_by_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The ID from the user who created this compound batch&quot;</span><span class="p">)</span>
    <span class="n">related_molregno</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="n">MoleculeDictionary</span><span class="p">,</span> 
        <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> 
        <span class="n">to_field</span><span class="o">=</span><span class="s2">&quot;molregno&quot;</span><span class="p">,</span> 
        <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The foreign key relationship to the MoleculeDictionary record generated for this compound. May be null for compounds without a structure or inventory items&quot;</span>
        <span class="p">)</span>
    <span class="n">standard_inchi</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The standard Inchi string for the molecule as generated by the standard Inchi library&quot;</span><span class="p">)</span>
    <span class="n">standard_inchi_key</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>  <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>  <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The standard Inchi key string for the molecule as generated by the standard Inchi library&quot;</span><span class="p">)</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Warnings that were raised when the molecule was uploaded&quot;</span><span class="p">)</span>
    <span class="n">properties</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;System generated properties for the molecule and whether it is archived&quot;</span><span class="p">)</span>
    <span class="n">custom_fields</span> <span class="o">=</span> <span class="n">hstore</span><span class="o">.</span><span class="n">DictionaryField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The main field where data associated with the molecule is stored - data may be strings, numbers, lists or objects&quot;</span><span class="p">)</span>
    <span class="n">multiple_batch_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;The multiple batch id of this molecule and any others that were created at the same time&quot;</span><span class="p">)</span>
    <span class="n">objects</span> <span class="o">=</span> <span class="n">CBHCompoundBatchManager</span><span class="p">()</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Foreign key to the projects table, used to determine permissions on the compound batch object&quot;</span><span class="p">)</span>
    <span class="n">blinded_batch_id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;UUID assigned in cases where the compound batch is an inventory item or a molecule without a structure&quot;</span> <span class="p">)</span>
    <span class="n">project_counter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;ID for this compound batch within the context of the project&quot;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">generate_project_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign an ID to the compound batch object within the given project&quot;&quot;&quot;</span>
        <span class="n">Project</span> <span class="o">=</span> <span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;cbh_core_model&quot;</span><span class="p">,</span> <span class="s2">&quot;Project&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_next_incremental_id_for_compound</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">get_uk</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
        <span class="sd">&quot;&quot;&quot;Generate a unique key for the molecule, was used in finding duplicates on upload, may now be deprecated&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">__</span><span class="si">%d</span><span class="s2">__</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span> <span class="s2">&quot;MOL&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add additional generated attributes to the compound batch object as it is being saved&quot;&quot;&quot;</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;validate&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>

        <span class="c1"># self.validate()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiple_batch_id</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">mb</span> <span class="o">=</span> <span class="n">CBHCompoundMultipleBatch</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">multiple_batch_id</span> <span class="o">=</span> <span class="n">mb</span><span class="o">.</span><span class="n">id</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_counter</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_project_counter</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CBHCompoundBatch</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">:</span>
            <span class="n">uox_id_lookup</span> <span class="o">=</span> <span class="n">ChemblIdLookup</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">chembl_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">,</span>
                                                              <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;DOCUMENT&quot;</span><span class="p">,</span>
                                                              <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">temp_props</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Could now just use standardise, deprecated&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">standardise</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">standardise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Ensure Inchi etc was generated correctly&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonical_smiles</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctab</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span> <span class="o">=</span> <span class="n">inchiFromPipe</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">INCHI_BINARIES_LOCATION</span><span class="p">[</span><span class="s1">&#39;1.02&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;inchi_error&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi_key</span> <span class="o">=</span> <span class="n">InchiToInchiKey</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_chembl_model_extension.models.CBHCompoundBatch">CBHCompoundBatch</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.bigimage" class="name">var <span class="ident">bigimage</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.blinded_batch_id" class="name">var <span class="ident">blinded_batch_id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.canonical_smiles" class="name">var <span class="ident">canonical_smiles</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.created_by_id" class="name">var <span class="ident">created_by_id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.ctab" class="name">var <span class="ident">ctab</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.custom_fields" class="name">var <span class="ident">custom_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.image" class="name">var <span class="ident">image</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.multiple_batch_id" class="name">var <span class="ident">multiple_batch_id</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.original_smiles" class="name">var <span class="ident">original_smiles</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.project" class="name">var <span class="ident">project</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.project_counter" class="name">var <span class="ident">project_counter</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.properties" class="name">var <span class="ident">properties</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.related_molregno" class="name">var <span class="ident">related_molregno</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.standard_inchi" class="name">var <span class="ident">standard_inchi</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.standard_inchi_key" class="name">var <span class="ident">standard_inchi_key</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.std_ctab" class="name">var <span class="ident">std_ctab</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.uncurated_fields" class="name">var <span class="ident">uncurated_fields</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.warnings" class="name">var <span class="ident">warnings</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatch.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.generate_project_counter">
    <p>def <span class="ident">generate_project_counter</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Assign an ID to the compound batch object within the given project</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.generate_project_counter', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.generate_project_counter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">generate_project_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Assign an ID to the compound batch object within the given project&quot;&quot;&quot;</span>
    <span class="n">Project</span> <span class="o">=</span> <span class="n">get_model</span><span class="p">(</span><span class="s2">&quot;cbh_core_model&quot;</span><span class="p">,</span> <span class="s2">&quot;Project&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_next_incremental_id_for_compound</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.get_uk">
    <p>def <span class="ident">get_uk</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Generate a unique key for the molecule, was used in finding duplicates on upload, may now be deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_uk', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.get_uk" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_uk</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
    <span class="sd">&quot;&quot;&quot;Generate a unique key for the molecule, was used in finding duplicates on upload, may now be deprecated&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">__</span><span class="si">%d</span><span class="s2">__</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi_key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_id</span><span class="p">,</span> <span class="s2">&quot;MOL&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.save">
    <p>def <span class="ident">save</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Add additional generated attributes to the compound batch object as it is being saved</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add additional generated attributes to the compound batch object as it is being saved&quot;&quot;&quot;</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;validate&quot;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="c1"># self.validate()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiple_batch_id</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">mb</span> <span class="o">=</span> <span class="n">CBHCompoundMultipleBatch</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">multiple_batch_id</span> <span class="o">=</span> <span class="n">mb</span><span class="o">.</span><span class="n">id</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_counter</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_project_counter</span><span class="p">()</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">CBHCompoundBatch</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">:</span>
        <span class="n">uox_id_lookup</span> <span class="o">=</span> <span class="n">ChemblIdLookup</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">chembl_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">blinded_batch_id</span><span class="p">,</span>
                                                          <span class="n">entity_type</span><span class="o">=</span><span class="s2">&quot;DOCUMENT&quot;</span><span class="p">,</span>
                                                          <span class="n">entity_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.standardise">
    <p>def <span class="ident">standardise</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Ensure Inchi etc was generated correctly</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.standardise', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.standardise" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">standardise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Ensure Inchi etc was generated correctly&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">canonical_smiles</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ctab</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span> <span class="o">=</span> <span class="n">inchiFromPipe</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">std_ctab</span><span class="p">,</span> <span class="n">settings</span><span class="o">.</span><span class="n">INCHI_BINARIES_LOCATION</span><span class="p">[</span><span class="s1">&#39;1.02&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;inchi_error&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi_key</span> <span class="o">=</span> <span class="n">InchiToInchiKey</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">standard_inchi</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.validate">
    <p>def <span class="ident">validate</span>(</p><p>self, temp_props=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Could now just use standardise, deprecated</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.validate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.validate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">temp_props</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Could now just use standardise, deprecated&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">standardise</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatch.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatch.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatch.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_chembl_model_extension.models.CBHCompoundBatchManager" class="name">class <span class="ident">CBHCompoundBatchManager</span></p>
      
  
    <div class="desc"><p>Manager methods for the generation of compound batch objects</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CBHCompoundBatchManager</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Manager</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Manager methods for the generation of compound batch objects&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">blinded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Generate a batch with a blinded id&#39;&#39;&#39;</span>
        <span class="n">blinded_batch_id</span> <span class="o">=</span> <span class="s2">&quot;EMPTY_ID&quot;</span>
        <span class="k">return</span> <span class="n">CBHCompoundBatch</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span> <span class="n">blinded_batch_id</span><span class="o">=</span><span class="n">blinded_batch_id</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">from_rd_mol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rd_mol</span><span class="p">,</span> <span class="n">orig_ctab</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">smiles</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reDraw</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Clean up the structures that come in from Smiles or from XLS or SDFs&#39;&#39;&#39;</span>
        <span class="c1"># Get a copy of the mol data</span>
        <span class="n">moldata</span> <span class="o">=</span> <span class="n">rd_mol</span>
        <span class="k">if</span> <span class="n">orig_ctab</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">moldata</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">moldata</span><span class="o">.</span><span class="n">GetPropNames</span><span class="p">():</span>
                <span class="c1"># delete the property names for the saved ctab</span>
                <span class="n">moldata</span><span class="o">.</span><span class="n">ClearProp</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">ctab</span> <span class="o">=</span> <span class="n">Chem</span><span class="o">.</span><span class="n">MolToMolBlock</span><span class="p">(</span><span class="n">moldata</span><span class="p">)</span>
            <span class="c1"># make it into an sdf block</span>
            <span class="n">ctab</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">$$$$&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">not_first_lists</span> <span class="o">=</span> <span class="n">orig_ctab</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">headerlines</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">reallines</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">not_first_lists</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;V2000&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">headerlines</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="k">if</span> <span class="n">headerlines</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                    <span class="n">reallines</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="s2">&quot;END&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">reallines</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;blank_molfile&quot;</span><span class="p">)</span>
            <span class="n">all_lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">]</span> <span class="o">+</span> <span class="n">lines</span> <span class="o">+</span> <span class="p">[</span><span class="n">BONDS_WEDGED_SDF_PROP</span><span class="p">,</span> <span class="p">]</span>

            <span class="n">ctab</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_lines</span><span class="p">)</span>

        <span class="n">batch</span> <span class="o">=</span> <span class="n">CBHCompoundBatch</span><span class="p">(</span><span class="n">ctab</span><span class="o">=</span><span class="n">ctab</span><span class="p">,</span> <span class="n">original_smiles</span><span class="o">=</span><span class="n">smiles</span><span class="p">)</span>
        <span class="n">set_images</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">project</span><span class="p">:</span>
            <span class="n">batch</span><span class="o">.</span><span class="n">project_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>
        <span class="k">return</span> <span class="n">batch</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_chembl_model_extension.models.CBHCompoundBatchManager">CBHCompoundBatchManager</a></li>
          <li>django.db.models.manager.Manager</li>
          <li>django.db.models.manager.BaseManagerFromQuerySet</li>
          <li>django.db.models.manager.BaseManager</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.creation_counter" class="name">var <span class="ident">creation_counter</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.use_in_migrations" class="name">var <span class="ident">use_in_migrations</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.db" class="name">var <span class="ident">db</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">BaseManager</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_set_creation_counter</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_inherited</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_db</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_hints</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.aggregate">
    <p>def <span class="ident">aggregate</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary containing the calculations (aggregation)
over the current queryset</p>
<p>If args is present the expression is passed as a kwarg using
the Aggregate object's default alias.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.aggregate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.aggregate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.all">
    <p>def <span class="ident">all</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.all', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># We can&#39;t proxy this method through the `QuerySet` like we do for the</span>
    <span class="c1"># rest of the `QuerySet` methods. This is because `QuerySet.all()`</span>
    <span class="c1"># works by creating a &quot;copy&quot; of the current queryset and in making said</span>
    <span class="c1"># copy, all the cached `prefetch_related` lookups are lost. See the</span>
    <span class="c1"># implementation of `RelatedManager.get_queryset()` for a better</span>
    <span class="c1"># understanding of how this comes into play.</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.annotate">
    <p>def <span class="ident">annotate</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a query set in which the returned objects have been annotated
with extra data or aggregations.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.annotate', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.annotate" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.blinded">
    <p>def <span class="ident">blinded</span>(</p><p>self, project=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Generate a batch with a blinded id</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.blinded', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.blinded" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">blinded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Generate a batch with a blinded id&#39;&#39;&#39;</span>
    <span class="n">blinded_batch_id</span> <span class="o">=</span> <span class="s2">&quot;EMPTY_ID&quot;</span>
    <span class="k">return</span> <span class="n">CBHCompoundBatch</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">project</span><span class="p">,</span> <span class="n">blinded_batch_id</span><span class="o">=</span><span class="n">blinded_batch_id</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.bulk_create">
    <p>def <span class="ident">bulk_create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Inserts each of the instances into the database. This does <em>not</em> call
save() on each of the instances, does not send any pre/post save
signals, and does not set the primary key attribute if it is an
autoincrement field. Multi-table models are not supported.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.bulk_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.bulk_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.check">
    <p>def <span class="ident">check</span>(</p><p>self, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.check" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.complex_filter">
    <p>def <span class="ident">complex_filter</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with filter_obj added to the filters.</p>
<p>filter_obj can be a Q object (or anything with an add_to_query()
method) or a dictionary of keyword lookup arguments.</p>
<p>This exists to support framework features such as 'limit_choices_to',
and usually it will be more natural to use other methods.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.complex_filter', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.complex_filter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.contribute_to_class">
    <p>def <span class="ident">contribute_to_class</span>(</p><p>self, model, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.contribute_to_class', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.contribute_to_class" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">contribute_to_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="c1"># TODO: Use weakref because of possible memory leak / circular reference.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="c1"># Only contribute the manager if the model is concrete</span>
    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">abstract</span><span class="p">:</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">AbstractManagerDescriptor</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">SwappedManagerDescriptor</span><span class="p">(</span><span class="n">model</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># if not model._meta.abstract and not model._meta.swapped:</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ManagerDescriptor</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
    <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s1">&#39;_default_manager&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">creation_counter</span> <span class="o">&lt;</span> <span class="n">model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">creation_counter</span><span class="p">):</span>
        <span class="n">model</span><span class="o">.</span><span class="n">_default_manager</span> <span class="o">=</span> <span class="bp">self</span>
    <span class="n">abstract</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">abstract</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_inherited</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">):</span>
        <span class="n">abstract</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="n">model</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">managers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">creation_counter</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">abstract</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.count">
    <p>def <span class="ident">count</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Performs a SELECT COUNT() and returns the number of records as an
integer.</p>
<p>If the QuerySet is already fully cached this simply returns the length
of the cached results set to avoid multiple SELECT COUNT(*) calls.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.count', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.count" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.create">
    <p>def <span class="ident">create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Creates a new object with the given kwargs, saving it to the database
and returning the created object.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.dates">
    <p>def <span class="ident">dates</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of date objects representing all available dates for
the given field_name, scoped to 'kind'.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.dates', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.dates" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.datetimes">
    <p>def <span class="ident">datetimes</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a list of datetime objects representing all available
datetimes for the given field_name, scoped to 'kind'.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.datetimes', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.datetimes" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.db_manager">
    <p>def <span class="ident">db_manager</span>(</p><p>self, using=None, hints=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.db_manager', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.db_manager" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">db_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hints</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_db</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_db</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">_hints</span> <span class="o">=</span> <span class="n">hints</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hints</span>
    <span class="k">return</span> <span class="n">obj</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.deconstruct">
    <p>def <span class="ident">deconstruct</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a 5-tuple of the form (as_manager (True), manager_class,
queryset_class, args, kwargs).</p>
<p>Raises a ValueError if the manager is dynamically generated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.deconstruct', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.deconstruct" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">deconstruct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a 5-tuple of the form (as_manager (True), manager_class,</span>
<span class="sd">    queryset_class, args, kwargs).</span>
<span class="sd">    Raises a ValueError if the manager is dynamically generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">qs_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queryset_class</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_built_with_as_manager&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">):</span>
        <span class="c1"># using MyQuerySet.as_manager()</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">True</span><span class="p">,</span>  <span class="c1"># as_manager</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># manager_class</span>
            <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">qs_class</span><span class="o">.</span><span class="n">__module__</span><span class="p">,</span> <span class="n">qs_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">),</span>  <span class="c1"># qs_class</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># args</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># kwargs</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">module_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__module__</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span>
        <span class="c1"># Make sure it&#39;s actually there and not an inner class</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">module_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Could not find manager </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="s2">&quot;Please note that you need to inherit from managers you &quot;</span>
                <span class="s2">&quot;dynamically generated with &#39;from_queryset()&#39;.&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">module_name</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="bp">False</span><span class="p">,</span>  <span class="c1"># as_manager</span>
            <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">module_name</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span>  <span class="c1"># manager_class</span>
            <span class="bp">None</span><span class="p">,</span>  <span class="c1"># qs_class</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_constructor_args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># args</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_constructor_args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>  <span class="c1"># kwargs</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.defer">
    <p>def <span class="ident">defer</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Defers the loading of data for certain fields until they are accessed.
The set of fields to defer is added to any existing set of deferred
fields. The only exception to this is if None is passed in as the only
parameter, in which case all deferrals are removed (None acts as a
reset option).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.defer', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.defer" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.distinct">
    <p>def <span class="ident">distinct</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will select only distinct results.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.distinct', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.distinct" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.earliest">
    <p>def <span class="ident">earliest</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.earliest', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.earliest" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.exclude">
    <p>def <span class="ident">exclude</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with NOT (args) ANDed to the existing
set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.exclude', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.exclude" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.exists">
    <p>def <span class="ident">exists</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.exists', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.exists" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.extra">
    <p>def <span class="ident">extra</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Adds extra SQL fragments to the query.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.extra', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.extra" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.filter">
    <p>def <span class="ident">filter</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with the args ANDed to the existing
set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.filter', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.filter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.first">
    <p>def <span class="ident">first</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the first object of a query, returns None if no match is found.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.first', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.first" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_queryset">
    <p>def <span class="ident">from_queryset</span>(</p><p>cls, queryset_class, class_name=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_queryset', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_queryset" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_queryset</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">queryset_class</span><span class="p">,</span> <span class="n">class_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">class_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">class_name</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">From</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">queryset_class</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">class_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;_queryset_class&#39;</span><span class="p">:</span> <span class="n">queryset_class</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">class_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_get_queryset_methods</span><span class="p">(</span><span class="n">queryset_class</span><span class="p">))</span>
    <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="n">class_name</span><span class="p">,</span> <span class="p">(</span><span class="n">cls</span><span class="p">,),</span> <span class="n">class_dict</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_rd_mol">
    <p>def <span class="ident">from_rd_mol</span>(</p><p>self, rd_mol, orig_ctab=None, smiles=&#39;&#39;, project=None, reDraw=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Clean up the structures that come in from Smiles or from XLS or SDFs</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_rd_mol', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.from_rd_mol" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">from_rd_mol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rd_mol</span><span class="p">,</span> <span class="n">orig_ctab</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">smiles</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reDraw</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Clean up the structures that come in from Smiles or from XLS or SDFs&#39;&#39;&#39;</span>
    <span class="c1"># Get a copy of the mol data</span>
    <span class="n">moldata</span> <span class="o">=</span> <span class="n">rd_mol</span>
    <span class="k">if</span> <span class="n">orig_ctab</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">moldata</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">moldata</span><span class="o">.</span><span class="n">GetPropNames</span><span class="p">():</span>
            <span class="c1"># delete the property names for the saved ctab</span>
            <span class="n">moldata</span><span class="o">.</span><span class="n">ClearProp</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">ctab</span> <span class="o">=</span> <span class="n">Chem</span><span class="o">.</span><span class="n">MolToMolBlock</span><span class="p">(</span><span class="n">moldata</span><span class="p">)</span>
        <span class="c1"># make it into an sdf block</span>
        <span class="n">ctab</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">$$$$&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">not_first_lists</span> <span class="o">=</span> <span class="n">orig_ctab</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">headerlines</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">reallines</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">not_first_lists</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;V2000&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">headerlines</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">if</span> <span class="n">headerlines</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="n">reallines</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="s2">&quot;END&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">reallines</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;blank_molfile&quot;</span><span class="p">)</span>
        <span class="n">all_lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="p">]</span> <span class="o">+</span> <span class="n">lines</span> <span class="o">+</span> <span class="p">[</span><span class="n">BONDS_WEDGED_SDF_PROP</span><span class="p">,</span> <span class="p">]</span>
        <span class="n">ctab</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_lines</span><span class="p">)</span>
    <span class="n">batch</span> <span class="o">=</span> <span class="n">CBHCompoundBatch</span><span class="p">(</span><span class="n">ctab</span><span class="o">=</span><span class="n">ctab</span><span class="p">,</span> <span class="n">original_smiles</span><span class="o">=</span><span class="n">smiles</span><span class="p">)</span>
    <span class="n">set_images</span><span class="p">(</span><span class="n">batch</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">project</span><span class="p">:</span>
        <span class="n">batch</span><span class="o">.</span><span class="n">project_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">id</span>
    <span class="k">return</span> <span class="n">batch</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.get">
    <p>def <span class="ident">get</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Performs the query and returns a single object matching the given
keyword arguments.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.get', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_or_create">
    <p>def <span class="ident">get_or_create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Looks up an object with the given kwargs, creating one if necessary.
Returns a tuple of (object, created), where created is a boolean
specifying whether an object was created.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_or_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_or_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_queryset">
    <p>def <span class="ident">get_queryset</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet object.  Subclasses can override this method to
easily customize the behavior of the Manager.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_queryset', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.get_queryset" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a new QuerySet object.  Subclasses can override this method to</span>
<span class="sd">    easily customize the behavior of the Manager.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_queryset_class</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_db</span><span class="p">,</span> <span class="n">hints</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_hints</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.in_bulk">
    <p>def <span class="ident">in_bulk</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a dictionary mapping each of the given IDs to the object with
that ID.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.in_bulk', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.in_bulk" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.iterator">
    <p>def <span class="ident">iterator</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>An iterator over the results from applying this QuerySet to the
database.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.iterator', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.iterator" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.last">
    <p>def <span class="ident">last</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the last object of a query, returns None if no match is found.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.last', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.last" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.latest">
    <p>def <span class="ident">latest</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.latest', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.latest" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.none">
    <p>def <span class="ident">none</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns an empty QuerySet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.none', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.none" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.only">
    <p>def <span class="ident">only</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Essentially, the opposite of defer. Only the fields passed into this
method and that are not already specified as deferred are loaded
immediately when the queryset is evaluated.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.only', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.only" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.order_by">
    <p>def <span class="ident">order_by</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance with the ordering changed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.order_by', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.order_by" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.prefetch_related">
    <p>def <span class="ident">prefetch_related</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will prefetch the specified
Many-To-One and Many-To-Many related objects when the QuerySet is
evaluated.</p>
<p>When prefetch_related() is called more than once, the list of lookups to
prefetch is appended to. If prefetch_related(None) is called, the list
is cleared.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.prefetch_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.prefetch_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.raw">
    <p>def <span class="ident">raw</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.raw', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.raw" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.reverse">
    <p>def <span class="ident">reverse</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reverses the ordering of the QuerySet.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.reverse', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.reverse" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_for_update">
    <p>def <span class="ident">select_for_update</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will select objects with a
FOR UPDATE lock.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_for_update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_for_update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_related">
    <p>def <span class="ident">select_related</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a new QuerySet instance that will select related objects.</p>
<p>If fields are specified, they must be ForeignKey fields and only those
related objects are included in the selection.</p>
<p>If select_related(None) is called, the list is cleared.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_related', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.select_related" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.update">
    <p>def <span class="ident">update</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Updates all elements in the current QuerySet, setting all the given
fields to the appropriate values.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.update', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.update_or_create">
    <p>def <span class="ident">update_or_create</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Looks up an object with the given kwargs, updating one with defaults
if it exists, otherwise creates a new one.
Returns a tuple (object, created), where created is a boolean
specifying whether an object was created.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.update_or_create', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.update_or_create" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.using">
    <p>def <span class="ident">using</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Selects which database this QuerySet should execute its query against.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.using', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.using" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.values">
    <p>def <span class="ident">values</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.values', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.values" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundBatchManager.values_list">
    <p>def <span class="ident">values_list</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.values_list', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundBatchManager.values_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">manager_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">(),</span> <span class="n">name</span><span class="p">)(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch" class="name">class <span class="ident">CBHCompoundMultipleBatch</span></p>
      
  
    <div class="desc"><p>Holds a list of batches</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">CBHCompoundMultipleBatch</span><span class="p">(</span><span class="n">TimeStampedModel</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Holds a list of batches&#39;&#39;&#39;</span>
    <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span>
        <span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">db_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;User who created this multiple batch&quot;</span><span class="p">)</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s2">&quot;cbh_core_model.Project&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Project that the multiple batch was created in&quot;</span><span class="p">)</span>
    <span class="n">uploaded_data</span> <span class="o">=</span> <span class="n">PickledObjectField</span><span class="p">(</span><span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Now used to store the headers from the file used to generate the multiple batch, picke use perhaps can be improved or is deprecated&quot;</span><span class="p">)</span>
    <span class="n">uploaded_file</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span>
        <span class="s2">&quot;cbh_core_model.CBHFlowFile&quot;</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;File that was uploaded to generate this multiple batch&quot;</span><span class="p">)</span>
    <span class="n">saved</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help_text</span><span class="o">=</span><span class="s2">&quot;Whether this multiple batch has been saved or not&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#cbh_chembl_model_extension.models.CBHCompoundMultipleBatch">CBHCompoundMultipleBatch</a></li>
          <li>django_extensions.db.models.TimeStampedModel</li>
          <li>django.db.models.base.Model</li>
          <li>__builtin__.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.DoesNotExist" class="name">var <span class="ident">DoesNotExist</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.Meta" class="name">var <span class="ident">Meta</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.MultipleObjectsReturned" class="name">var <span class="ident">MultipleObjectsReturned</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.created_by" class="name">var <span class="ident">created_by</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.objects" class="name">var <span class="ident">objects</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.project" class="name">var <span class="ident">project</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.saved" class="name">var <span class="ident">saved</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.uploaded_data" class="name">var <span class="ident">uploaded_data</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.uploaded_file" class="name">var <span class="ident">uploaded_file</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Instance variables</h3>
            <div class="item">
            <p id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.pk" class="name">var <span class="ident">pk</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.__init__', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">pre_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># Set up the storage for instance state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">ModelState</span><span class="p">()</span>
    <span class="c1"># There is a rather weird disparity here; if kwargs, it&#39;s set, then args</span>
    <span class="c1"># overrides it. It should be one or the other; don&#39;t duplicate the work</span>
    <span class="c1"># The reason for the kwargs check is that standard iterator passes in by</span>
    <span class="c1"># args, and instantiation for iteration is 33% faster.</span>
    <span class="n">args_len</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args_len</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">):</span>
        <span class="c1"># Daft, but matches old exception sans the err msg.</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s2">&quot;Number of args exceeds number of fields&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">)</span>
        <span class="c1"># The ordering of the zip calls matter - zip throws StopIteration</span>
        <span class="c1"># when an iter throws it. So if the first iter throws it, the second</span>
        <span class="c1"># is *not* consumed. We rely on this, so don&#39;t change the order</span>
        <span class="c1"># without changing the logic.</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Slower, kwargs-ready version.</span>
        <span class="n">fields_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">val</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">fields_iter</span><span class="p">):</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># Maintain compatibility with existing calls.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ManyToOneRel</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="c1"># Now we&#39;re left with the unprocessed fields that *must* come from</span>
    <span class="c1"># keywords, or default.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields_iter</span><span class="p">:</span>
        <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c1"># This slightly odd construct is so that we can access any</span>
        <span class="c1"># data-descriptor object (DeferredAttribute) without triggering its</span>
        <span class="c1"># __get__ method.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
                 <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">column</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)):</span>
            <span class="c1"># This field will be populated on request.</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="p">,</span> <span class="n">ForeignObjectRel</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Assume object instance was passed in.</span>
                    <span class="n">rel_obj</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">is_related_object</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="c1"># Object instance wasn&#39;t passed in -- must be an ID.</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Object instance was passed in. Special case: You can</span>
                    <span class="c1"># pass in &quot;None&quot; for related objects if it&#39;s allowed.</span>
                    <span class="k">if</span> <span class="n">rel_obj</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">null</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># This is done with an exception rather than the</span>
                    <span class="c1"># default argument on pop because we don&#39;t want</span>
                    <span class="c1"># get_default() to be evaluated, and then not used.</span>
                    <span class="c1"># Refs #12057.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">val</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">is_related_object</span><span class="p">:</span>
            <span class="c1"># If we are passed a related instance, set it using the</span>
            <span class="c1"># field.name instead of field.attname (e.g. &quot;user&quot; instead of</span>
            <span class="c1"># &quot;user_id&quot;) so that the object gets properly cached (and type</span>
            <span class="c1"># checked) by the RelatedObjectDescriptor.</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">rel_obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">prop</span><span class="p">),</span> <span class="nb">property</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prop</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">prop</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39; is an invalid keyword argument for this function&quot;</span> <span class="o">%</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">Model</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">post_init</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.check">
    <p>def <span class="ident">check</span>(</p><p>cls, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.check', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.check" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_swappable</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_model</span><span class="p">())</span>
    <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_managers</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">swapped</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_fields</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_m2m_through_same_relationship</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_long_column_names</span><span class="p">())</span>
        <span class="n">clash_errors</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_id_field</span><span class="p">()</span> <span class="o">+</span> <span class="n">cls</span><span class="o">.</span><span class="n">_check_field_name_clashes</span><span class="p">()</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">clash_errors</span><span class="p">)</span>
        <span class="c1"># If there are field name clashes, hide consequent column name</span>
        <span class="c1"># clashes.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">clash_errors</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_column_name_clashes</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_index_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_unique_together</span><span class="p">())</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">_check_ordering</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">errors</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean">
    <p>def <span class="ident">clean</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Hook for doing any extra model-wide validation after clean() has been
called on every field by self.clean_fields. Any ValidationError raised
by this method will not be associated with a particular field; it will
have a special-case association with the field defined by NON_FIELD_ERRORS.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Hook for doing any extra model-wide validation after clean() has been</span>
<span class="sd">    called on every field by self.clean_fields. Any ValidationError raised</span>
<span class="sd">    by this method will not be associated with a particular field; it will</span>
<span class="sd">    have a special-case association with the field defined by NON_FIELD_ERRORS.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean_fields">
    <p>def <span class="ident">clean_fields</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Cleans all fields and raises a ValidationError containing a dict
of all validation errors if any occur.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.clean_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">clean_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Cleans all fields and raises a ValidationError containing a dict</span>
<span class="sd">    of all validation errors if any occur.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c1"># Skip validation for empty fields with blank=True. The developer</span>
        <span class="c1"># is responsible for making sure they have a valid value.</span>
        <span class="n">raw_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">blank</span> <span class="ow">and</span> <span class="n">raw_value</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">empty_values</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="bp">self</span><span class="p">))</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.date_error_message">
    <p>def <span class="ident">date_error_message</span>(</p><p>self, lookup_type, field_name, unique_for)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.date_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.date_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">date_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lookup_type</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">unique_for</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">],</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_for_date&#39;</span><span class="p">,</span>
        <span class="n">params</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
            <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;lookup_type&#39;</span><span class="p">:</span> <span class="n">lookup_type</span><span class="p">,</span>
            <span class="s1">&#39;field&#39;</span><span class="p">:</span> <span class="n">field_name</span><span class="p">,</span>
            <span class="s1">&#39;field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
            <span class="s1">&#39;date_field&#39;</span><span class="p">:</span> <span class="n">unique_for</span><span class="p">,</span>
            <span class="s1">&#39;date_field_label&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_for</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="p">}</span>
    <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.delete">
    <p>def <span class="ident">delete</span>(</p><p>self, using=None, keep_parents=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.delete', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.delete" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">keep_parents</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_pk_val</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">,</span> <span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> object can&#39;t be deleted because its </span><span class="si">%s</span><span class="s2"> attribute is set to None.&quot;</span> <span class="o">%</span>
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">pk</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="n">Collector</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
    <span class="n">collector</span><span class="o">.</span><span class="n">collect</span><span class="p">([</span><span class="bp">self</span><span class="p">],</span> <span class="n">keep_parents</span><span class="o">=</span><span class="n">keep_parents</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">collector</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.from_db">
    <p>def <span class="ident">from_db</span>(</p><p>cls, db, field_names, values)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_db</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">field_names</span><span class="p">,</span> <span class="n">values</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">)</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">new</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>
    <span class="k">return</span> <span class="n">new</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.full_clean">
    <p>def <span class="ident">full_clean</span>(</p><p>self, exclude=None, validate_unique=True)</p>
    </div>
    

    
  
    <div class="desc"><p>Calls clean_fields, clean, and validate_unique, on the model,
and raises a <code>ValidationError</code> for any errors that occurred.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.full_clean', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.full_clean" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">full_clean</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">validate_unique</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calls clean_fields, clean, and validate_unique, on the model,</span>
<span class="sd">    and raises a ``ValidationError`` for any errors that occurred.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">exclude</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_fields</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Form.clean() is run even if other validation fails, so do the</span>
    <span class="c1"># same with Model.clean() for consistency.</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="c1"># Run unique checks, but only for fields that passed validation.</span>
    <span class="k">if</span> <span class="n">validate_unique</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">errors</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">!=</span> <span class="n">NON_FIELD_ERRORS</span> <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="n">exclude</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_unique</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">update_error_dict</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_deferred_fields">
    <p>def <span class="ident">get_deferred_fields</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns a set containing names of deferred fields for this instance.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_deferred_fields', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_deferred_fields" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_deferred_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a set containing names of deferred fields for this instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">),</span> <span class="n">DeferredAttribute</span><span class="p">)</span>
    <span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_created">
    <p>def <span class="ident">get_next_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_modified">
    <p>def <span class="ident">get_next_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_next_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_created">
    <p>def <span class="ident">get_previous_by_created</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_created', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_created" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_modified">
    <p>def <span class="ident">get_previous_by_modified</span>(</p><p>*moreargs, **morekwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_modified', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.get_previous_by_modified" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">_curried</span><span class="p">(</span><span class="o">*</span><span class="n">moreargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_curried_func</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">args</span> <span class="o">+</span> <span class="n">moreargs</span><span class="p">),</span> <span class="o">**</span><span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">morekwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.prepare_database_save">
    <p>def <span class="ident">prepare_database_save</span>(</p><p>self, field)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.prepare_database_save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.prepare_database_save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prepare_database_save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unsaved model instance </span><span class="si">%r</span><span class="s2"> cannot be used in an ORM query.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_related_field</span><span class="p">()</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.refresh_from_db">
    <p>def <span class="ident">refresh_from_db</span>(</p><p>self, using=None, fields=None, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Reloads field values from the database.</p>
<p>By default, the reloading happens from the database this instance was
loaded from, or by the read router if this instance wasn't loaded from
any database. The using parameter will override the default.</p>
<p>Fields can be used to specify which fields to reload. The fields
should be an iterable of field attnames. If fields is None, then
all non-deferred fields are reloaded.</p>
<p>When accessing deferred fields of an instance, the deferred loading
of the field will call this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.refresh_from_db', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.refresh_from_db" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">refresh_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reloads field values from the database.</span>
<span class="sd">    By default, the reloading happens from the database this instance was</span>
<span class="sd">    loaded from, or by the read router if this instance wasn&#39;t loaded from</span>
<span class="sd">    any database. The using parameter will override the default.</span>
<span class="sd">    Fields can be used to specify which fields to reload. The fields</span>
<span class="sd">    should be an iterable of field attnames. If fields is None, then</span>
<span class="sd">    all non-deferred fields are reloaded.</span>
<span class="sd">    When accessing deferred fields of an instance, the deferred loading</span>
<span class="sd">    of the field will call this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">LOOKUP_SEP</span> <span class="ow">in</span> <span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Found &quot;</span><span class="si">%s</span><span class="s1">&quot; in fields argument. Relations and transforms &#39;</span>
                <span class="s1">&#39;are not allowed in fields.&#39;</span> <span class="o">%</span> <span class="n">LOOKUP_SEP</span><span class="p">)</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">using</span> <span class="k">if</span> <span class="n">using</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy_for_model</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">non_deferred_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">non_deferred_model</span><span class="o">.</span><span class="n">_default_manager</span><span class="o">.</span><span class="n">using</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span>
    <span class="c1"># Use provided fields, if not set then reload all non-deferred fields.</span>
    <span class="k">if</span> <span class="n">fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span><span class="p">:</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span>
                  <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">deferred_fields</span><span class="p">]</span>
        <span class="n">db_instance_qs</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="o">*</span><span class="n">fields</span><span class="p">)</span>
    <span class="n">db_instance</span> <span class="o">=</span> <span class="n">db_instance_qs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="n">non_loaded_fields</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">get_deferred_fields</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span> <span class="ow">in</span> <span class="n">non_loaded_fields</span><span class="p">:</span>
            <span class="c1"># This field wasn&#39;t refreshed - skip ahead.</span>
            <span class="k">continue</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">))</span>
        <span class="c1"># Throw away stale foreign key references.</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">:</span>
            <span class="n">rel_instance</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="n">local_val</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">db_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="n">related_val</span> <span class="o">=</span> <span class="bp">None</span> <span class="k">if</span> <span class="n">rel_instance</span> <span class="ow">is</span> <span class="bp">None</span> <span class="k">else</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">rel_instance</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">target_field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">local_val</span> <span class="o">!=</span> <span class="n">related_val</span> <span class="ow">or</span> <span class="p">(</span><span class="n">local_val</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">related_val</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">()]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db_instance</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save">
    <p>def <span class="ident">save</span>(</p><p>self, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Saves the current instance. Override this in a subclass if you want to
control the saving process.</p>
<p>The 'force_insert' and 'force_update' parameters can be used to insist
that the "save" must be an SQL insert or update (or equivalent for
non-SQL backends), respectively. Normally, they should not be set.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
         <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves the current instance. Override this in a subclass if you want to</span>
<span class="sd">    control the saving process.</span>
<span class="sd">    The &#39;force_insert&#39; and &#39;force_update&#39; parameters can be used to insist</span>
<span class="sd">    that the &quot;save&quot; must be an SQL insert or update (or equivalent for</span>
<span class="sd">    non-SQL backends), respectively. Normally, they should not be set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Ensure that a model instance without a PK hasn&#39;t been assigned to</span>
    <span class="c1"># a ForeignKey or OneToOneField on this model. If the field is</span>
    <span class="c1"># nullable, allowing the save() would result in silent data loss.</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">is_relation</span><span class="p">:</span>
            <span class="c1"># If the related field isn&#39;t cached, then an instance hasn&#39;t</span>
            <span class="c1"># been assigned and there&#39;s no need to worry about this check.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="c1"># A pk may have been assigned manually to a model instance not</span>
            <span class="c1"># saved to the database (or auto-generated in a case like</span>
            <span class="c1"># UUIDField), but we allow the save to proceed and rely on the</span>
            <span class="c1"># database to raise an IntegrityError if applicable. If</span>
            <span class="c1"># constraints aren&#39;t supported by the database, there&#39;s the</span>
            <span class="c1"># unavoidable risk of data corruption.</span>
            <span class="k">if</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">pk</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c1"># Remove the object from a related instance cache.</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">multiple</span><span class="p">:</span>
                    <span class="nb">delattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">remote_field</span><span class="o">.</span><span class="n">get_cache_name</span><span class="p">())</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;save() prohibited to prevent data loss due to &quot;</span>
                    <span class="s2">&quot;unsaved related object &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span>
                <span class="p">)</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Cannot force both insert and updating in model saving.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># If update_fields is empty, skip the save. We do also check for</span>
        <span class="c1"># no-op saves later on for inheritance cases. This bailout is</span>
        <span class="c1"># still needed for skipping signal sending.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span><span class="p">:</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">:</span>
                    <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">non_model_fields</span> <span class="o">=</span> <span class="n">update_fields</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">field_names</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">non_model_fields</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The following fields do not exist in this &quot;</span>
                             <span class="s2">&quot;model or are m2m fields: </span><span class="si">%s</span><span class="s2">&quot;</span>
                             <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_model_fields</span><span class="p">))</span>
    <span class="c1"># If saving to the same database, and this model is deferred, then</span>
    <span class="c1"># automatically do a &quot;update_fields&quot; save on the loaded fields.</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">force_insert</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deferred</span> <span class="ow">and</span> <span class="n">using</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span><span class="p">:</span>
        <span class="n">field_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">primary_key</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="s1">&#39;through&#39;</span><span class="p">):</span>
                <span class="n">field_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
        <span class="n">deferred_fields</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">fields</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="ow">and</span>
                <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__dict__</span><span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">attname</span><span class="p">],</span> <span class="n">DeferredAttribute</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">loaded_fields</span> <span class="o">=</span> <span class="n">field_names</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">deferred_fields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">loaded_fields</span><span class="p">:</span>
            <span class="n">update_fields</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">(</span><span class="n">loaded_fields</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_base</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="n">force_insert</span><span class="p">,</span>
                   <span class="n">force_update</span><span class="o">=</span><span class="n">force_update</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save_base">
    <p>def <span class="ident">save_base</span>(</p><p>self, raw=False, force_insert=False, force_update=False, using=None, update_fields=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Handles the parts of saving which should be done only once per save,
yet need to be done in raw saves, too. This includes some sanity
checks and signal sending.</p>
<p>The 'raw' argument is telling save_base not to save any parent
models and not to do any changes to the values before save. This
is used by fixture loading.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save_base', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.save_base" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">force_insert</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">force_update</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">update_fields</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the parts of saving which should be done only once per save,</span>
<span class="sd">    yet need to be done in raw saves, too. This includes some sanity</span>
<span class="sd">    checks and signal sending.</span>
<span class="sd">    The &#39;raw&#39; argument is telling save_base not to save any parent</span>
<span class="sd">    models and not to do any changes to the values before save. This</span>
<span class="sd">    is used by fixture loading.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">using</span> <span class="o">=</span> <span class="n">using</span> <span class="ow">or</span> <span class="n">router</span><span class="o">.</span><span class="n">db_for_write</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">force_insert</span> <span class="ow">and</span> <span class="p">(</span><span class="n">force_update</span> <span class="ow">or</span> <span class="n">update_fields</span><span class="p">))</span>
    <span class="k">assert</span> <span class="n">update_fields</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">update_fields</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
    <span class="n">cls</span> <span class="o">=</span> <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span>
    <span class="c1"># Skip proxies, but keep the origin as the proxy model.</span>
    <span class="k">if</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">proxy</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">concrete_model</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">_meta</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">pre_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span>
                              <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">transaction</span><span class="o">.</span><span class="n">atomic</span><span class="p">(</span><span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">,</span> <span class="n">savepoint</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_parents</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
        <span class="n">updated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_save_table</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">cls</span><span class="p">,</span> <span class="n">force_insert</span><span class="p">,</span> <span class="n">force_update</span><span class="p">,</span> <span class="n">using</span><span class="p">,</span> <span class="n">update_fields</span><span class="p">)</span>
    <span class="c1"># Store the database on which the object was saved</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">using</span>
    <span class="c1"># Once saved, this is no longer a to-be-added instance.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state</span><span class="o">.</span><span class="n">adding</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="c1"># Signal that the save is complete</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">meta</span><span class="o">.</span><span class="n">auto_created</span><span class="p">:</span>
        <span class="n">signals</span><span class="o">.</span><span class="n">post_save</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">sender</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">created</span><span class="o">=</span><span class="p">(</span><span class="ow">not</span> <span class="n">updated</span><span class="p">),</span>
                               <span class="n">update_fields</span><span class="o">=</span><span class="n">update_fields</span><span class="p">,</span> <span class="n">raw</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span> <span class="n">using</span><span class="o">=</span><span class="n">using</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.serializable_value">
    <p>def <span class="ident">serializable_value</span>(</p><p>self, field_name)</p>
    </div>
    

    
  
    <div class="desc"><p>Returns the value of the field name for this instance. If the field is
a foreign key, returns the id value, instead of the object. If there's
no Field object with this name on the model, the model attribute's
value is returned directly.</p>
<p>Used to serialize a field's value (in the serializer, or form output,
for example). Normally, you would just access the attribute directly
and not use this method.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.serializable_value', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.serializable_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">serializable_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the value of the field name for this instance. If the field is</span>
<span class="sd">    a foreign key, returns the id value, instead of the object. If there&#39;s</span>
<span class="sd">    no Field object with this name on the model, the model attribute&#39;s</span>
<span class="sd">    value is returned directly.</span>
<span class="sd">    Used to serialize a field&#39;s value (in the serializer, or form output,</span>
<span class="sd">    for example). Normally, you would just access the attribute directly</span>
<span class="sd">    and not use this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">attname</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.unique_error_message">
    <p>def <span class="ident">unique_error_message</span>(</p><p>self, model_class, unique_check)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.unique_error_message', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.unique_error_message" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unique_error_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model_class</span><span class="p">,</span> <span class="n">unique_check</span><span class="p">):</span>
    <span class="n">opts</span> <span class="o">=</span> <span class="n">model_class</span><span class="o">.</span><span class="n">_meta</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">,</span>
        <span class="s1">&#39;model_class&#39;</span><span class="p">:</span> <span class="n">model_class</span><span class="p">,</span>
        <span class="s1">&#39;model_name&#39;</span><span class="p">:</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)),</span>
        <span class="s1">&#39;unique_check&#39;</span><span class="p">:</span> <span class="n">unique_check</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># A unique field</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_check</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">field</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">unique_check</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">capfirst</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">field</span><span class="o">.</span><span class="n">error_messages</span><span class="p">[</span><span class="s1">&#39;unique&#39;</span><span class="p">],</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="c1"># unique_together</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">field_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">capfirst</span><span class="p">(</span><span class="n">opts</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">verbose_name</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">unique_check</span><span class="p">]</span>
        <span class="n">params</span><span class="p">[</span><span class="s1">&#39;field_labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">text_type</span><span class="p">(</span><span class="n">get_text_list</span><span class="p">(</span><span class="n">field_labels</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;and&#39;</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">ValidationError</span><span class="p">(</span>
            <span class="n">message</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(model_name)s</span><span class="s2"> with this </span><span class="si">%(field_labels)s</span><span class="s2"> already exists.&quot;</span><span class="p">),</span>
            <span class="n">code</span><span class="o">=</span><span class="s1">&#39;unique_together&#39;</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
        <span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.validate_unique">
    <p>def <span class="ident">validate_unique</span>(</p><p>self, exclude=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Checks unique constraints on the model and raises <code>ValidationError</code>
if any failed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.validate_unique', this);">Show source &equiv;</a></p>
  <div id="source-cbh_chembl_model_extension.models.CBHCompoundMultipleBatch.validate_unique" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">validate_unique</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks unique constraints on the model and raises ``ValidationError``</span>
<span class="sd">    if any failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unique_checks</span><span class="p">,</span> <span class="n">date_checks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_unique_checks</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_unique_checks</span><span class="p">(</span><span class="n">unique_checks</span><span class="p">)</span>
    <span class="n">date_errors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_perform_date_checks</span><span class="p">(</span><span class="n">date_checks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">date_errors</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>
</body>
</html>
